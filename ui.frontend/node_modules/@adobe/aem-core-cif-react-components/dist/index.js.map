{"version":3,"sources":["webpack://@adobe/aem-core-cif-react-components/webpack/universalModuleDefinition","webpack://@adobe/aem-core-cif-react-components/webpack/bootstrap","webpack://@adobe/aem-core-cif-react-components/external \"react\"","webpack://@adobe/aem-core-cif-react-components/external \"prop-types\"","webpack://@adobe/aem-core-cif-react-components/external \"@apollo/client\"","webpack://@adobe/aem-core-cif-react-components/external \"react-intl\"","webpack://@adobe/aem-core-cif-react-components/external \"react-feather\"","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressForm/addressForm.css?dc86","webpack://@adobe/aem-core-cif-react-components/external \"informed\"","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/paymentsForm.css?fa33","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressBook/addressItem.css?ea66","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/product.css?5d83","webpack://@adobe/aem-core-cif-react-components/./src/components/Dialog/dialog.css?5578","webpack://@adobe/aem-core-cif-react-components/./src/components/AccountDetails/accountDetails.css?cb44","webpack://@adobe/aem-core-cif-react-components/external \"@magento/peregrine/lib/talons/MiniCart/miniCartFragments.gql\"","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/cartOptions.css?f1d8","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/totalsSummary.css?c803","webpack://@adobe/aem-core-cif-react-components/./src/components/ResetPassword/ResetPassword.css?769e","webpack://@adobe/aem-core-cif-react-components/./src/components/AccountDetails/editForm.css?2e43","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/shippingForm.css?3111","webpack://@adobe/aem-core-cif-react-components/./src/components/AuthBar/userChip.css?dd00","webpack://@adobe/aem-core-cif-react-components/./src/components/SignIn/signIn.css?c7d9","webpack://@adobe/aem-core-cif-react-components/./src/components/MyAccount/myAccount.css?ad8b","webpack://@adobe/aem-core-cif-react-components/./src/components/CreateAccount/createAccountSuccess.css?112a","webpack://@adobe/aem-core-cif-react-components/./src/components/ChangePassword/changePassword.css?92b3","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/section.css?b11a","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/receipt.css?14fd","webpack://@adobe/aem-core-cif-react-components/external \"@magento/peregrine/lib/store/actions/cart/asyncActions\"","webpack://@adobe/aem-core-cif-react-components/./src/components/LoadingIndicator/indicator.css?e13d","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/kebab.css?00c4","webpack://@adobe/aem-core-cif-react-components/./src/components/Field/fieldIcons.css?af55","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkbox/checkbox.css?e4ca","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressBook/addAddressButton.css?73d3","webpack://@adobe/aem-core-cif-react-components/external \"@magento/peregrine/lib/util/simplePersistence\"","webpack://@adobe/aem-core-cif-react-components/external \"@magento/peregrine/lib/util/shallowMerge\"","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/emptyMiniCartBody.css?b5d6","webpack://@adobe/aem-core-cif-react-components/./src/components/Field/field.css?b9d9","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/discountList.css?e99f","webpack://@adobe/aem-core-cif-react-components/./src/components/AccountContainer/accountDropdown.css?21e8","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressBook/addressDeleteModal.css?fe45","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressBook/addressFormContainer.css?1001","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressBook/addressBook.css?d6a5","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/header.css?a4f0","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/section.css?b705","webpack://@adobe/aem-core-cif-react-components/./src/components/Button/button.css?5f99","webpack://@adobe/aem-core-cif-react-components/./src/components/Field/message.css?dfb2","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/error.css?038f","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/couponForm.css?0526","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/couponItem.css?4a49","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/form.css?1a56","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/paymentProviders/paymentProvider.css?b4b3","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/footer.css?b17e","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/minicart.css?5ca0","webpack://@adobe/aem-core-cif-react-components/external \"graphql\"","webpack://@adobe/aem-core-cif-react-components/./src/components/ForgotPassword/forgotPassword.css?1681","webpack://@adobe/aem-core-cif-react-components/./src/components/AuthBar/container.css?2392","webpack://@adobe/aem-core-cif-react-components/./src/components/AccountContainer/accountTrigger.css?821b","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressBook/addressItemsContainer.css?d1f0","webpack://@adobe/aem-core-cif-react-components/external \"@magento/peregrine/lib/Apollo/policies\"","webpack://@adobe/aem-core-cif-react-components/./src/components/Mask/mask.css?131d","webpack://@adobe/aem-core-cif-react-components/./src/components/Trigger/trigger.css?9fb6","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/body.css?2c7f","webpack://@adobe/aem-core-cif-react-components/./src/components/Icon/icon.css?a4ea","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/productList.css?a0f5","webpack://@adobe/aem-core-cif-react-components/./src/components/Select/select.css?7f63","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/cart.css?02f1","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressForm/addressSelect.css?7647","webpack://@adobe/aem-core-cif-react-components/./src/components/TextInput/textInput.css?59c7","webpack://@adobe/aem-core-cif-react-components/external \"braintree-web-drop-in\"","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/flow.css?bb81","webpack://@adobe/aem-core-cif-react-components/./src/components/AuthBar/authBar.css?dcef","webpack://@adobe/aem-core-cif-react-components/./src/components/MyAccount/accountLink.css?d697","webpack://@adobe/aem-core-cif-react-components/./src/components/ForgotPassword/forgotPasswordForm.css?4d8f","webpack://@adobe/aem-core-cif-react-components/./src/components/ForgotPassword/formSubmissionSuccessful.css?259f","webpack://@adobe/aem-core-cif-react-components/./src/components/CreateAccount/createAccount.css?4c38","webpack://@adobe/aem-core-cif-react-components/./src/components/AuthBar/myAccountPanel.css?0190","webpack://@adobe/aem-core-cif-react-components/./src/components/CartTrigger/cartCounter.css?a0ef","webpack://@adobe/aem-core-cif-react-components/./src/components/CartTrigger/cartTrigger.css?9156","webpack://@adobe/aem-core-cif-react-components/external \"react-dom\"","webpack://@adobe/aem-core-cif-react-components/./src/components/FormError/formError.css?695d","webpack://@adobe/aem-core-cif-react-components/./src/components/LinkButton/linkButton.css?1a94","webpack://@adobe/aem-core-cif-react-components/./src/components/Password/password.css?6a54","webpack://@adobe/aem-core-cif-react-components/external \"@magento/peregrine/lib/context/cart\"","webpack://@adobe/aem-core-cif-react-components/external \"@magento/peregrine/lib/talons/Wishlist/AddToListButton/addToListButton.gql\"","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_create_guest_cart.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_add_to_cart.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/query_cart_details.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_add_virtual_to_cart.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_add_simple_and_virtual_to_cart.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_add_bundle_to_cart.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/mergeClasses.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Mask/mask.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Mask/index.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/cookieUtils.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/dataLayerUtils.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/query_countries.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/hooks.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/cartContext.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/header.js","webpack://@adobe/aem-core-cif-react-components/./src/components/LoadingIndicator/indicator.js","webpack://@adobe/aem-core-cif-react-components/./src/components/LoadingIndicator/static.js","webpack://@adobe/aem-core-cif-react-components/./src/components/LoadingIndicator/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Trigger/trigger.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Trigger/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/emptyMinicartBody.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Price/price.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Price/index.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/transparentPlaceholder.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/makeUrl.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Icon/icon.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Icon/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/kebab.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/section.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_remove_item.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/parseError.js","webpack://@adobe/aem-core-cif-react-components/./src/actions/cart/actions.js","webpack://@adobe/aem-core-cif-react-components/./src/actions/cart/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/useProduct.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/product.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/productList.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Button/button.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Button/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Field/field.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Field/fieldIcons.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Field/message.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Field/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Select/select.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Select/index.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_update_cart_item.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/useCartOptions.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/cartOptions.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/error.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_add_coupon.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/useCouponForm.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/couponForm.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_remove_coupon.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/useCouponItem.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/couponItem.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/discountList.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/body.js","webpack://@adobe/aem-core-cif-react-components/./src/actions/user/actions.js","webpack://@adobe/aem-core-cif-react-components/./src/actions/user/index.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_delete_customer_address.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_revoke_customer_token.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/query_customer_details.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/context/UserContext.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_update_customer_address.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_create_customer_address.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressForm/useAddressForm.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/checkoutContext.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_set_shipping_address.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/useCart.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/checkoutButton.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/cart.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/paymentMethodSummary.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/shippingAddressSummary.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/shippingMethodSummary.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/section.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_place_order.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/query_customer_cart.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/useOverview.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/overview.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/formValidators.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/combineValidators.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressForm/useAddressSelect.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressForm/addressSelect.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkbox/checkbox.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkbox/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/TextInput/textInput.js","webpack://@adobe/aem-core-cif-react-components/./src/components/TextInput/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressForm/addressForm.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressForm/index.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_create_braintree_client_token.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/paymentProviders/braintree.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/paymentProviders/nonceValidation.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/paymentProviders/paymentProvider.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/paymentsForm.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/shippingForm.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_set_payment_method.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_set_braintree_payment_method.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_set_billing_address.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_set_shipping_method.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_set_guest_email_on_cart.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/editableForm.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/form.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/useReceipt.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/receipt.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/flow.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Checkout/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/totalsSummary.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/footer.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/useMinicart.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/minicart.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/cartInitializer.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Minicart/index.js","webpack://@adobe/aem-core-cif-react-components/./src/context/ConfigContext.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/localStorageUtils.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/authUtils.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/compressQueryFetch.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/useCustomUrlEvent.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/useReferrerEvent.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/useViewedOffsets.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/usePageEvent.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/useDataLayerEvents.js","webpack://@adobe/aem-core-cif-react-components/./src/components/App/app.js","webpack://@adobe/aem-core-cif-react-components/./src/components/App/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AuthBar/userChip.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AuthBar/authBar.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_merge_carts.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_generate_token.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/components/SignIn/useSignin.js","webpack://@adobe/aem-core-cif-react-components/./src/components/SignIn/signIn.js","webpack://@adobe/aem-core-cif-react-components/./src/components/SignIn/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/MyAccount/accountLink.js","webpack://@adobe/aem-core-cif-react-components/./src/components/MyAccount/AccountLinks/signOutLink.js","webpack://@adobe/aem-core-cif-react-components/./src/components/MyAccount/AccountLinks/accountInfoLink.js","webpack://@adobe/aem-core-cif-react-components/./src/components/MyAccount/AccountLinks/addressBookLink.js","webpack://@adobe/aem-core-cif-react-components/./src/components/MyAccount/AccountLinks/changePasswordLink.js","webpack://@adobe/aem-core-cif-react-components/./src/components/MyAccount/AccountLinks/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/MyAccount/myAccount.js","webpack://@adobe/aem-core-cif-react-components/./src/components/MyAccount/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/ForgotPassword/forgotPasswordForm.js","webpack://@adobe/aem-core-cif-react-components/./src/components/ForgotPassword/formSubmissionSuccessful.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_request_password_reset_email.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/components/ForgotPassword/useForgotPassword.js","webpack://@adobe/aem-core-cif-react-components/./src/components/ForgotPassword/forgotPassword.js","webpack://@adobe/aem-core-cif-react-components/./src/components/ForgotPassword/index.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_create_customer.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/components/CreateAccount/useCreateAccount.js","webpack://@adobe/aem-core-cif-react-components/./src/components/CreateAccount/createAccount.js","webpack://@adobe/aem-core-cif-react-components/./src/components/CreateAccount/createAccountSuccess.js","webpack://@adobe/aem-core-cif-react-components/./src/components/CreateAccount/index.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_change_password.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/components/ChangePassword/changePassword.js","webpack://@adobe/aem-core-cif-react-components/./src/components/ChangePassword/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AuthBar/myAccountPanel.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AuthBar/useNavigationState.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AuthBar/container.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AuthBar/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/CartTrigger/cartCounter.js","webpack://@adobe/aem-core-cif-react-components/./src/components/CartTrigger/cartTrigger.js","webpack://@adobe/aem-core-cif-react-components/./src/components/CartTrigger/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AccountContainer/accountTrigger.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AccountContainer/accountDropdown.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AccountContainer/accountContainer.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AccountContainer/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressBook/addressDeleteModal.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressBook/addressItem.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressBook/addAddressButton.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressBook/addressItemsContainer.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressBook/addressFormContainer.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressBook/addressBook.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AddressBook/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/BundleProductOptions/checkbox.js","webpack://@adobe/aem-core-cif-react-components/./src/components/BundleProductOptions/radio.js","webpack://@adobe/aem-core-cif-react-components/./src/components/BundleProductOptions/select.js","webpack://@adobe/aem-core-cif-react-components/./src/components/BundleProductOptions/multiSelect.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/query_bundle_product.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/components/BundleProductOptions/bundleProductOptions.js","webpack://@adobe/aem-core-cif-react-components/./src/components/BundleProductOptions/index.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/query_gift_card_product.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/components/GiftCardOptions/useGiftCardOptions.js","webpack://@adobe/aem-core-cif-react-components/./src/components/GiftCardOptions/giftCardOptions.js","webpack://@adobe/aem-core-cif-react-components/./src/components/GiftCardOptions/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Portal/Portal.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Portal/index.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/useEditorEvents.js","webpack://@adobe/aem-core-cif-react-components/./src/components/PortalPlacer/PortalPlacer.js","webpack://@adobe/aem-core-cif-react-components/./src/components/PortalPlacer/index.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_reset_password.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/components/ResetPassword/useResetPassword.js","webpack://@adobe/aem-core-cif-react-components/./src/components/ResetPassword/ResetPassword.js","webpack://@adobe/aem-core-cif-react-components/./src/components/ResetPassword/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AccountDetails/useAccountDetails.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/query_get_customer_information.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_update_customer_information.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Dialog/dialog.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Dialog/index.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/deriveErrorMessage.js","webpack://@adobe/aem-core-cif-react-components/./src/components/FormError/formError.js","webpack://@adobe/aem-core-cif-react-components/./src/components/FormError/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/LinkButton/linkButton.js","webpack://@adobe/aem-core-cif-react-components/./src/components/LinkButton/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Password/usePassword.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Password/password.js","webpack://@adobe/aem-core-cif-react-components/./src/components/Password/index.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AccountDetails/editForm.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AccountDetails/editModal.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AccountDetails/accountDetails.js","webpack://@adobe/aem-core-cif-react-components/./src/components/AccountDetails/index.js","webpack://@adobe/aem-core-cif-react-components/./src/utils/createProductPageUrl.js","webpack://@adobe/aem-core-cif-react-components/./src/queries/mutation_add_items_to_cart.graphql.js","webpack://@adobe/aem-core-cif-react-components/./src/talons/Cart/useAddToCart.js","webpack://@adobe/aem-core-cif-react-components/./src/talons/Cart/useAddToCartEvent.js","webpack://@adobe/aem-core-cif-react-components/./src/talons/Cart/index.js","webpack://@adobe/aem-core-cif-react-components/./src/talons/Wishlist/useAddToWishlistEvent.js","webpack://@adobe/aem-core-cif-react-components/./src/talons/Wishlist/index.js","webpack://@adobe/aem-core-cif-react-components/./src/index.js"],"names":["gql","MiniCartFragment","args","Object","assign","Mask","onClickHandler","isOpen","customClasses","classes","mergeClasses","defaultClasses","className","root_active","root","propTypes","shape","string","func","isRequired","bool","checkCookie","cookieName","document","cookie","split","filter","item","trim","startsWith","length","cookieValue","b","match","pop","dataLayerEnabled","dataLayer","isDataLayerEnabled","body","hasAttribute","getDataLayer","window","adobeDataLayer","undefined","generateDataLayerId","prefix","idData","separator","msgUint8","TextEncoder","encode","hashBuffer","crypto","subtle","digest","hashArray","Array","from","Uint8Array","hashHex","map","toString","padStart","join","substring","pushData","data","push","pushEvent","eventName","eventInfo","extraData","event","getState","reference","addEventListener","handler","removeEventListener","transformGraphqlResponse","o","result","entries","forEach","key","value","isArray","toCamel","s","replace","group","toUpperCase","transformCart","cart","newCart","id","prices","totalQuantity","subtotalExcludingTax","subtotalIncludingTax","items","price","currency","canApplyMsrp","uid","formattedPrice","quantity","product","productId","name","sku","e","console","error","useEventListener","target","type","listener","rest","useEffect","useCookieValue","setCookieValue","age","cookieSettings","location","hostname","useCountries","useQuery","QUERY_COUNTRIES","countries","useAwaitQuery","query","apolloClient","useApolloClient","useCallback","options","useQueryParams","URLSearchParams","search","useStorefrontEvents","magentoStorefrontEvents","usePageType","PageTypes","CMS","CATEGORY","PRODUCT","CART","CHECKOUT","PAGE_BUILDER","template","querySelector","getAttribute","canonicalUrl","storeRootUrl","storeConfig","JSON","parse","err","endsWith","initialState","isRegistered","isEditing","isLoading","editItem","cartId","errorMessage","couponError","reducerFactory","setCartCookie","mse","state","action","context","setShoppingCart","applied_coupon","CartContext","createContext","CartProvider","props","factory","contextValue","useReducer","children","object","useCartState","useContext","Header","dispatch","intl","useIntl","title","formatMessage","defaultMessage","LoadingIndicator","global","indicator","message","node","staticIndicator","Trigger","EmptyMinicartBody","emptyTitle","continue","Price","currencyCode","formatNumber","style","number","defaultProps","transparentPlaceholder","htmlDataset","dataset","imageOptimizingOrigin","mediaBackend","warn","useBackendForImgs","absoluteUrl","joinUrls","base","url","slice","mediaBases","Map","set","makeOptimizedUrl","path","width","height","origin","isAbsolute","test","baseURL","URL","has","mediaBase","get","pathname","includes","href","params","Icon","attrs","restAttrs","size","src","IconComponent","oneOfType","render","Kebab","open","useState","kebabRef","useRef","handleOutsideKebabClick","current","contains","handleKebabClick","toggleClass","dropdown_active","dropdown","kebab","MoreVertical","defaultIconAttributes","color","filledIconAttributes","fill","icons","Heart","Edit2","Trash","Section","icon","isFilled","onClick","text","attributes","iconSrc","menuItem","oneOf","keys","networkError","graphQLErrors","stringify","addItemToCart","payload","createCartMutation","cartDetailsQuery","addToCartMutation","physicalCartItems","virtualCartItems","bundleCartItems","newCartData","createEmptyCart","variables","cartItems","simpleCartItems","getCartDetails","fetchPolicy","Error","removeItemFromCart","removeItemMutation","itemUid","removeCoupon","couponCode","removeCouponMutation","parseError","addCoupon","addCouponMutation","mergeCarts","mergeCartsMutation","customerCartId","sourceCartId","destinationCartId","updateCartItem","updateCartItemMutation","cartItemUid","itemQuantity","useMutation","MUTATION_REMOVE_ITEM","CART_DETAILS_QUERY","removeItem","publish","removeFromCart","dataLayerUtils","imageWidth","imageHeight","Product","bundle_options","thumbnail","__typename","useProduct","row_total","productImage","useMemo","makeUrl","image","handleRemoveItem","bundleOptions","bundleOptionTitle","label","values","v","bundleOptionValue","quantityRow","quantityOperator","rowTotalRow","rowTotal","ProductList","array","getRootClassName","priority","Button","restProps","rootClassName","content","Field","required","htmlFor","requiredSymbol","FieldIcons","after","before","input","Message","fieldState","asyncError","root_error","arrow","ChevronDownIcon","Select","field","arrayOf","asField","useCartOptions","updateCart","newQuantity","api","CartOptions","MUTATION_UPDATE_CART_ITEM","initialQuantity","setQuantity","mockQtys","handleUpdateClick","handleOnChange","newVal","parseInt","focusItem","form","quantityTitle","save","MUTATION_ADD_COUPON","addCouponToCart","CouponForm","useCouponForm","setCouponCode","addCouponHandler","errorFragment","MUTATION_REMOVE_COUPON","appliedCoupon","code","removeCouponFromCart","CouponItem","useCouponItem","couponName","DiscountList","_renderDiscounts","discounts","discount","amount","CartLoadingIndicator","Body","isEmpty","couponFragment","discountFragment","resetCustomerCart","fetchCustomerCartQuery","customerCart","signOutUser","revokeCustomerToken","setUserCookie","createAddress","createCustomerAddress","resetFields","address","updateAddress","updateCustomerAddress","deleteAddress","deleteCustomerAddress","UserContext","React","inProgress","currentUser","userDetails","isSignedIn","token","signInError","addressFormError","addresses","isShowAddressForm","deleteAddressError","createAccountError","createAccountEmail","accountEmail","firstname","lastname","email","accountDropdownView","isAccountDropdownOpen","toggle","view","UserContextProvider","userCookie","isSignedInFunc","MUTATION_DELETE_CUSTOMER_ADDRESS","MUTATION_REVOKE_TOKEN","fetchCustomerDetails","QUERY_CUSTOMER_DETAILS","updateAddressError","userState","storage","BrowserPersistence","setShopper","shopperId","user","setToken","signIn","setItem","setError","setCustomerCart","signOut","clearCartId","signOutUserAction","resetCustomerCartAction","getUserDetails","customerData","customer","toggleAccountDropdown","showSignIn","showMyAccount","showForgotPassword","showCreateAccount","showAccountCreated","showChangePassword","deleteAddressAction","useUserContext","useAddressForm","setInProgress","MUTATION_CREATE_CUSTOMER_ADDRESS","MUTATION_UPDATE_CUSTOMER_ADDRESS","findSavedAddress","find","isSameAddress","getNewAddress","city","postcode","region_code","save_in_address_book","street0","telephone","getRegionCode","region","getRegionId","countryCode","regionCode","country","available_regions","handleSubmit","formValues","region_id","country_code","default_billing","default_shipping","handleCancel","address1","address2","street","parseAddress","parseAddressFormValues","fields","reduce","acc","i","initialCheckoutState","flowState","order","editing","shippingAddress","billingAddress","billingAddressSameAsShippingAddress","isEditingNewAddress","shippingMethod","paymentMethod","braintreeToken","checkoutReducer","same","CheckoutContext","CheckoutProvider","reducer","useCheckoutState","cartDispatch","setShippingAddressesOnCart","MUTATION_SET_SHIPPING_ADDRESS","beginCheckout","shipping_addresses","is_virtual","billing_address","cartShippingAddress","cartBillingAddress","addressVariables","initiateCheckout","CheckoutButton","disabled","LockIcon","Cart","ready","submitting","useCart","PaymentMethodSummary","informationPrompt","paymentDisplayPrimary","paymentDisplaySecondary","description","ShippingAddressSummary","ShippingMethodSummary","carrier_title","editIconAttrs","EDIT_ICON","EditIcon","showEditIcon","summary","checkoutDispatch","QUERY_CUSTOMER_CART","placeOrder","MUTATION_PLACE_ORDER","editShippingAddress","editBillingInformation","submitOrder","order_id","subtotal_excluding_tax","subtotal_including_tax","grand_total","priceTotal","selected_payment_method","paymentCode","paymentName","Promise","all","setOrder","appliedCouponCode","grandTotal","orderId","otherTax","paymentMethodCode","paymentMethodName","salesTax","Overview","useOverview","footer","SUCCESS","hasLengthAtLeast","minimumLength","hasLengthAtMost","maximumLength","hasLengthExactly","validateEmail","regex","validateRegionCode","selectedCountry","lengthValidation","regions","validatePassword","count","lower","upper","digit","special","char","Boolean","validateConfirmPassword","passwordKey","isNotEqualToField","otherField","callbacks","callback","extendedCallback","extendedParam","useAddressSelect","initialAddress","parseInitialAddressSelectValue","initialValue","foundAddress","initialAddressId","selectedAddressId","setSelectedAddressId","addressSelectNewAddressItem","addressSelectItems","unshift","handleChangeAddressSelectInCheckout","addressFormApi","newAddressItemValue","setValues","parsedAddress","parsedFormValues","AddressSelect","onValueChange","Checkbox","checked","CheckIcon","TextInput","AddressForm","setIsSubmitting","cancel","formErrorMessage","formHeading","isAddressInvalid","invalidAddressMessage","initialAddressSelectValue","initialValues","onAddressSelectValueChange","showAddressSelect","showDefaultAddressCheckbox","showEmailInput","showSaveInAddressBookCheckbox","submit","submitButtonLabel","validationMessage","displayCountries","Regions","useFieldState","uniqueRegions","Set","displayRegions","entry","formApi","heading","address_select","combine","setValue","validation","button","CONTAINER_ID","Braintree","dropinInstance","setDropinInstance","paymentMethodRequestable","setPaymentMethodRequestable","paymentNonceField","useFieldApi","createBraintreeClientToken","braintreeTokenData","braintreeTokenError","CREATE_BRAINTREE_CLIENT_TOKEN","createDropinInstance","teardown","paypal","accept","flow","card","cardholderName","overrides","maskInput","showLastFour","braintreeDropIn","dropIn","create","authorization","container","on","requestPaymentMethod","then","paymentNonce","nonce","catch","payment_method","PaymentProvider","formState","useFormState","child","braintree","nonceValidation","errors","payment_nonce","error_message","PaymentsForm","allowSame","initialPaymentMethod","paymentMethods","isSubmitting","anchorRef","paymentMethodsItems","initialPaymentMethodState","initialFormValues","addresses_same","differentAddress","setDifferentAddress","sameAsShippingAddress","billingAddressFields","element","HTMLElement","scrollIntoView","behavior","getError","resetField","address_check","ev","ShippingForm","availableShippingMethods","selectableShippingMethods","method","carrier_code","selectedShippingMethod","EditableForm","countriesError","setBraintreePaymentMethodOnCart","MUTATION_SET_BRAINTREE_PAYMENT_METHOD","setPaymentMethodOnCart","MUTATION_SET_PAYMENT_METHOD","setBillingAddressOnCart","MUTATION_SET_BILLING_ADDRESS","setShippingMethodsOnCart","shippingMethodsResult","shippingMethodsError","MUTATION_SET_SHIPPING_METHOD","setGuestEmailOnCart","MUTATION_SET_GUEST_EMAIL_ON_CART","errorObj","handleSubmitAddressForm","handleSubmitPaymentsForm","billingAddressValues","paymentResult","handleSubmitShippingForm","selected_shipping_method","hasSavedAddresses","billingAddressSelectInitialValue","available_payment_methods","available_shipping_methods","Form","continueShopping","Receipt","useReceipt","header","textBlock","isCartReady","Flow","TotalsSummary","numItems","subtotal","subtotalDiscount","hasSubtotal","hasDiscount","totals","subtotalLabel","discounted","subtotalValue","totalsDiscount","Footer","footerClassName","root_open","totalsSummary","total_quantity","subtotal_with_discount_excluding_tax","productMapper","parseFloat","bundledProductMapper","queries","addVirtualItemMutation","addBundleItemMutation","addSimpleAndVirtualItemMutation","fn","refreshCart","addItem","detail","virtual","bundle","addItemFn","addToCart","MiniCart","MUTATION_CREATE_CART","MUTATION_ADD_TO_CART","MUTATION_ADD_VIRTUAL_TO_CART","MUTATION_ADD_SIMPLE_AND_VIRTUAL_TO_CART","MUTATION_ADD_BUNDLE_TO_CART","QUERY_CART_DETAILS","useMinicart","rootClass","showFooter","CartInitializer","stateCartId","registeredCartId","CART_COOKIE","ConfigContext","ConfigContextProvider","config","PropTypes","storeView","headers","graphqlEndpoint","graphqlMethod","mountingPoints","accountContainer","addressBookContainer","authBarContainer","cartTrigger","minicart","navPanel","bundleProductOptionsContainer","giftCardProductOptionsContainer","accountDetails","resetPasswordPage","productRecs","cartDetailsContainer","checkoutPageContainer","pagePaths","addressBook","baseUrl","cartDetails","resetPassword","checkoutPage","useConfigContext","localStorage","checkItem","itemKey","getItem","getPlainItem","getJsonItem","SIGN_IN_TOKEN_KEY","KEY","getAuthToken","singInTokenJson","timestamp","Date","getTime","timeStored","ttl","authLink","ApolloLink","operation","forward","setContext","parts","stripIgnoredCharacters","bodyJson","fetch","useCustomUrlEvent","customUrl","setCustomUrl","useReferrerEvent","referrer","setReferrerUrl","referrerUrl","documentScrollTop","scrollTop","documentElement","documentScrollLeft","scrollLeft","useViewedOffsets","minXOffset","maxXOffset","minYOffset","maxYOffset","onResizeOrScroll","currentXOffset","currentYOffset","Math","min","max","innerWidth","innerHeight","usePageEvent","pageType","sendPageEvent","eventType","ping_interval","pings","setPage","pageView","useDataLayerEvents","App","clientHeaders","clientConfig","link","graphqlAuthLink","HttpLink","uri","useGETForQueries","compressQueryFetch","cache","InMemoryCache","typePolicies","client","ApolloClient","UserChip","display","avatar","UserIcon","fullName","ChevronRightIcon","AuthBar","useSignin","MUTATION_MERGE_CARTS","fetchCustomerCart","generateCustomerToken","MUTATION_GENERATE_TOKEN","refreshPage","reload","password","customerCartData","mergedCartId","retrieveCartId","saveCartId","SignIn","formTitle","forgotPasswordButton","signInButton","createAccountButton","AccountLink","handleClick","root_normalPriority","SignOutLink","showMenu","handleSignOut","redirectBacktoStorefront","AccountInfoLink","showAccountInformation","AddressBookLink","ChangePasswordLink","MyAccount","modal_active","accountLinks","subtitle","actions","ForgotPasswordForm","handleFormSubmit","buttonContainer","FormSubmissionSuccessful","onContinue","useForgotPasswordForm","setState","loading","submitted","requestPasswordResetEmail","MUTATION_REQUEST_PASSWORD_RESET_EMAIL","ForgotPassword","onClose","onCancel","useForgotPassword","instructions","createCustomer","MUTATION_CREATE_CUSTOMER","handleCreateAccount","createAccount","CreateAccount","useCreateAccount","lead","subscribe","CreateAccountSuccess","handleSignIn","signin","ChangePassword","doChangePassword","MUTATION_CHANGE_PASSWORD","currentPassword","oldPassword","newPassword","AuthModal","handleBack","events","START_ACC_MANAGEMENT","EXIT_ACC_MANAGEMENT","ancestors","CREATE_ACCOUNT","FORGOT_PASSWORD","ACCOUNT_CREATED","MY_ACCOUNT","CHANGE_PASSWORD","SIGN_IN","MENU","stepTitles","startAccMgEvent","CustomEvent","exitAccMgEvent","useNavigationState","currentView","setCurrentView","navigationPanel","triggerNavigationEvent","triggerEvent","dispatchEvent","parent","switchTo","Container","hasModal","modalClassName","modal_open","modal","CartCounter","counter","cartQuantity","iconColor","svgAttributes","stroke","ShoppingCartIcon","AccountTrigger","AccountDropdown","mask_active","AccountContainer","AddressDeleteModal","delete","AddressItem","displayType","cityRegion","editButton","deleteButton","defaultTag","AddAddressButton","AddressItems","AddressFormContainer","mask","AddressBook","customization","handleSelectionChange","onChange","newCustomization","c","option_id","findIndex","Radio","can_change_quantity","onQuantityChange","MultiSelect","selected","BundleProductOptions","bundleProductQuery","BUNDLE_PRODUCT_QUERY","bundleState","setBundleState","showAddToWishList","fetchBundleDetails","products","selections","is_default","sort","a","position","option","price_range","maximum_price","final_price","selectionIndex","selection","splice","changeBundleQuantity","renderItemOptions","otherProps","canAddToCart","productData","customEvent","addToWishlist","selected_options","btoa","getTotalPrice","OPEN_AMOUNT","useGiftCardOptions","giftCardState","setGiftCardState","giftCardProductQuery","GIFT_CARD_PRODUCT_QUERY","fetchGiftCardOptions","giftCardOptions","giftCardValues","open_amount","giftcard_amounts","custom_amount","open_amount_min","custom_amount_uid","gift_card_options","toLowerCase","selected_amount","entered_options","prev","curr","changeAmountSelection","changeCustomAmount","changeOptionValue","changeQuantity","open_amount_max","fround","giftCard","messages","defineMessages","amountSelectionLabel","chooseAmount","otherAmount","customAmountLabel","customPriceMinimum","customPriceMaximum","GiftCartOptions","allow_open_amount","withSuspense","Component","WithSuspense","displayName","Portal","selector","elem","ReactDOM","createPortal","instanceOf","useEditorEvents","wcmmode","onMessage","msg","cmd","PortalPlacer","component","Cmp","elems","querySelectorAll","index","hostElement","useResetPassword","status","setStatus","MUTATION_RESET_PASSWORD","resetPasswordToken","ResetPassword","queryParams","onSubmit","useAccountDetails","getCustomerInformationQuery","setCustomerInformationMutation","changeCustomerPasswordMutation","isUpdateMode","setIsUpdateMode","shouldShowNewPasswordField","setShowNewPassword","displayError","setDisplayError","accountInformationData","skip","nextFetchPolicy","setCustomerInformation","isUpdatingCustomer","customerInformationUpdateError","refetchQueries","changeCustomerPassword","isChangingCustomerPassword","changePasswordError","showEditForm","handleShowNewPasswordField","formErrors","isDisabled","Dialog","cancelText","confirmText","formProps","isModal","onConfirm","shouldDisableAllButtons","shouldDisableConfirmButton","rootContainerSelector","isMaskDisabled","confirmButtonDisabled","confirmButtonClasses","root_highPriority","confirmButton","maybeCloseXButton","headerButton","CloseIcon","dialog","headerText","contents","buttons","cancelButton","deriveErrorMessage","errorCollection","FormError","propClasses","scrollOnError","errorRef","block","LinkButton","visible","setVisbility","togglePasswordVisibility","Password","fieldName","isToggleButtonHidden","autoComplete","validate","talonProps","usePassword","passwordButton","fieldType","EditForm","shouldShowNewPassword","maybeShowChangePasswordButton","changePasswordButtonContainer","changePasswordButton","maybeShowNewPasswordField","passwordLabel","useFormApi","submits","invalid","EditModal","onChangePassword","rootSelector","dialogFormProps","AccountDetails","GET_CUSTOMER_INFORMATION","UPDATE_CUSTOMER_INFORMATION","CHANGE_CUSTOMER_PASSWORD","messageText","lineItems","lineItemLabel","lineItemValue","lineItemButton","editInformationButton","createProductPageUrl","storeConfigEl","substr","lastIndexOf","defaultOperations","addPhysicalProductItemsMutation","addBundledProductItemsMutation","addVirtualProductItemsMutation","addGiftCardProductItemsMutation","MUTATION_ADD_GIFT_CARD_TO_CART","addPhysicalAndVirtualProductItemsMutation","useAddToCart","operations","mergeOperations","addPhysicalProductItems","addBundledProductItems","addVirtualProductItems","addGiftCardProductItems","addPhysicalAndVirtualProductItems","useCartContext","giftCardProductMapper","useAddToCartEvent","fallbackHandler","defaultAddToCartApi","addToCartApi","giftCardCartItems","parent_sku","useAddToWishlistEvent","addProductToWishlist","addProductToWishlistMutation","promises","wishlistId","itemOptions","responseEvent"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;AClFA,kC;;;;;;ACAA,uC;;;;;;ACAA,2C;;;;;;ACAA,uC;;;;;;ACAA,0C;;;;;;ACAA;AACA,kBAAkB,+hC;;;;;;ACDlB,qC;;;;;;ACAA;AACA,kBAAkB,m4B;;;;;;ACDlB;AACA,kBAAkB,2iB;;;;;;ACDlB;AACA,kBAAkB,gnB;;;;;;ACDlB;AACA,kBAAkB,0nB;;;;;;ACDlB;AACA,kBAAkB,ojB;;;;;;ACDlB,yF;;;;;;ACAA;AACA,kBAAkB,wf;;;;;;ACDlB;AACA,kBAAkB,2U;;;;;;ACDlB;AACA,kBAAkB,2P;;;;;;ACDlB;AACA,kBAAkB,uuB;;;;;;ACDlB;AACA,kBAAkB,+W;;;;;;ACDlB;AACA,kBAAkB,wR;;;;;;ACDlB;AACA,kBAAkB,2f;;;;;;ACDlB;AACA,kBAAkB,iI;;;;;;ACDlB;AACA,kBAAkB,mW;;;;;;ACDlB;AACA,kBAAkB,iW;;;;;;ACDlB;AACA,kBAAkB,wM;;;;;;ACDlB;AACA,kBAAkB,oS;;;;;;ACDlB,mF;;;;;;ACAA;AACA,kBAAkB,wS;;;;;;ACDlB;AACA,kBAAkB,2M;;;;;;ACDlB;AACA,kBAAkB,6J;;;;;;ACDlB;AACA,kBAAkB,6J;;;;;;ACDlB;AACA,kBAAkB,sJ;;;;;;ACDlB,0E;;;;;;ACAA,qE;;;;;;ACAA;AACA,kBAAkB,kK;;;;;;ACDlB;AACA,kBAAkB,yJ;;;;;;ACDlB;AACA,kBAAkB,iI;;;;;;ACDlB;AACA,kBAAkB,qR;;;;;;ACDlB;AACA,kBAAkB,oD;;;;;;ACDlB;AACA,kBAAkB,+T;;;;;;ACDlB;AACA,kBAAkB,2F;;;;;;ACDlB;AACA,kBAAkB,2E;;;;;;ACDlB;AACA,kBAAkB,mF;;;;;;ACDlB;AACA,kBAAkB,0Z;;;;;;ACDlB;AACA,kBAAkB,0G;;;;;;ACDlB;AACA,kBAAkB,2E;;;;;;ACDlB;AACA,kBAAkB,mF;;;;;;ACDlB;AACA,kBAAkB,6F;;;;;;ACDlB;AACA,kBAAkB,2Y;;;;;;ACDlB;AACA,kBAAkB,qO;;;;;;ACDlB;AACA,kBAAkB,4K;;;;;;ACDlB;AACA,kBAAkB,oH;;;;;;ACDlB,oC;;;;;;ACAA;AACA,kBAAkB,qH;;;;;;ACDlB;AACA,kBAAkB,md;;;;;;ACDlB;AACA,kBAAkB,2I;;;;;;ACDlB;AACA,kBAAkB,uD;;;;;;ACDlB,mE;;;;;;ACAA;AACA,kBAAkB,gG;;;;;;ACDlB;AACA,kBAAkB,qE;;;;;;ACDlB;AACA,kBAAkB,mC;;;;;;ACDlB;AACA,kBAAkB,+B;;;;;;ACDlB;AACA,kBAAkB,0C;;;;;;ACDlB;AACA,kBAAkB,qG;;;;;;ACDlB;AACA,kBAAkB,8D;;;;;;ACDlB;AACA,kBAAkB,+C;;;;;;ACDlB;AACA,kBAAkB,mE;;;;;;ACDlB,kD;;;;;;ACAA;AACA,kBAAkB,uL;;;;;;ACDlB;AACA,kBAAkB,qC;;;;;;ACDlB;AACA,kBAAkB,wR;;;;;;ACDlB;AACA,kBAAkB,mI;;;;;;ACDlB;AACA,kBAAkB,2M;;;;;;ACDlB;AACA,kBAAkB,6Y;;;;;;ACDlB;AACA,kBAAkB,4C;;;;;;ACDlB;AACA,kBAAkB,6C;;;;;;ACDlB;AACA,kBAAkB,6E;;;;;;ACDlB,sC;;;;;;ACAA;AACA,kBAAkB,yD;;;;;;ACDlB;AACA,kBAAkB,2E;;;;;;ACDlB;AACA,kBAAkB,0J;;;;;;ACDlB,gE;;;;;;ACAA,uG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEeA,qFAAI;AACnB;AACA;AACA;AACA,CAJA,E;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEeA,+EAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,0CAAiB;AACvB,CApBA,E;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEeD,6EAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAhIA,E;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEeA,uFAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,0CAAiB;AACvB,CApBA,E;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEeD,kGAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,0CAAiB;AACvB,CApBA,E;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEeD,sFAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,0CAAiB;AACvB,CAVA,E;;;;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,kDAAC,GAAGC,IAAJ,KAAaC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,GAAGF,IAArB,CAA5B,E;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;;AACA,MAAMG,IAAI,GAAG,CAAC;AAAEC,gBAAF;AAAkBC,QAAlB;AAA0BC;AAA1B,CAAD,KAA+C;AACxD,QAAMC,OAAO,GAAGC,YAAY,CAACC,cAAD,EAAiBH,aAAjB,CAA5B;AACA,QAAMI,SAAS,GAAGL,MAAM,GAAGE,OAAO,CAACI,WAAX,GAAyBJ,OAAO,CAACK,IAAzD;AAEA,sBAAO;AAAQ,iBAAU,MAAlB;AAAyB,aAAS,EAAEF,SAApC;AAA+C,WAAO,EAAEN;AAAxD,IAAP;A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,YAFJ;AAGIG,YAHJ;AAIIE,WAJJ;AAKID,mBALJ;AAMIK,kBANJ;AAOI3D,qBAPJ;AAQI8D,yBARJ;AASIC,cATJ;AAUIC,iBAVJ;AAWIC,sBAXJ;AAYIC,qBAZJ;AAaIC,sBAbJ;AAcIC,sBAdJ;AAeIxD;AAfJ,GAFiB,CAArB;AAoBA,sBAAO,uCAAC,WAAD,CAAa,QAAb;AAAsB,SAAK,EAAEtP;AAA7B,KAA4CE,QAA5C,CAAP;AACH,CAnJD;;AAqJA4Q,mBAAmB,CAAClb,SAApB,GAAgC;AAC5BuJ,gBAAc,EAAEpJ,4BADY;AAE5B4I,cAAY,EAAEwB,8BAAMA;AAFQ,CAAhC;AAIe2Q,2EAAf;AAEA;AACA;AACA;;AACO,MAAMkC,cAAc,GAAG,MAAM3S,qCAAU,CAACmP,WAAD,CAAvC,C;;AC5XP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEe3a,2FAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA/CA,E;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEeA,2FAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA7CA,E;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEexuB,sFAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAXA,E;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEeA,gGAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAnBA,E;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEeA,uFAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAzDA,E;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEeA,uFAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAjBA,E;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEeA,2FAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CARA,E;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"@adobe/aem-core-cif-react-components\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@adobe/aem-core-cif-react-components\"] = factory();\n\telse\n\t\troot[\"@adobe/aem-core-cif-react-components\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 82);\n","module.exports = require(\"react\");","module.exports = require(\"prop-types\");","module.exports = require(\"@apollo/client\");","module.exports = require(\"react-intl\");","module.exports = require(\"react-feather\");","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-AddressForm__addressForm__root\",\"heading\":\"cmp-AddressForm__addressForm__heading\",\"body\":\"cmp-AddressForm__addressForm__body\",\"enter\":\"cmp-AddressForm__addressForm__enter\",\"footer\":\"cmp-AddressForm__addressForm__footer\",\"button\":\"cmp-AddressForm__addressForm__button\",\"textInput\":\"cmp-AddressForm__addressForm__textInput\",\"city\":\"cmp-AddressForm__addressForm__city\",\"firstname\":\"cmp-AddressForm__addressForm__firstname\",\"lastname\":\"cmp-AddressForm__addressForm__lastname\",\"postcode\":\"cmp-AddressForm__addressForm__postcode\",\"region_code\":\"cmp-AddressForm__addressForm__region_code\",\"telephone\":\"cmp-AddressForm__addressForm__telephone\",\"address_select\":\"cmp-AddressForm__addressForm__address_select\",\"email\":\"cmp-AddressForm__addressForm__email\",\"street0\":\"cmp-AddressForm__addressForm__street0\",\"default_shipping\":\"cmp-AddressForm__addressForm__default_shipping\",\"save_in_address_book\":\"cmp-AddressForm__addressForm__save_in_address_book\",\"validation\":\"cmp-AddressForm__addressForm__validation\",\"error\":\"cmp-AddressForm__addressForm__error\"};","module.exports = require(\"informed\");","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Checkout__paymentsForm__root\",\"heading\":\"cmp-Checkout__paymentsForm__heading cmp-Checkout__flow__heading\",\"body\":\"cmp-Checkout__paymentsForm__body cmp-Checkout__flow__body\",\"footer\":\"cmp-Checkout__paymentsForm__footer cmp-Checkout__flow__footer\",\"button\":\"cmp-Checkout__paymentsForm__button\",\"textInput\":\"cmp-Checkout__paymentsForm__textInput\",\"city\":\"cmp-Checkout__paymentsForm__city\",\"postcode\":\"cmp-Checkout__paymentsForm__postcode\",\"region_code\":\"cmp-Checkout__paymentsForm__region_code\",\"address_check\":\"cmp-Checkout__paymentsForm__address_check\",\"address_select\":\"cmp-Checkout__paymentsForm__address_select\",\"email\":\"cmp-Checkout__paymentsForm__email\",\"braintree\":\"cmp-Checkout__paymentsForm__braintree\",\"save_in_address_book\":\"cmp-Checkout__paymentsForm__save_in_address_book\",\"street0\":\"cmp-Checkout__paymentsForm__street0\",\"validation\":\"cmp-Checkout__paymentsForm__validation\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-AddressBook__addressItem__root\",\"defaultTag\":\"cmp-AddressBook__addressItem__defaultTag\",\"name\":\"cmp-AddressBook__addressItem__name\",\"street\":\"cmp-AddressBook__addressItem__street\",\"cityRegion\":\"cmp-AddressBook__addressItem__cityRegion\",\"country\":\"cmp-AddressBook__addressItem__country\",\"actions\":\"cmp-AddressBook__addressItem__actions\",\"editButton\":\"cmp-AddressBook__addressItem__editButton\",\"deleteButton\":\"cmp-AddressBook__addressItem__deleteButton\",\"icon\":\"cmp-AddressBook__addressItem__icon\",\"label\":\"cmp-AddressBook__addressItem__label\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Minicart__product__root\",\"image\":\"cmp-Minicart__product__image\",\"name\":\"cmp-Minicart__product__name\",\"quantityRow\":\"cmp-Minicart__product__quantityRow\",\"quantity\":\"cmp-Minicart__product__quantity\",\"quantityOperator\":\"cmp-Minicart__product__quantityOperator\",\"price\":\"cmp-Minicart__product__price\",\"rowTotalRow\":\"cmp-Minicart__product__rowTotalRow\",\"rowTotal\":\"cmp-Minicart__product__rowTotal\",\"bundleOptions\":\"cmp-Minicart__product__bundleOptions\",\"bundleOptionTitle\":\"cmp-Minicart__product__bundleOptionTitle\",\"bundleOptionValue\":\"cmp-Minicart__product__bundleOptionValue\",\"mask\":\"cmp-Minicart__product__mask\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Dialog__dialog__root\",\"root_open\":\"cmp-Dialog__dialog__root_open cmp-Dialog__dialog__root\",\"form\":\"cmp-Dialog__dialog__form\",\"mask\":\"cmp-Dialog__dialog__mask\",\"dialog\":\"cmp-Dialog__dialog__dialog\",\"header\":\"cmp-Dialog__dialog__header\",\"headerText\":\"cmp-Dialog__dialog__headerText\",\"headerButton\":\"cmp-Dialog__dialog__headerButton\",\"body\":\"cmp-Dialog__dialog__body\",\"contents\":\"cmp-Dialog__dialog__contents\",\"buttons\":\"cmp-Dialog__dialog__buttons\",\"confirmButton\":\"cmp-Dialog__dialog__confirmButton cmp-Button__button__root_highPriority cmp-Button__button__root cmp-components__clickable__root cmp-Button__button__filled\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-AccountDetails__accountDetails__root\",\"lineItems\":\"cmp-AccountDetails__accountDetails__lineItems\",\"lineItemLabel\":\"cmp-AccountDetails__accountDetails__lineItemLabel\",\"editInformationButton\":\"cmp-AccountDetails__accountDetails__editInformationButton cmp-Button__button__root_normalPriority cmp-Button__button__root cmp-components__clickable__root\",\"messageText\":\"cmp-AccountDetails__accountDetails__messageText\",\"accountDetails\":\"cmp-AccountDetails__accountDetails__accountDetails\",\"lineItemButton\":\"cmp-AccountDetails__accountDetails__lineItemButton\"};","module.exports = require(\"@magento/peregrine/lib/talons/MiniCart/miniCartFragments.gql\");","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Minicart__cartOptions__root\",\"focusItem\":\"cmp-Minicart__cartOptions__focusItem\",\"name\":\"cmp-Minicart__cartOptions__name\",\"form\":\"cmp-Minicart__cartOptions__form\",\"modal\":\"cmp-Minicart__cartOptions__modal\",\"modal_active\":\"cmp-Minicart__cartOptions__modal_active cmp-Minicart__cartOptions__modal\",\"options\":\"cmp-Minicart__cartOptions__options\",\"quantity\":\"cmp-Minicart__cartOptions__quantity\",\"quantityTitle\":\"cmp-Minicart__cartOptions__quantityTitle\",\"save\":\"cmp-Minicart__cartOptions__save\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Minicart__totalsSummary__root\",\"subtotalLabel\":\"cmp-Minicart__totalsSummary__subtotalLabel\",\"subtotalValue\":\"cmp-Minicart__totalsSummary__subtotalValue\",\"totals\":\"cmp-Minicart__totalsSummary__totals\",\"discounted\":\"cmp-Minicart__totalsSummary__discounted\",\"totalsDiscount\":\"cmp-Minicart__totalsSummary__totalsDiscount\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-ResetPassword__ResetPassword__root\",\"fields\":\"cmp-ResetPassword__ResetPassword__fields\",\"lead\":\"cmp-ResetPassword__ResetPassword__lead\",\"submit\":\"cmp-ResetPassword__ResetPassword__submit\",\"error\":\"cmp-ResetPassword__ResetPassword__error\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-AccountDetails__editForm__root\",\"field\":\"cmp-AccountDetails__editForm__field\",\"email\":\"cmp-AccountDetails__editForm__email cmp-AccountDetails__editForm__field\",\"passwordLabel\":\"cmp-AccountDetails__editForm__passwordLabel cmp-AccountDetails__editForm__field\",\"buttons\":\"cmp-AccountDetails__editForm__buttons cmp-AccountDetails__editForm__field\",\"changePasswordButtonContainer\":\"cmp-AccountDetails__editForm__changePasswordButtonContainer\",\"changePasswordButton\":\"cmp-AccountDetails__editForm__changePasswordButton\",\"firstname\":\"cmp-AccountDetails__editForm__firstname\",\"lastname\":\"cmp-AccountDetails__editForm__lastname\",\"password\":\"cmp-AccountDetails__editForm__password\",\"newPassword\":\"cmp-AccountDetails__editForm__newPassword\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Checkout__shippingForm__root\",\"heading\":\"cmp-Checkout__shippingForm__heading cmp-Checkout__flow__heading\",\"body\":\"cmp-Checkout__shippingForm__body cmp-Checkout__flow__body\",\"footer\":\"cmp-Checkout__shippingForm__footer cmp-Checkout__flow__footer\",\"button\":\"cmp-Checkout__shippingForm__button\",\"shippingMethod\":\"cmp-Checkout__shippingForm__shippingMethod\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-AuthBar__userChip__root\",\"content\":\"cmp-AuthBar__userChip__content\",\"avatar\":\"cmp-AuthBar__userChip__avatar\",\"user\":\"cmp-AuthBar__userChip__user\",\"fullName\":\"cmp-AuthBar__userChip__fullName\",\"email\":\"cmp-AuthBar__userChip__email\",\"icon\":\"cmp-AuthBar__userChip__icon\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-SignIn__signIn__root\",\"forgotPassword\":\"cmp-SignIn__signIn__forgotPassword\",\"form\":\"cmp-SignIn__signIn__form\",\"formTitle\":\"cmp-SignIn__signIn__formTitle\",\"modal\":\"cmp-SignIn__signIn__modal\",\"modal_active\":\"cmp-SignIn__signIn__modal_active cmp-SignIn__signIn__modal\",\"createAccountButton\":\"cmp-SignIn__signIn__createAccountButton\",\"forgotPasswordButton\":\"cmp-SignIn__signIn__forgotPasswordButton\",\"signInButton\":\"cmp-SignIn__signIn__signInButton\",\"signInError\":\"cmp-SignIn__signIn__signInError\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-MyAccount__myAccount__root\",\"user\":\"cmp-MyAccount__myAccount__user\",\"subtitle\":\"cmp-MyAccount__myAccount__subtitle\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-CreateAccount__createAccountSuccess__root\",\"body\":\"cmp-CreateAccount__createAccountSuccess__body\",\"header\":\"cmp-CreateAccount__createAccountSuccess__header\",\"textBlock\":\"cmp-CreateAccount__createAccountSuccess__textBlock\",\"signin\":\"cmp-CreateAccount__createAccountSuccess__signin\",\"actions\":\"cmp-CreateAccount__createAccountSuccess__actions\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-ChangePassword__changePassword__root\",\"message\":\"cmp-ChangePassword__changePassword__message\",\"actions\":\"cmp-ChangePassword__changePassword__actions\",\"error\":\"cmp-ChangePassword__changePassword__error cmp-ChangePassword__changePassword__message\",\"lead\":\"cmp-ChangePassword__changePassword__lead cmp-ChangePassword__changePassword__message\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Checkout__section__root\",\"content\":\"cmp-Checkout__section__content\",\"label\":\"cmp-Checkout__section__label\",\"summary\":\"cmp-Checkout__section__summary\",\"icon\":\"cmp-Checkout__section__icon\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Checkout__receipt__root\",\"body\":\"cmp-Checkout__receipt__body\",\"footer\":\"cmp-Checkout__receipt__footer\",\"textBlock\":\"cmp-Checkout__receipt__textBlock\",\"orderId\":\"cmp-Checkout__receipt__orderId\",\"header\":\"cmp-Checkout__receipt__header\",\"continue\":\"cmp-Checkout__receipt__continue\"};","module.exports = require(\"@magento/peregrine/lib/store/actions/cart/asyncActions\");","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-LoadingIndicator__indicator__root\",\"global\":\"cmp-LoadingIndicator__indicator__global cmp-LoadingIndicator__indicator__root\",\"message\":\"cmp-LoadingIndicator__indicator__message\",\"indicator\":\"cmp-LoadingIndicator__indicator__indicator\",\"pulse\":\"cmp-LoadingIndicator__indicator__pulse\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Minicart__kebab__root\",\"dropdown\":\"cmp-Minicart__kebab__dropdown\",\"dropdown_active\":\"cmp-Minicart__kebab__dropdown_active cmp-Minicart__kebab__dropdown\",\"kebab\":\"cmp-Minicart__kebab__kebab\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Field__fieldIcons__root\",\"input\":\"cmp-Field__fieldIcons__input\",\"before\":\"cmp-Field__fieldIcons__before\",\"after\":\"cmp-Field__fieldIcons__after\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Checkbox__checkbox__root\",\"icon\":\"cmp-Checkbox__checkbox__icon\",\"input\":\"cmp-Checkbox__checkbox__input\",\"label\":\"cmp-Checkbox__checkbox__label\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-AddressBook__addAddressButton__root\",\"icon\":\"cmp-AddressBook__addAddressButton__icon\",\"label\":\"cmp-AddressBook__addAddressButton__label\"};","module.exports = require(\"@magento/peregrine/lib/util/simplePersistence\");","module.exports = require(\"@magento/peregrine/lib/util/shallowMerge\");","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Minicart__emptyMiniCartBody__root\",\"emptyTitle\":\"cmp-Minicart__emptyMiniCartBody__emptyTitle\",\"continue\":\"cmp-Minicart__emptyMiniCartBody__continue\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Field__field__root\",\"label\":\"cmp-Field__field__label\",\"input\":\"cmp-Field__field__input\",\"requiredSymbol\":\"cmp-Field__field__requiredSymbol\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Minicart__discountList__root\",\"item\":\"cmp-Minicart__discountList__item\",\"price\":\"cmp-Minicart__discountList__price\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-AccountContainer__accountDropdown__root\",\"root_open\":\"cmp-AccountContainer__accountDropdown__root_open cmp-AccountContainer__accountDropdown__root\",\"mask_active\":\"cmp-AccountContainer__accountDropdown__mask_active cmp-Mask__mask__root_active cmp-Mask__mask__root\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-AddressBook__addressDeleteModal__root\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mask\":\"cmp-AddressBook__addressFormContainer__mask cmp-Mask__mask__root\",\"mask_active\":\"cmp-AddressBook__addressFormContainer__mask_active cmp-AddressBook__addressFormContainer__mask cmp-Mask__mask__root cmp-Mask__mask__root_active cmp-Mask__mask__root\",\"container\":\"cmp-AddressBook__addressFormContainer__container\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-AddressBook__addressBook__root\",\"title\":\"cmp-AddressBook__addressBook__title\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Minicart__header__root\",\"title\":\"cmp-Minicart__header__title\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuItem\":\"cmp-Minicart__section__menuItem\",\"text\":\"cmp-Minicart__section__text\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Button__button__root cmp-components__clickable__root\",\"filled\":\"cmp-Button__button__filled\",\"content\":\"cmp-Button__button__content\",\"root_normalPriority\":\"cmp-Button__button__root_normalPriority cmp-Button__button__root cmp-components__clickable__root\",\"root_highPriority\":\"cmp-Button__button__root_highPriority cmp-Button__button__root cmp-components__clickable__root cmp-Button__button__filled\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Field__message__root\",\"root_error\":\"cmp-Field__message__root_error cmp-Field__message__root\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Minicart__error__root\",\"action\":\"cmp-Minicart__error__action\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Minicart__couponForm__root\",\"error\":\"cmp-Minicart__couponForm__error\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Minicart__couponItem__root\",\"couponName\":\"cmp-Minicart__couponItem__couponName\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Checkout__form__root\",\"body\":\"cmp-Checkout__form__body cmp-Checkout__flow__body\",\"footer\":\"cmp-Checkout__form__footer cmp-Checkout__flow__footer\",\"informationPrompt\":\"cmp-Checkout__form__informationPrompt\",\"paymentDisplayPrimary\":\"cmp-Checkout__form__paymentDisplayPrimary\",\"paymentDisplaySecondary\":\"cmp-Checkout__form__paymentDisplaySecondary\",\"enter\":\"cmp-Checkout__form__enter\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"braintree\":\"cmp-paymentProviders__paymentProvider__braintree cmp-Checkout__paymentsForm__braintree\",\"error_message\":\"cmp-paymentProviders__paymentProvider__error_message cmp-Field__message__root_error cmp-Field__message__root\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Minicart__footer__root\",\"root_open\":\"cmp-Minicart__footer__root_open cmp-Minicart__footer__root\",\"placeholderButton\":\"cmp-Minicart__footer__placeholderButton\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Minicart__minicart__root\",\"root_open\":\"cmp-Minicart__minicart__root_open cmp-Minicart__minicart__root\"};","module.exports = require(\"graphql\");","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-ForgotPassword__forgotPassword__root\",\"instructions\":\"cmp-ForgotPassword__forgotPassword__instructions\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"cmp-AuthBar__container__enter\",\"exit\":\"cmp-AuthBar__container__exit\",\"hidden\":\"cmp-AuthBar__container__hidden\",\"visible\":\"cmp-AuthBar__container__visible\",\"modal\":\"cmp-AuthBar__container__modal cmp-AuthBar__container__exit cmp-AuthBar__container__hidden\",\"modal_open\":\"cmp-AuthBar__container__modal_open cmp-AuthBar__container__modal cmp-AuthBar__container__exit cmp-AuthBar__container__hidden cmp-AuthBar__container__enter cmp-AuthBar__container__visible\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-AccountContainer__accountTrigger__root cmp-components__clickable__root\",\"label\":\"cmp-AccountContainer__accountTrigger__label\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-AddressBook__addressItemsContainer__root\"};","module.exports = require(\"@magento/peregrine/lib/Apollo/policies\");","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Mask__mask__root\",\"root_active\":\"cmp-Mask__mask__root_active cmp-Mask__mask__root\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Trigger__trigger__root cmp-components__clickable__root\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Minicart__body__root\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Icon__icon__root\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Minicart__productList__root\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"cmp-Select__select__wrapper\",\"input\":\"cmp-Select__select__input cmp-Field__field__input\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Checkout__cart__root cmp-Checkout__flow__footer\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-AddressForm__addressSelect__root\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"cmp-TextInput__textInput__input cmp-Field__field__input\"};","module.exports = require(\"braintree-web-drop-in\");","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-Checkout__flow__root\",\"heading\":\"cmp-Checkout__flow__heading\",\"body\":\"cmp-Checkout__flow__body\",\"enter\":\"cmp-Checkout__flow__enter\",\"footer\":\"cmp-Checkout__flow__footer\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-AuthBar__authBar__root\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-MyAccount__accountLink__root\",\"content\":\"cmp-MyAccount__accountLink__content\",\"icon\":\"cmp-MyAccount__accountLink__icon\",\"text\":\"cmp-MyAccount__accountLink__text\",\"root_normalPriority\":\"cmp-MyAccount__accountLink__root_normalPriority cmp-MyAccount__accountLink__root\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-ForgotPassword__forgotPasswordForm__root\",\"buttonContainer\":\"cmp-ForgotPassword__forgotPasswordForm__buttonContainer\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-ForgotPassword__formSubmissionSuccessful__root\",\"text\":\"cmp-ForgotPassword__formSubmissionSuccessful__text\",\"buttonContainer\":\"cmp-ForgotPassword__formSubmissionSuccessful__buttonContainer\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-CreateAccount__createAccount__root\",\"message\":\"cmp-CreateAccount__createAccount__message\",\"actions\":\"cmp-CreateAccount__createAccount__actions\",\"error\":\"cmp-CreateAccount__createAccount__error cmp-CreateAccount__createAccount__message\",\"lead\":\"cmp-CreateAccount__createAccount__lead cmp-CreateAccount__createAccount__message\",\"subscribe\":\"cmp-CreateAccount__createAccount__subscribe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-AuthBar__myAccountPanel__root\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-CartTrigger__cartCounter__root\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-CartTrigger__cartTrigger__root cmp-components__clickable__root\"};","module.exports = require(\"react-dom\");","// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorMessage\":\"cmp-FormError__formError__errorMessage\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"cmp-LinkButton__linkButton__root cmp-components__clickable__root\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"passwordButton\":\"cmp-Password__password__passwordButton cmp-Button__button__root cmp-components__clickable__root\",\"root\":\"cmp-Password__password__root\"};","module.exports = require(\"@magento/peregrine/lib/context/cart\");","module.exports = require(\"@magento/peregrine/lib/talons/Wishlist/AddToListButton/addToListButton.gql\");","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation {\n        createEmptyCart\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\nimport { MiniCartFragment } from '@magento/peregrine/lib/talons/MiniCart/miniCartFragments.gql';\n\nexport default gql`\n    mutation addSimpleProductToCart($cartId: String!, $cartItems: [SimpleProductCartItemInput]!) {\n        addSimpleProductsToCart(input: { cart_id: $cartId, cart_items: $cartItems }) {\n            cart {\n                id\n                items {\n                    uid\n                    quantity\n                    product {\n                        name\n                        thumbnail {\n                            url\n                        }\n                    }\n                }\n                ...MiniCartFragment\n            }\n        }\n    }\n    ${MiniCartFragment}\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    query cartDetails($cartId: String!) {\n        cart(cart_id: $cartId) {\n            id\n            is_virtual\n            prices {\n                discounts {\n                    amount {\n                        currency\n                        value\n                    }\n                    label\n                }\n                applied_taxes {\n                    amount {\n                        currency\n                        value\n                    }\n                    label\n                }\n                subtotal_with_discount_excluding_tax {\n                    currency\n                    value\n                }\n                subtotal_excluding_tax {\n                    currency\n                    value\n                }\n                subtotal_including_tax {\n                    currency\n                    value\n                }\n                grand_total {\n                    currency\n                    value\n                }\n            }\n            email\n            shipping_addresses {\n                city\n                company\n                country {\n                    code\n                }\n                firstname\n                lastname\n                postcode\n                region {\n                    code\n                }\n                street\n                telephone\n                available_shipping_methods {\n                    method_code\n                    method_title\n                    carrier_code\n                    carrier_title\n                }\n                selected_shipping_method {\n                    carrier_code\n                    carrier_title\n                    method_code\n                    method_title\n                }\n            }\n            available_payment_methods {\n                code\n                title\n            }\n            selected_payment_method {\n                code\n                title\n            }\n            billing_address {\n                city\n                country {\n                    code\n                }\n                lastname\n                firstname\n                region {\n                    code\n                }\n                street\n                postcode\n                telephone\n            }\n            applied_coupon {\n                code\n            }\n            total_quantity\n            items {\n                __typename\n                uid\n                quantity\n                prices {\n                    price {\n                        currency\n                        value\n                    }\n                    row_total {\n                        currency\n                        value\n                    }\n                }\n                product {\n                    name\n                    sku\n                    thumbnail {\n                        url\n                    }\n                }\n                ... on BundleCartItem {\n                    bundle_options {\n                        id\n                        label\n                        type\n                        values {\n                            id\n                            label\n                            price\n                            quantity\n                        }\n                    }\n                }\n            }\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\nimport { MiniCartFragment } from '@magento/peregrine/lib/talons/MiniCart/miniCartFragments.gql';\n\nexport default gql`\n    mutation($cartId: String!, $cartItems: [VirtualProductCartItemInput]!) {\n        addVirtualProductsToCart(input: { cart_id: $cartId, cart_items: $cartItems }) {\n            cart {\n                id\n                items {\n                    uid\n                    quantity\n                    product {\n                        name\n                        thumbnail {\n                            url\n                        }\n                    }\n                }\n                ...MiniCartFragment\n            }\n        }\n    }\n    ${MiniCartFragment}\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\nimport { MiniCartFragment } from '@magento/peregrine/lib/talons/MiniCart/miniCartFragments.gql';\n\nexport default gql`\n    mutation(\n        $cartId: String!\n        $virtualCartItems: [VirtualProductCartItemInput]!\n        $simpleCartItems: [SimpleProductCartItemInput]!\n    ) {\n        addSimpleProductsToCart(input: { cart_id: $cartId, cart_items: $simpleCartItems }) {\n            cart {\n                id\n                ...MiniCartFragment\n            }\n        }\n        addVirtualProductsToCart(input: { cart_id: $cartId, cart_items: $virtualCartItems }) {\n            cart {\n                id\n                ...MiniCartFragment\n            }\n        }\n    }\n    ${MiniCartFragment}\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\nimport { MiniCartFragment } from '@magento/peregrine/lib/talons/MiniCart/miniCartFragments.gql';\n\nexport default gql`\n    mutation addBundleProductToCart($cartId: String!, $cartItems: [BundleProductCartItemInput]!) {\n        addBundleProductsToCart(input: { cart_id: $cartId, cart_items: $cartItems }) {\n            cart {\n                id\n                ...MiniCartFragment\n            }\n        }\n    }\n    ${MiniCartFragment}\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport default (...args) => Object.assign({}, ...args);\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { shape, string, func, bool } from 'prop-types';\n\nimport defaultClasses from './mask.css';\nimport mergeClasses from '../../utils/mergeClasses';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Mask = ({ onClickHandler, isOpen, customClasses }) => {\n    const classes = mergeClasses(defaultClasses, customClasses);\n    const className = isOpen ? classes.root_active : classes.root;\n\n    return <button data-role=\"mask\" className={className} onClick={onClickHandler} />;\n};\n\nMask.propTypes = {\n    classes: shape({\n        root: string,\n        root_active: string\n    }),\n    onClickHandler: func.isRequired,\n    isOpen: bool,\n    customClasses: shape({\n        root: string,\n        root_active: string\n    })\n};\n\nexport default Mask;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './mask';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport const checkCookie = cookieName => {\n    return document.cookie.split(';').filter(item => item.trim().startsWith(`${cookieName}=`)).length > 0;\n};\n\nexport const cookieValue = cookieName => {\n    let b = document.cookie.match(`(^|[^;]+)\\\\s*${cookieName}\\\\s*=\\\\s*([^;]+)`);\n    return b ? b.pop() : '';\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nlet dataLayerEnabled = null;\nlet dataLayer = null;\n\nexport const isDataLayerEnabled = () => {\n    if (dataLayerEnabled === null) {\n        dataLayerEnabled = document.body.hasAttribute('data-cmp-data-layer-enabled');\n    }\n    return dataLayerEnabled;\n};\nconst getDataLayer = () => {\n    if (dataLayer === null) {\n        dataLayer = isDataLayerEnabled() ? (window.adobeDataLayer = window.adobeDataLayer || []) : undefined;\n    }\n    return dataLayer;\n};\n\nexport const generateDataLayerId = async (prefix, idData, separator = '-') => {\n    const msgUint8 = new TextEncoder().encode(idData); // encode as (utf-8) Uint8Array\n    const hashBuffer = await crypto.subtle.digest('SHA-256', msgUint8); // hash the message\n    const hashArray = Array.from(new Uint8Array(hashBuffer)); // convert buffer to byte array\n    const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join(''); // convert bytes to hex string\n    return prefix + separator + hashHex.substring(0, 10);\n};\n\n// https://github.com/adobe/adobe-client-data-layer/wiki#push\nexport const pushData = data => {\n    if (isDataLayerEnabled()) {\n        getDataLayer().push(data);\n    }\n};\n\n// https://github.com/adobe/adobe-client-data-layer/wiki#push\nexport const pushEvent = (eventName, eventInfo, extraData) => {\n    if (isDataLayerEnabled()) {\n        getDataLayer().push({\n            event: eventName,\n            eventInfo: eventInfo,\n            ...extraData\n        });\n    }\n};\n\n// https://github.com/adobe/adobe-client-data-layer/wiki#getstate\nexport const getState = reference => {\n    if (isDataLayerEnabled()) {\n        return getDataLayer().getState(reference);\n    }\n    return null;\n};\n\n// https://github.com/adobe/adobe-client-data-layer/wiki#addeventlistener\nexport const addEventListener = (eventName, handler) => {\n    if (isDataLayerEnabled()) {\n        getDataLayer().addEventListener(eventName, handler);\n    }\n};\n\n// https://github.com/adobe/adobe-client-data-layer/wiki#removeeventlistener\nexport const removeEventListener = (eventName, handler) => {\n    if (isDataLayerEnabled()) {\n        getDataLayer().removeEventListener(eventName, handler);\n    }\n};\n\n/**\n * Converts all keys of a given GraphQL response from kebab-case or snake_case into camelCase.\n */\nconst transformGraphqlResponse = o => {\n    const result = {};\n\n    Object.entries(o).forEach(([key, value]) => {\n        if (key === '__typename') {\n            return;\n        }\n\n        if (Array.isArray(value)) {\n            result[toCamel(key)] = value.map(item => transformGraphqlResponse(item));\n        } else if (typeof value === 'object' && value !== null) {\n            result[toCamel(key)] = transformGraphqlResponse(value);\n        } else {\n            result[toCamel(key)] = value;\n        }\n    });\n    return result;\n};\n\nconst toCamel = s =>\n    s.replace(/([-_][a-z])/gi, group =>\n        group\n            .toUpperCase()\n            .replace('-', '')\n            .replace('_', '')\n    );\n\n/**\n * Remove fields which are not required by MSE SDK and add fields which are unavailable in GraphQL.\n */\nexport const transformCart = cart => {\n    let newCart = {};\n    try {\n        const { id, prices, totalQuantity } = cart;\n        const { subtotalExcludingTax, subtotalIncludingTax } = prices || {};\n\n        const items = cart.items\n            ? cart.items.map(item => {\n                  const { price } = item.prices;\n                  const { value, currency } = price;\n                  return {\n                      prices: {\n                          price\n                      },\n                      canApplyMsrp: false,\n                      id: item.uid,\n                      formattedPrice: `${value} ${currency}`,\n                      quantity: item.quantity,\n                      product: {\n                          productId: 0,\n                          name: item.product.name,\n                          sku: item.product.sku\n                      }\n                  };\n              })\n            : [];\n\n        newCart = {\n            id,\n            items,\n            prices: {\n                subtotalExcludingTax,\n                subtotalIncludingTax\n            },\n            totalQuantity\n        };\n    } catch (e) {\n        console.error(e);\n    }\n\n    return newCart;\n};\n\nexport { transformGraphqlResponse };\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    query {\n        countries {\n            id\n            full_name_locale\n            available_regions {\n                id\n                name\n                code\n            }\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useEffect, useCallback } from 'react';\nimport { useQuery, useApolloClient } from '@apollo/client';\nimport { checkCookie, cookieValue } from './cookieUtils';\nimport { isDataLayerEnabled } from './dataLayerUtils';\n\nimport QUERY_COUNTRIES from '../queries/query_countries.graphql';\n\nexport const useEventListener = (target, type, listener, ...rest) => {\n    useEffect(() => {\n        target.addEventListener(type, listener, ...rest);\n\n        // return a callback, which is called on unmount\n        return () => {\n            target.removeEventListener(type, listener, ...rest);\n        };\n    }, [listener, rest, target, type]);\n};\n\nexport const useCookieValue = cookieName => {\n    if (!cookieName || cookieName.length === 0) {\n        return '';\n    }\n    let value = checkCookie(cookieName) ? cookieValue(cookieName) : '';\n    const setCookieValue = (value, age) => {\n        const cookieSettings = `path=/; domain=${window.location.hostname};Max-Age=${age !== undefined ? age : 3600}`;\n        document.cookie = `${cookieName}=${value};${cookieSettings}`;\n    };\n\n    return [value, setCookieValue];\n};\n\nexport const useCountries = () => {\n    const { data, error } = useQuery(QUERY_COUNTRIES);\n    if (error || !data || !data.countries) {\n        return { error, countries: [] };\n    }\n\n    return { countries: data.countries };\n};\n\n/**\n * This hook is taken from the Peregrine library.\n * We don't use it because upgrading to the peregrine library that exports it would mean bringing in some dependencies we don't need (i.e. Redux)\n *\n * @param {DocumentNode} query - parsed GraphQL operation description\n *\n * @returns {Function} callback that runs the query and returns a Promise\n */\nexport const useAwaitQuery = query => {\n    const apolloClient = useApolloClient();\n\n    return useCallback(\n        options => {\n            return apolloClient.query({\n                ...options,\n                query\n            });\n        },\n        [apolloClient, query]\n    );\n};\n\n/**\n * This hook makes the query parameters of the URL available.\n */\nexport const useQueryParams = () => {\n    // Better to use useLocation from react router here, but this doesn't work because of dependency mess up.\n    return new URLSearchParams(window.location.search);\n};\n\n/**\n * This hook provides access to the Magento Storefront Events SDK if enabled and available.\n */\nexport const useStorefrontEvents = () => {\n    if (isDataLayerEnabled && window.magentoStorefrontEvents) {\n        return window.magentoStorefrontEvents;\n    }\n    return false;\n};\n\nexport const usePageType = () => {\n    const PageTypes = {\n        // Pages with landing-page template or pages that match the store root URL\n        // as defined in the store config.\n        CMS: 'CMS',\n\n        // Pages with category component or category-page template\n        CATEGORY: 'Category',\n\n        // Pages with product component or product-page template\n        PRODUCT: 'Product',\n\n        // Pages with cart component\n        CART: 'Cart',\n\n        // Pages with checkout component\n        CHECKOUT: 'Checkout',\n\n        // Any other pages\n        PAGE_BUILDER: 'PageBuilder'\n    };\n\n    // Detect homepage, either by template name or by URL\n    let template = document.querySelector('meta[name=\"template\"]');\n    if (template) {\n        template = template.getAttribute('content');\n    }\n\n    let canonicalUrl = document.querySelector('link[rel=\"canonical\"]');\n    if (canonicalUrl) {\n        canonicalUrl = canonicalUrl.getAttribute('href');\n    }\n\n    let storeRootUrl = null;\n    try {\n        let storeConfig = JSON.parse(document.querySelector('meta[name=\"store-config\"]').getAttribute('content'));\n        storeRootUrl = storeConfig.storeRootUrl;\n    } catch (err) {\n        // Could not parse store config, ignore for now\n    }\n\n    if (template == 'landing-page' || (canonicalUrl && storeRootUrl && canonicalUrl.endsWith(storeRootUrl))) {\n        return PageTypes.CMS;\n    }\n    if (document.querySelector('[data-cif-product-context]') || template == 'product-page') {\n        return PageTypes.PRODUCT;\n    }\n    if (document.querySelector('[data-cif-category-context]') || template == 'category-page') {\n        return PageTypes.CATEGORY;\n    }\n    if (document.querySelector('.cartcontainer__root')) {\n        return PageTypes.CART;\n    }\n    if (document.querySelector('.checkoutpage__root')) {\n        return PageTypes.CHECKOUT;\n    }\n\n    return PageTypes.PAGE_BUILDER;\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { createContext, useContext, useReducer } from 'react';\nimport { object, func } from 'prop-types';\nimport { useCookieValue, useStorefrontEvents } from '../../utils/hooks';\nimport { transformCart, transformGraphqlResponse } from '../../utils/dataLayerUtils';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const initialState = {\n    isOpen: false,\n    isRegistered: false,\n    isEditing: false,\n    isLoading: false,\n    editItem: {},\n    cartId: null,\n    cart: null,\n    errorMessage: null,\n    couponError: null\n};\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const reducerFactory = (setCartCookie, mse) => {\n    return (state, action) => {\n        switch (action.type) {\n            case 'close':\n                return {\n                    ...state,\n                    isOpen: false\n                };\n            case 'open':\n                return {\n                    ...state,\n                    isOpen: true\n                };\n            case 'beginLoading':\n                return {\n                    ...state,\n                    isLoading: true\n                };\n            case 'endLoading':\n                return {\n                    ...state,\n                    isLoading: false\n                };\n            case 'beginEditing':\n                return {\n                    ...state,\n                    isEditing: true,\n                    editItem: action.item\n                };\n            case 'endEditing':\n                return {\n                    ...state,\n                    isEditing: false,\n                    editItem: {}\n                };\n            case 'cartId':\n                return {\n                    ...state,\n                    cartId: action.cartId\n                };\n            case 'reset':\n                setCartCookie('', 0);\n                return {\n                    ...state,\n                    cartId: null,\n                    errorMessage: null,\n                    couponError: null,\n                    cart: null\n                };\n            case 'cart': {\n                mse && mse.context.setShoppingCart(transformCart(transformGraphqlResponse(action.cart)));\n                return {\n                    ...state,\n                    cart: action.cart,\n                    isLoading: false,\n                    couponError: !action.cart.applied_coupon ? state.couponError : null\n                };\n            }\n            case 'register': {\n                return {\n                    ...state,\n                    isRegistered: true\n                };\n            }\n            case 'error':\n                console.error(action.error);\n                return {\n                    ...state,\n                    errorMessage: action.error\n                };\n            case 'discardError':\n                return {\n                    ...state,\n                    errorMessage: null\n                };\n            case 'couponError':\n                return {\n                    ...state,\n                    couponError: action.error\n                };\n\n            default:\n                return state;\n        }\n    };\n};\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const CartContext = createContext();\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const CartProvider = props => {\n    const factory = props.reducerFactory || reducerFactory;\n    const state = props.initialState || initialState;\n\n    const mse = useStorefrontEvents();\n    const [, setCartCookie] = useCookieValue('cif.cart');\n    const contextValue = useReducer(factory(setCartCookie, mse), state);\n\n    return <CartContext.Provider value={contextValue}>{props.children}</CartContext.Provider>;\n};\n\nCartProvider.propTypes = {\n    reducerFactory: func,\n    initialState: object\n};\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const useCartState = () => useContext(CartContext);\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { X as CloseIcon } from 'react-feather';\nimport { useIntl } from 'react-intl';\n\nimport classes from './header.css';\nimport { useCartState } from './cartContext';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Header = () => {\n    const [, dispatch] = useCartState();\n    const intl = useIntl();\n\n    return (\n        <div className={classes.root}>\n            <h2 className={classes.title}>\n                {intl.formatMessage({ id: 'cart:shopping-cart', defaultMessage: 'Shopping Cart' })}\n            </h2>\n            <button\n                onClick={() => {\n                    dispatch({ type: 'close' });\n                }}>\n                <CloseIcon />\n            </button>\n        </div>\n    );\n};\n\nexport default Header;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { bool, node } from 'prop-types';\nimport classes from './indicator.css';\n\nconst LoadingIndicator = props => {\n    const className = props.global ? classes.global : classes.root;\n\n    return (\n        <div className={className}>\n            <span className={`${classes.indicator} loader-img`}></span>\n            <span className={classes.message}>{props.children}</span>\n        </div>\n    );\n};\n\nLoadingIndicator.propTypes = {\n    global: bool,\n    children: node\n};\n\nexport default LoadingIndicator;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\n\nimport LoadingIndicator from './indicator';\n\nconst staticIndicator = <LoadingIndicator global={true}>{'Fetching Data...'}</LoadingIndicator>;\n\nexport default staticIndicator;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './indicator';\nexport { default as fullPageLoadingIndicator } from './static';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { func, node } from 'prop-types';\n\nimport classes from './trigger.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Trigger = props => {\n    const { action, children } = props;\n\n    return (\n        <button className={classes.root} type=\"button\" onClick={action}>\n            {children}\n        </button>\n    );\n};\n\nTrigger.propTypes = {\n    action: func.isRequired,\n    children: node\n};\n\nexport default Trigger;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './trigger';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { useIntl } from 'react-intl';\nimport Trigger from '../Trigger';\nimport classes from './emptyMiniCartBody.css';\nimport { useCartState } from './cartContext';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst EmptyMinicartBody = () => {\n    const [, dispatch] = useCartState();\n    const intl = useIntl();\n\n    return (\n        <div className={classes.root} data-testid=\"empty-minicart\">\n            <h3 className={classes.emptyTitle}>\n                {intl.formatMessage({\n                    id: 'cart:no-items',\n                    defaultMessage: 'There are no items in your shopping cart'\n                })}\n            </h3>\n            <Trigger\n                action={() => {\n                    dispatch({ type: 'close' });\n                }}>\n                <span className={classes.continue}>\n                    {intl.formatMessage({ id: 'cart:continue-shopping', defaultMessage: 'Continue Shopping' })}\n                </span>\n            </Trigger>\n        </div>\n    );\n};\n\nexport default EmptyMinicartBody;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { number, string } from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nconst Price = props => {\n    const { value, currencyCode, className } = props;\n    const intl = useIntl();\n\n    return <span className={className}>{intl.formatNumber(value, { style: 'currency', currency: currencyCode })}</span>;\n};\n\nPrice.propTypes = {\n    /**\n     * The numeric price\n     */\n    value: number.isRequired,\n    /**\n     * A string with any of the currency code supported by Intl.NumberFormat\n     */\n    currencyCode: string.isRequired,\n    /**\n     * Class name to use when styling this component\n     */\n    className: string\n};\n\nPrice.defaultProps = {\n    className: ''\n};\n\nexport default Price;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './price';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport const transparentPlaceholder =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAFCAQAAADIpIVQAAAADklEQVR42mNkgAJGIhgAALQABsHyMOcAAAAASUVORK5CYII=';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nconst htmlDataset = document.querySelector('html').dataset;\nconst { imageOptimizingOrigin } = htmlDataset;\n// Protect against potential falsy values for `mediaBackend`.\nlet mediaBackend = htmlDataset.mediaBackend;\nif (!mediaBackend) {\n    console.warn('A media backend URL should be defined in your config.');\n    mediaBackend = 'https://backend.test/media/';\n}\n\nconst useBackendForImgs = imageOptimizingOrigin === 'backend';\n\n// Tests if a URL begins with `http:` or `https:` or `data:`\nconst absoluteUrl = /^(data|http|https)?:/i;\n\n// Simple path joiner that guarantees one and only one slash between segments\nconst joinUrls = (base, url) =>\n    (base.endsWith('/') ? base.slice(0, -1) : base) + '/' + (url.startsWith('/') ? url.slice(1) : url);\n\nconst mediaBases = new Map().set('image-product', 'catalog/product/').set('image-category', 'catalog/category/');\n\n/**\n * Creates an \"optimized\" url for a provided relative url based on\n * requested media type and width. Any image URLs (whose type begins with\n * \"image-\" will also be optimized.)\n *\n * If a `type` is provided the `path` will be joined with the associated media\n * base.\n *  - `catalog/product/path/to/img.jpg`\n *\n * If a `width` is provided, \"resize parameters\" are added to the URL for\n * middlewares (either onboard or backend) to return using the desired width\n * and original media url.\n *  - `catalog/product/path/to/img.jpg?width=500&auto=webp&format=pjpg\n *\n * If only `path` is provided it is returned unaltered.\n *\n * @param {string} path - absolute or relative url to resource.\n * @param {Object} props - properties describing desired optimizations\n * @param {string} props.type - \"image-product\" or \"image-category\"\n * @param {number} props.width - the desired resize width of the image\n * @param {number} props.height - the desired resize height of the image\n */\nconst makeOptimizedUrl = (path, { type, width, height } = {}) => {\n    // Immediate return if there's no image optimization to attempt\n    if (!type || !type.startsWith('image-')) {\n        return path;\n    }\n\n    const { origin } = window.location;\n    const isAbsolute = absoluteUrl.test(path);\n    let baseURL = new URL(path, mediaBackend);\n\n    // If URL is relative and has a supported type, prepend media base onto path\n    if (!isAbsolute && mediaBases.has(type)) {\n        const mediaBase = mediaBases.get(type);\n        if (!baseURL.pathname.includes(mediaBase)) {\n            baseURL = new URL(joinUrls(mediaBase, path), mediaBackend);\n        }\n    }\n\n    if (baseURL.href.startsWith(mediaBackend) && !useBackendForImgs) {\n        baseURL = new URL(baseURL.href.slice(baseURL.origin.length), origin);\n    }\n\n    // Append image optimization parameters\n    const params = new URLSearchParams(baseURL.search);\n    params.set('auto', 'webp'); // Use the webp format if available\n    params.set('format', 'pjpg'); // Use progressive JPGs at least\n    if (width) {\n        params.set('width', width);\n    }\n    if (height) {\n        params.set('height', height);\n    }\n\n    baseURL.search = params.toString();\n\n    if (baseURL.origin === origin) {\n        return baseURL.href.slice(baseURL.origin.length);\n    }\n\n    return baseURL.href;\n};\n\nexport default makeOptimizedUrl;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { func, number, object, oneOfType, shape, string } from 'prop-types';\n\nimport classes from './icon.css';\n\n/**\n * The Icon component allows us to wrap each icon with some default styling.\n */\n\nconst Icon = props => {\n    const { attrs: { width, ...restAttrs } = {}, size, src: IconComponent } = props;\n\n    // Permit both prop styles:\n    // <Icon src={Foo} attrs={{ width: 18 }} />\n    // <Icon src={Foo} size={18} />\n    return (\n        <span className={classes.root}>\n            <IconComponent size={size || width} {...restAttrs} />\n        </span>\n    );\n};\n\nIcon.propTypes = {\n    classes: shape({\n        root: string\n    }),\n    size: number,\n    attrs: object,\n    src: oneOfType([func, shape({ render: func.isRequired })]).isRequired\n};\n\nexport default Icon;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './icon';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { useCallback, useState, useRef } from 'react';\nimport { shape, string, node } from 'prop-types';\nimport { MoreVertical } from 'react-feather';\n\nimport classes from './kebab.css';\nimport Icon from '../Icon';\nimport { useEventListener } from '../../utils/hooks';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Kebab = props => {\n    const { children } = props;\n\n    const [open, isOpen] = useState(false);\n    const kebabRef = useRef(null);\n\n    const handleOutsideKebabClick = useCallback(event => {\n        if (!kebabRef.current.contains(event.target)) {\n            isOpen(false);\n        }\n    }, []);\n\n    useEventListener(document, 'mousedown', handleOutsideKebabClick);\n    useEventListener(document, 'touchend', handleOutsideKebabClick);\n\n    const handleKebabClick = useCallback(() => {\n        isOpen(!open);\n    }, [isOpen]);\n\n    const toggleClass = open ? classes.dropdown_active : classes.dropdown;\n\n    return (\n        <div className={classes.root}>\n            <button className={classes.kebab} onClick={handleKebabClick} ref={kebabRef}>\n                <Icon src={MoreVertical} />\n            </button>\n            <ul className={toggleClass}>{children}</ul>\n        </div>\n    );\n};\n\nKebab.propTypes = {\n    classes: shape({\n        dropdown: string,\n        dropdown_active: string,\n        kebab: string,\n        root: string\n    }),\n    children: node\n};\nexport default Kebab;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { func, oneOf, shape, string, bool } from 'prop-types';\nimport { Heart, Edit2, Trash } from 'react-feather';\n\nimport classes from './section.css';\nimport Icon from '../Icon';\n\nconst defaultIconAttributes = {\n    color: 'rgb(var(--venia-teal))',\n    width: '14px',\n    height: '14px'\n};\nconst filledIconAttributes = {\n    ...defaultIconAttributes,\n    fill: 'rgb(var(--venia-teal))'\n};\nconst icons = {\n    Heart,\n    Edit2,\n    Trash\n};\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Section = props => {\n    const { icon, isFilled, onClick, text } = props;\n    const attributes = isFilled ? filledIconAttributes : defaultIconAttributes;\n\n    const iconSrc = icons[icon];\n    return (\n        <li className={classes.menuItem}>\n            <button onMouseDown={onClick}>\n                {iconSrc && <Icon src={iconSrc} attrs={attributes} />}\n                <span className={classes.text}>{text}</span>\n            </button>\n        </li>\n    );\n};\n\nSection.propTypes = {\n    classes: shape({\n        menuItem: string,\n        text: string\n    }),\n    icon: oneOf(Object.keys(icons)),\n    isFilled: bool,\n    onClick: func,\n    text: string\n};\n\nexport default Section;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation($cartId: String!, $itemUid: ID!) {\n        removeItemFromCart(input: { cart_id: $cartId, cart_item_uid: $itemUid }) {\n            cart {\n                items {\n                    uid\n                }\n            }\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport default error => {\n    if (error.networkError) {\n        return error.networkError;\n    }\n\n    if (error.graphQLErrors && error.graphQLErrors.length > 0) {\n        return error.graphQLErrors[0].message;\n    }\n    if (error.message) {\n        return error.message;\n    }\n\n    return JSON.stringify(error);\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport parseError from '../../utils/parseError';\n\n/**\n * Adds an item to the cart. If the cart doesn't exist then it's created\n *\n * @param {Object} payload a parameters object with the following structure:\n *      cartDetailsQuery - the query object to execute\n *      createCartMutation - the mutation to execute to create the cart\n *      addToCartMutation - the mutation to execute to add the item to the cart\n *      dispatch - the dispatch callback for the cart context\n *      cartItems - the items to add to the cart\n *      cartId - the id of the cart in which to add the items. This could be `undefined` or `null`\n *\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const addItemToCart = async payload => {\n    const {\n        createCartMutation,\n        cartDetailsQuery,\n        addToCartMutation,\n        dispatch,\n        physicalCartItems,\n        virtualCartItems,\n        bundleCartItems\n    } = payload;\n\n    try {\n        let cartId = payload.cartId;\n        if (!payload.cartId) {\n            let { data: newCartData } = await createCartMutation();\n            cartId = newCartData.createEmptyCart;\n        }\n\n        let variables = { cartId, cartItems: physicalCartItems };\n        if (bundleCartItems.length > 0) {\n            variables = { cartId, cartItems: bundleCartItems };\n        } else if (physicalCartItems.length > 0 && virtualCartItems.length > 0) {\n            variables = { cartId, virtualCartItems, simpleCartItems: physicalCartItems };\n        } else if (virtualCartItems.length > 0) {\n            variables = { cartId, cartItems: virtualCartItems };\n        }\n\n        await addToCartMutation({ variables });\n        dispatch({ type: 'cartId', cartId });\n        await getCartDetails({ cartDetailsQuery, cartId, dispatch });\n    } catch (error) {\n        dispatch({ type: 'error', error: error.toString() });\n    }\n};\n\n/**\n * Retrieves the cart details\n * @param {Object} payload a parameters object with the following structure:\n *      cartDetailsQuery - the query object to execute\n *      dispatch - the dispatch callback for the cart context\n *      cartId - the id of the cart\n *\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const getCartDetails = async payload => {\n    const { cartDetailsQuery, dispatch, cartId } = payload;\n\n    try {\n        if (!cartId) {\n            return;\n        }\n        const { data, error } = await cartDetailsQuery({ variables: { cartId }, fetchPolicy: 'network-only' });\n        if (error) {\n            throw new Error(error);\n        }\n\n        dispatch({ type: 'cart', cart: data.cart });\n    } catch (error) {\n        dispatch({ type: 'error', error: error.toString() });\n    }\n};\n\n/**\n * Removes an item from the cart\n *\n * @param {Object} payload a parameters object with the following structure:\n *      cartDetailsQuery - the query object to execute to retrieve the details\n *      removeItemMutation - the mutation to execute to remove the items\n *      dispatch - the dispatch callback for the cart context\n *      cartId - the id of the cart\n *      itemId - the id of the item to remove\n *\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const removeItemFromCart = async payload => {\n    const { cartDetailsQuery, removeItemMutation, cartId, itemUid, dispatch } = payload;\n\n    try {\n        await removeItemMutation({\n            variables: { cartId, itemUid }\n        });\n    } catch (error) {\n        dispatch({ type: 'error', error: error.toString() });\n    }\n    await getCartDetails({ cartDetailsQuery, dispatch, cartId });\n};\n\n/**\n * Removes a coupon from the cart\n *\n * @param {Object} payload a parameters object with the following structure:\n *      cartDetailsQuery - the query object to execute\n *      removeCouponMutation - the mutation to execute to remove the coupon\n *      dispatch - the dispatch callback for the cart context\n *      cartId - the id of the cart\n *      couponCode - the code of the coupon to be removed\n *\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const removeCoupon = async payload => {\n    const { cartDetailsQuery, cartId, couponCode, removeCouponMutation, dispatch } = payload;\n\n    try {\n        await removeCouponMutation({ variables: { cartId, couponCode } });\n    } catch (error) {\n        dispatch({ type: 'couponError', error: parseError(error) });\n    }\n\n    await getCartDetails({ cartDetailsQuery, dispatch, cartId });\n};\n\n/**\n * Adds a coupon to the cart\n *\n * @param {Object} payload a parameters object with the following structure:\n *      cartDetailsQuery - the query object to execute\n *      addCouponMutation - the mutation to execute to add the coupon to the cart\n *      dispatch - the dispatch callback for the cart context\n *      cartId - the id of the cart\n *      couponCode - the code of the coupon\n *\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const addCoupon = async payload => {\n    const { cartDetailsQuery, cartId, couponCode, addCouponMutation, dispatch } = payload;\n\n    try {\n        await addCouponMutation({ variables: { cartId, couponCode } });\n    } catch (error) {\n        dispatch({ type: 'couponError', error: parseError(error) });\n    }\n\n    await getCartDetails({ cartDetailsQuery, dispatch, cartId });\n};\n\n/**\n * Merges two shopping carts\n *\n * @param {Object} payload a parameters object with the following structure:\n *      cartDetailsQuery - the query object to execute\n *      mergeCartsMutation - the mutation to execute to merge the carts\n *      dispatch - the dispatch callback for the cart context\n *      cartId - the id of the cart to be merged\n *      customerCartId - the id of the cart that the other cart will the merged into (i.e. the customer cart)\n *\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const mergeCarts = async payload => {\n    const { cartDetailsQuery, mergeCartsMutation, cartId, customerCartId, dispatch } = payload;\n    try {\n        const { data } = await mergeCartsMutation({\n            variables: {\n                sourceCartId: cartId,\n                destinationCartId: customerCartId\n            }\n        });\n        await getCartDetails({ cartDetailsQuery, dispatch, cartId: data.mergeCarts.id });\n        return data.mergeCarts.id;\n    } catch (error) {\n        dispatch({ type: 'error', error: parseError(error) });\n    }\n};\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const updateCartItem = async payload => {\n    const { cartDetailsQuery, updateCartItemMutation, cartId, cartItemUid, itemQuantity, dispatch } = payload;\n    try {\n        await updateCartItemMutation({\n            variables: { cartId, cartItemUid, quantity: itemQuantity }\n        });\n        await getCartDetails({ cartDetailsQuery, dispatch, cartId });\n    } catch (error) {\n        dispatch({ type: 'error', error: parseError(error) });\n    }\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport * from './actions';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useMutation } from '@apollo/client';\n\nimport MUTATION_REMOVE_ITEM from '../../queries/mutation_remove_item.graphql';\nimport CART_DETAILS_QUERY from '../../queries/query_cart_details.graphql';\n\nimport { removeItemFromCart } from '../../actions/cart';\nimport { useCartState } from './cartContext';\nimport { useAwaitQuery, useStorefrontEvents } from '../../utils/hooks';\nimport * as dataLayerUtils from '../../utils/dataLayerUtils';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport default props => {\n    const { item } = props;\n    const [{ cartId }, dispatch] = useCartState();\n    const mse = useStorefrontEvents();\n\n    const [removeItemMutation] = useMutation(MUTATION_REMOVE_ITEM);\n    const cartDetailsQuery = useAwaitQuery(CART_DETAILS_QUERY);\n\n    const editItem = () => {\n        dispatch({ type: 'beginEditing', item: item });\n    };\n\n    const removeItem = async itemUid => {\n        dispatch({ type: 'beginLoading' });\n        await removeItemFromCart({ cartId, itemUid, dispatch, cartDetailsQuery, removeItemMutation });\n        dispatch({ type: 'endLoading' });\n\n        mse && mse.publish.removeFromCart();\n        dataLayerUtils.pushEvent('cif:removeFromCart', {\n            '@id': await dataLayerUtils.generateDataLayerId('product', item.product.sku),\n            'xdm:SKU': item.product.sku,\n            'xdm:quantity': item.quantity\n        });\n    };\n\n    return [{}, { removeItem, editItem }];\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { useMemo, useCallback } from 'react';\nimport { number, shape, object, string } from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport classes from './product.css';\n\nimport Price from '../Price';\nimport { transparentPlaceholder } from '../../utils/transparentPlaceholder';\nimport makeUrl from '../../utils/makeUrl';\nimport Kebab from './kebab';\nimport Section from './section';\n\nimport useProduct from './useProduct';\n\nconst imageWidth = 80;\nconst imageHeight = 100;\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Product = props => {\n    const { item } = props;\n    const intl = useIntl();\n\n    const { product = {}, quantity = 0, uid = '', prices, bundle_options = [] } = item;\n    const { thumbnail, name, __typename } = product;\n    const [, { removeItem, editItem }] = useProduct({ item });\n\n    let { price, row_total } = prices;\n\n    const productImage = useMemo(() => {\n        const src =\n            thumbnail && thumbnail.url\n                ? makeUrl(thumbnail.url, { type: 'image-product', width: imageWidth, height: imageHeight })\n                : transparentPlaceholder;\n        return <img alt={name} className={classes.image} placeholder={transparentPlaceholder} src={src} />;\n    });\n\n    const handleRemoveItem = useCallback(() => {\n        removeItem(uid);\n    }, [uid, removeItem]);\n\n    return (\n        <li className={classes.root} data-testid=\"cart-item\">\n            {productImage}\n            <div className={classes.name}>{name}</div>\n            {__typename === 'BundleProduct' && (\n                <div className={classes.bundleOptions}>\n                    {bundle_options.map(o => (\n                        <div key={`${o.id}`}>\n                            <p className={classes.bundleOptionTitle}>{o.label}:</p>\n                            {o.values.map(v => (\n                                <p key={`${o.id}-${v.id}`} className={classes.bundleOptionValue}>\n                                    {`${v.quantity} x ${v.label} `}\n                                    <Price currencyCode={price.currency} value={v.price} />\n                                </p>\n                            ))}\n                        </div>\n                    ))}\n                </div>\n            )}\n            <div className={classes.quantity}>\n                <div className={classes.quantityRow}>\n                    <span>{quantity}</span>\n                    <span className={classes.quantityOperator}>{'×'}</span>\n                    <Price className={classes.price} currencyCode={price.currency} value={price.value} />\n                </div>\n                <div className={classes.rowTotalRow}>\n                    <Price className={classes.rowTotal} currencyCode={row_total.currency} value={row_total.value} />\n                </div>\n            </div>\n            <Kebab>\n                <Section\n                    text={intl.formatMessage({ id: 'cart:edit-item', defaultMessage: 'Edit item' })}\n                    onClick={editItem}\n                    icon=\"Edit2\"\n                />\n                <Section\n                    text={intl.formatMessage({ id: 'cart:remove-item', defaultMessage: 'Remove item' })}\n                    onClick={handleRemoveItem}\n                    icon=\"Trash\"\n                />\n            </Kebab>\n        </li>\n    );\n};\n\nProduct.propTypes = {\n    item: shape({\n        uid: string.isRequired,\n        quantity: number.isRequired,\n        prices: shape({\n            price: shape({\n                value: number.isRequired,\n                currency: string.isRequired\n            }).isRequired,\n            row_total: shape({\n                value: number.isRequired,\n                currency: string.isRequired\n            }).isRequired\n        }).isRequired,\n        product: shape({\n            name: string.isRequired,\n            image: object\n        })\n    })\n};\n\nexport default Product;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { array, shape, string } from 'prop-types';\n\nimport Product from './product';\nimport classes from './productList.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst ProductList = props => {\n    const { cartItems } = props;\n\n    return (\n        <ul className={classes.root}>\n            {cartItems.map(item => (\n                <Product key={item.id} item={item} />\n            ))}\n        </ul>\n    );\n};\n\nProductList.propTypes = {\n    cartItems: array,\n    classes: shape({\n        root: string\n    })\n};\n\nexport default ProductList;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { oneOf, node, shape, string } from 'prop-types';\n\nimport defaultClasses from './button.css';\n\nconst getRootClassName = priority => `root_${priority}Priority`;\n\nconst Button = props => {\n    const { children, priority, type, ...restProps } = props;\n\n    let classes = props.classes ? Object.assign({}, defaultClasses, props.classes) : defaultClasses;\n\n    const rootClassName = classes[getRootClassName(priority)];\n\n    return (\n        <button className={rootClassName} type={type} {...restProps}>\n            <span className={classes.content}>{children}</span>\n        </button>\n    );\n};\n\nButton.defaultProps = {\n    priority: 'normal',\n    type: 'button'\n};\n\nButton.propTypes = {\n    priority: oneOf(['high', 'normal', 'low']).isRequired,\n    type: oneOf(['button', 'reset', 'submit']).isRequired,\n    children: node,\n    classes: shape({\n        content: string\n    })\n};\n\nexport default Button;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './button';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { bool, node, shape, string } from 'prop-types';\n\nimport classes from './field.css';\n\nconst Field = props => {\n    const { required, children, label, htmlFor } = props;\n\n    return (\n        <div className={classes.root}>\n            <label htmlFor={htmlFor}>\n                <span className={classes.label}>\n                    {required && <span className={classes.requiredSymbol} />}\n                    {label}\n                </span>\n            </label>\n            {children}\n        </div>\n    );\n};\n\nField.propTypes = {\n    children: node,\n    classes: shape({\n        label: string,\n        root: string\n    }),\n    label: node,\n    required: bool,\n    htmlFor: string\n};\n\nexport default Field;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { string, node, object } from 'prop-types';\n\nimport classes from './fieldIcons.css';\n\nconst FieldIcons = props => {\n    const { after, before, children } = props;\n\n    const style = {\n        '--iconsBefore': before ? 1 : 0,\n        '--iconsAfter': after ? 1 : 0\n    };\n\n    return (\n        <span className={classes.root} style={style}>\n            <span className={classes.input}>{children}</span>\n            <span className={classes.before}>{before}</span>\n            <span className={classes.after}>{after}</span>\n        </span>\n    );\n};\n\nFieldIcons.propTypes = {\n    after: object,\n    before: string,\n    root: string,\n    children: node\n};\n\nexport default FieldIcons;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { node, shape, string } from 'prop-types';\n\nimport classes from './message.css';\n\nconst Message = props => {\n    const { children, fieldState } = props;\n    const { asyncError, error } = fieldState;\n    const errorMessage = error || asyncError;\n    const className = errorMessage ? classes.root_error : classes.root;\n\n    return <p className={className}>{errorMessage || children}</p>;\n};\n\nMessage.propTypes = {\n    children: node,\n    classes: shape({\n        root: string,\n        root_error: string\n    }),\n    fieldState: shape({\n        asyncError: string,\n        error: string\n    })\n};\n\nexport default Message;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './field';\nexport { default as FieldIcons } from './fieldIcons';\nexport { default as Message } from './message';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { arrayOf, node, number, oneOfType, shape, string } from 'prop-types';\nimport { BasicSelect, Option, asField } from 'informed';\n\nimport { FieldIcons, Message } from '../Field';\nimport classes from './select.css';\n\nimport Icon from '../Icon';\nimport { ChevronDown as ChevronDownIcon } from 'react-feather';\n\nconst arrow = <Icon src={ChevronDownIcon} size={18} />;\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Select = props => {\n    const { fieldState, items, message, ...rest } = props;\n    const options = items.map(({ label, value }) => (\n        <Option key={value} value={value}>\n            {label || (value != null ? value : '')}\n        </Option>\n    ));\n\n    return (\n        <>\n            <FieldIcons after={arrow}>\n                <BasicSelect {...rest} fieldState={fieldState} className={classes.input}>\n                    {options}\n                </BasicSelect>\n            </FieldIcons>\n            <Message fieldState={fieldState}>{message}</Message>\n        </>\n    );\n};\n\nSelect.propTypes = {\n    classes: shape({\n        input: string\n    }),\n    field: string.isRequired,\n    fieldState: shape({\n        value: oneOfType([number, string])\n    }),\n    items: arrayOf(\n        shape({\n            label: string,\n            value: oneOfType([number, string])\n        })\n    ),\n    message: node\n};\n\nexport default asField(Select);\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './select';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation($cartId: String!, $cartItemUid: ID!, $quantity: Float!) {\n        updateCartItems(\n            input: { cart_id: $cartId, cart_items: [{ cart_item_uid: $cartItemUid, quantity: $quantity }] }\n        ) {\n            cart {\n                items {\n                    uid\n                    quantity\n                    product {\n                        name\n                    }\n                }\n            }\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useCartState } from './cartContext';\nimport { updateCartItem } from '../../actions/cart';\nimport { useStorefrontEvents } from '../../utils/hooks';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst useCartOptions = ({ updateCartItemMutation, cartDetailsQuery }) => {\n    const [{ editItem, cartId }, dispatch] = useCartState();\n    const mse = useStorefrontEvents();\n\n    const updateCart = async newQuantity => {\n        dispatch({ type: 'beginLoading' });\n        await updateCartItem({\n            cartDetailsQuery,\n            updateCartItemMutation,\n            cartId,\n            cartItemUid: editItem.uid,\n            itemQuantity: newQuantity,\n            dispatch\n        });\n\n        mse && mse.publish.updateCart();\n\n        dispatch({ type: 'endLoading' });\n    };\n\n    const data = { editItem, cartId };\n    const api = { dispatch, updateCartItem: updateCart };\n    return [data, api];\n};\n\nexport default useCartOptions;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useMutation } from '@apollo/client';\n\nimport { useAwaitQuery } from '../../utils/hooks';\n\nimport Price from '../Price';\nimport Button from '../Button';\nimport Select from '../Select';\nimport classes from './cartOptions.css';\n\nimport CART_DETAILS_QUERY from '../../queries/query_cart_details.graphql';\nimport MUTATION_UPDATE_CART_ITEM from '../../queries/mutation_update_cart_item.graphql';\nimport useCartOptions from './useCartOptions';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst CartOptions = () => {\n    const [updateCartItemMutation] = useMutation(MUTATION_UPDATE_CART_ITEM);\n    const cartDetailsQuery = useAwaitQuery(CART_DETAILS_QUERY);\n    const intl = useIntl();\n\n    const [{ editItem }, { dispatch, updateCartItem }] = useCartOptions({\n        updateCartItemMutation,\n        cartDetailsQuery\n    });\n\n    const { product, quantity: initialQuantity, prices } = editItem;\n    const { name } = product;\n    const { value, currency } = prices.price;\n\n    const [quantity, setQuantity] = useState(initialQuantity);\n\n    const mockQtys = [\n        {\n            value: '1'\n        },\n        {\n            value: '2'\n        },\n        {\n            value: '3'\n        },\n        {\n            value: '4'\n        }\n    ];\n\n    const handleUpdateClick = async () => {\n        await updateCartItem(quantity);\n        dispatch({ type: 'endEditing' });\n    };\n\n    const handleOnChange = newVal => {\n        setQuantity(parseInt(newVal));\n    };\n\n    return (\n        <form className={classes.root}>\n            <div className={classes.focusItem}>\n                <span className={classes.name}>{name}</span>\n                <span className={classes.price}>\n                    <Price currencyCode={currency} value={value} />\n                </span>\n            </div>\n            <div className={classes.form}>\n                <section className={classes.quantity}>\n                    <h2 className={classes.quantityTitle}>\n                        <span>{intl.formatMessage({ id: 'cart:quantity', defaultMessage: 'Quantity' })}</span>\n                    </h2>\n                    <Select field=\"quantity\" initialValue={quantity} onValueChange={handleOnChange} items={mockQtys} />\n                </section>\n            </div>\n            <div className={classes.save}>\n                <Button\n                    onClick={() => {\n                        dispatch({ type: 'endEditing' });\n                    }}>\n                    <span>{intl.formatMessage({ id: 'common:cancel', defaultMessage: 'Cancel' })}</span>\n                </Button>\n                <Button priority=\"high\" onClick={handleUpdateClick}>\n                    <span>{intl.formatMessage({ id: 'cart:update-cart', defaultMessage: 'Update Cart' })}</span>\n                </Button>\n            </div>\n        </form>\n    );\n};\n\nexport default CartOptions;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { useIntl } from 'react-intl';\n\nimport Button from '../Button';\n\nimport classes from './error.css';\nimport { useCartState } from './cartContext';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Error = () => {\n    const [{ errorMessage }, dispatch] = useCartState();\n    const intl = useIntl();\n\n    return (\n        <div className={classes.root}>\n            <h2>Error</h2>\n            <p>{errorMessage}</p>\n            <div className={classes.action}>\n                <Button\n                    priority=\"high\"\n                    onClick={() => {\n                        dispatch({ type: 'discardError' });\n                    }}>\n                    <span>{intl.formatMessage({ id: 'common:close', defaultMessage: 'Close' })}</span>\n                </Button>\n            </div>\n        </div>\n    );\n};\n\nexport default Error;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation($cartId: String!, $couponCode: String!) {\n        applyCouponToCart(input: { cart_id: $cartId, coupon_code: $couponCode }) {\n            cart {\n                applied_coupon {\n                    code\n                }\n            }\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useMutation } from '@apollo/client';\n\nimport { useCartState } from './cartContext';\nimport { addCoupon } from '../../actions/cart';\nimport { useAwaitQuery } from '../../utils/hooks';\n\nimport MUTATION_ADD_COUPON from '../../queries/mutation_add_coupon.graphql';\nimport CART_DETAILS_QUERY from '../../queries/query_cart_details.graphql';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport default () => {\n    const [{ cartId, couponError }, dispatch] = useCartState();\n\n    const [addCouponMutation] = useMutation(MUTATION_ADD_COUPON);\n    const cartDetailsQuery = useAwaitQuery(CART_DETAILS_QUERY);\n\n    const addCouponToCart = async couponCode => {\n        dispatch({ type: 'beginLoading' });\n        await addCoupon({\n            cartId,\n            couponCode,\n            cartDetailsQuery,\n            addCouponMutation,\n            dispatch\n        });\n\n        dispatch({ type: 'endLoading' });\n    };\n    return [{ couponError }, { addCouponToCart }];\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport Button from '../Button';\n\nimport classes from './couponForm.css';\nimport useCouponForm from './useCouponForm';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst CouponForm = () => {\n    const [{ couponError }, { addCouponToCart }] = useCouponForm();\n    const [couponCode, setCouponCode] = useState('');\n    const intl = useIntl();\n\n    const addCouponHandler = () => {\n        return addCouponToCart(couponCode);\n    };\n\n    const errorFragment = couponError ? <div className={classes.error}>{couponError}</div> : '';\n\n    return (\n        <form className={classes.root}>\n            <input\n                value={couponCode}\n                onChange={e => setCouponCode(e.target.value)}\n                type=\"text\"\n                name=\"couponCode\"\n                placeholder={intl.formatMessage({ id: 'cart:enter-coupon', defaultMessage: 'Enter your code' })}\n            />\n            <Button priority=\"high\" onClick={addCouponHandler} disabled={couponCode.length < 3}>\n                <span>{intl.formatMessage({ id: 'cart:apply-coupon', defaultMessage: 'Apply Coupon' })}</span>\n            </Button>\n            {errorFragment}\n        </form>\n    );\n};\n\nexport default CouponForm;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation($cartId: String!) {\n        removeCouponFromCart(input: { cart_id: $cartId }) {\n            cart {\n                applied_coupon {\n                    code\n                }\n            }\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useMutation } from '@apollo/client';\n\nimport { useCartState } from './cartContext';\nimport { removeCoupon } from '../../actions/cart';\nimport { useAwaitQuery } from '../../utils/hooks';\n\nimport MUTATION_REMOVE_COUPON from '../../queries/mutation_remove_coupon.graphql';\nimport CART_DETAILS_QUERY from '../../queries/query_cart_details.graphql';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport default () => {\n    const [{ cartId, cart }, dispatch] = useCartState();\n    const [removeCouponMutation] = useMutation(MUTATION_REMOVE_COUPON);\n    const cartDetailsQuery = useAwaitQuery(CART_DETAILS_QUERY);\n\n    const appliedCoupon = cart.applied_coupon ? cart.applied_coupon.code : null;\n\n    const removeCouponFromCart = async () => {\n        dispatch({ type: 'beginLoading' });\n        await removeCoupon({ cartId, removeCouponMutation, cartDetailsQuery, dispatch });\n        dispatch({ type: 'endLoading' });\n    };\n\n    return [{ appliedCoupon }, { removeCouponFromCart }];\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { useIntl } from 'react-intl';\n\nimport Kebab from './kebab';\nimport Section from './section';\n\nimport classes from './couponItem.css';\nimport useCouponItem from './useCouponItem';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst CouponItem = () => {\n    const [{ appliedCoupon }, { removeCouponFromCart }] = useCouponItem();\n    const intl = useIntl();\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.couponName}>\n                Coupon <strong>{appliedCoupon}</strong> applied.\n            </div>\n            <Kebab>\n                <Section\n                    text={intl.formatMessage({ id: 'cart:remove-coupon', defaultMessage: 'Remove coupon' })}\n                    onClick={removeCouponFromCart}\n                    icon=\"Trash\"\n                />\n            </Kebab>\n        </div>\n    );\n};\n\nexport default CouponItem;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { number, shape, arrayOf, string } from 'prop-types';\n\nimport Price from '../Price';\n\nimport classes from './discountList.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst DiscountList = props => {\n    let _renderDiscounts = () => {\n        return props.discounts.map(discount => {\n            const { currency, value } = discount.amount;\n            return (\n                <div className={classes.item} key={discount.label}>\n                    <span>{discount.label}</span>\n                    <span className={classes.price}>\n                        <Price currencyCode={currency} value={-value} />\n                    </span>\n                </div>\n            );\n        });\n    };\n\n    return <div className={classes.root}>{_renderDiscounts()}</div>;\n};\n\nDiscountList.propTypes = {\n    discounts: arrayOf(\n        shape({\n            amount: shape({\n                value: number.isRequired,\n                currency: string.isRequired\n            }).isRequired,\n            label: string.isRequired\n        })\n    )\n};\n\nexport default DiscountList;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { useIntl } from 'react-intl';\n\nimport LoadingIndicator from '../LoadingIndicator';\n\nimport EmptyMinicartBody from './emptyMinicartBody';\nimport classes from './body.css';\nimport ProductList from './productList';\nimport CartOptions from './cartOptions';\nimport Error from './error';\nimport CouponForm from './couponForm';\nimport CouponItem from './couponItem';\n\nimport { useCartState } from './cartContext';\nimport DiscountList from './discountList';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst CartLoadingIndicator = () => {\n    const intl = useIntl();\n\n    return (\n        <LoadingIndicator>\n            {intl.formatMessage({ id: 'cart:fetching-data', defaultMessage: 'Fetching cart data...' })}\n        </LoadingIndicator>\n    );\n};\n\nconst Body = () => {\n    const [{ isEditing, cart, isLoading, errorMessage }] = useCartState();\n    const isEmpty = cart && Object.entries(cart).length > 0 ? cart.items.length === 0 : true;\n\n    if (isLoading) {\n        return <CartLoadingIndicator />;\n    }\n\n    if (errorMessage) {\n        return <Error />;\n    }\n\n    if (isEmpty) {\n        return <EmptyMinicartBody />;\n    }\n\n    if (isEditing) {\n        return <CartOptions />;\n    }\n\n    const cartItems = cart.items;\n    const couponFragment = !cart.applied_coupon ? <CouponForm /> : <CouponItem />;\n    const discountFragment =\n        cart.prices.discounts && cart.prices.discounts.length > 0 ? (\n            <DiscountList discounts={cart.prices.discounts} />\n        ) : (\n            <div />\n        );\n\n    return (\n        <div className={classes.root}>\n            <ProductList cartItems={cartItems} />\n            {discountFragment}\n            {couponFragment}\n        </div>\n    );\n};\n\nexport default Body;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\n/**\n * Re-fetches a customer cart.\n *\n * @param {Object} payload a parameters object with the following structure:\n *     fetchCustomerCartQuery - the query object to execute to retrieve the cart details\n *     dispatch - the dispatch callback for the user context\n *\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const resetCustomerCart = async ({ dispatch, fetchCustomerCartQuery }) => {\n    const { data } = await fetchCustomerCartQuery({\n        fetchPolicy: 'network-only'\n    });\n    const cartId = data.customerCart.id;\n    dispatch({ type: 'setCartId', cartId });\n};\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const signOutUser = async ({ revokeCustomerToken, setCartCookie, setUserCookie, dispatch }) => {\n    try {\n        await revokeCustomerToken();\n        setCartCookie('', 0);\n        setUserCookie('', 0);\n        dispatch({ type: 'signOut' });\n    } catch (error) {\n        console.error('An error occurred during sign-out', error);\n        dispatch({ type: 'error', error: error.toString() });\n    }\n};\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const createAddress = async ({ createCustomerAddress, variables, resetFields, dispatch }) => {\n    try {\n        const { data } = await createCustomerAddress({ variables: variables });\n        dispatch({ type: 'postCreateAddress', address: data.createCustomerAddress, resetFields });\n    } catch (error) {\n        console.error('An error occurred during creating customer address', error);\n        dispatch({ type: 'setAddressFormError', error: error.toString() });\n    }\n};\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const updateAddress = async ({ updateCustomerAddress, variables, resetFields, dispatch }) => {\n    try {\n        const { data } = await updateCustomerAddress({ variables: variables });\n        dispatch({ type: 'postUpdateAddress', address: data.updateCustomerAddress, resetFields });\n    } catch (error) {\n        console.error('An error occurred during updating customer address', error);\n        dispatch({ type: 'setAddressFormError', error: error.toString() });\n    }\n};\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const deleteAddress = async ({ deleteCustomerAddress, address, dispatch }) => {\n    try {\n        await deleteCustomerAddress({ variables: { id: address.id } });\n        dispatch({ type: 'postDeleteAddress', address });\n    } catch (error) {\n        console.error('An error occurred during deleting customer address', error);\n        dispatch({ type: 'deleteAddressError', error: error.toString() });\n    }\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport * from './actions';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation($id: Int!) {\n        deleteCustomerAddress(id: $id)\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation {\n        revokeCustomerToken {\n            result\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    query {\n        customer {\n            email\n            firstname\n            lastname\n            addresses {\n                id\n                city\n                company\n                country_code\n                default_billing\n                default_shipping\n                firstname\n                lastname\n                postcode\n                region {\n                    region_code\n                }\n                street\n                telephone\n            }\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { useContext, useReducer, useCallback, useEffect } from 'react';\nimport { object, func } from 'prop-types';\n\nimport { useCookieValue, useAwaitQuery, useStorefrontEvents } from '../utils/hooks';\nimport { useMutation } from '@apollo/client';\nimport BrowserPersistence from '@magento/peregrine/lib/util/simplePersistence';\nimport { clearCartId } from '@magento/peregrine/lib/store/actions/cart/asyncActions';\n\nimport parseError from '../utils/parseError';\nimport {\n    resetCustomerCart as resetCustomerCartAction,\n    signOutUser as signOutUserAction,\n    deleteAddress as deleteAddressAction\n} from '../actions/user';\nimport * as dataLayerUtils from '../utils/dataLayerUtils';\n\nimport MUTATION_DELETE_CUSTOMER_ADDRESS from '../queries/mutation_delete_customer_address.graphql';\nimport MUTATION_REVOKE_TOKEN from '../queries/mutation_revoke_customer_token.graphql';\nimport QUERY_CUSTOMER_DETAILS from '../queries/query_customer_details.graphql';\n\nconst UserContext = React.createContext();\n\nconst reducerFactory = () => {\n    return (state, action) => {\n        switch (action.type) {\n            case 'setUserDetails':\n                return {\n                    ...state,\n                    inProgress: false,\n                    currentUser: {\n                        ...action.userDetails\n                    }\n                };\n            case 'setCartId':\n                return {\n                    ...state,\n                    cartId: action.cartId\n                };\n            case 'setInProgress': {\n                return {\n                    ...state,\n                    inProgress: true\n                };\n            }\n            case 'setToken':\n                return {\n                    ...state,\n                    isSignedIn: true,\n                    inProgress: false,\n                    token: action.token,\n                    signInError: null\n                };\n            case 'setAddressFormError':\n                return {\n                    ...state,\n                    addressFormError: parseError(action.error)\n                };\n            case 'clearAddressFormError':\n                return {\n                    ...state,\n                    addressFormError: null\n                };\n            case 'postCreateAddress':\n                return {\n                    ...state,\n                    currentUser: {\n                        ...state.currentUser,\n                        addresses: [\n                            ...[...state.currentUser.addresses].map(address => {\n                                if (action.resetFields) {\n                                    Object.entries(action.resetFields).forEach(([key, value]) => {\n                                        address[key] = value;\n                                    });\n                                }\n                                return address;\n                            }),\n                            action.address\n                        ]\n                    },\n                    addressFormError: null,\n                    isShowAddressForm: false\n                };\n            case 'beginEditingAddress':\n                return {\n                    ...state,\n                    updateAddress: action.address,\n                    isShowAddressForm: true\n                };\n            case 'endEditingAddress':\n                return {\n                    ...state,\n                    updateAddress: null\n                };\n            case 'postUpdateAddress':\n                return {\n                    ...state,\n                    currentUser: {\n                        ...state.currentUser,\n                        addresses: [...state.currentUser.addresses].map(address => {\n                            if (action.resetFields) {\n                                Object.entries(action.resetFields).forEach(([key, value]) => {\n                                    address[key] = value;\n                                });\n                            }\n                            return address.id === action.address.id ? action.address : address;\n                        })\n                    },\n                    updateAddress: null,\n                    addressFormError: null,\n                    isShowAddressForm: false\n                };\n            case 'beginDeletingAddress':\n                return {\n                    ...state,\n                    deleteAddress: action.address\n                };\n            case 'endDeletingAddress':\n                return {\n                    ...state,\n                    deleteAddress: null\n                };\n            case 'postDeleteAddress':\n                return {\n                    ...state,\n                    currentUser: {\n                        ...state.currentUser,\n                        addresses: [...state.currentUser.addresses].filter(address => address.id !== action.address.id)\n                    },\n                    deleteAddress: null,\n                    deleteAddressError: null\n                };\n            case 'deleteAddressError':\n                return {\n                    ...state,\n                    deleteAddressError: parseError(action.error)\n                };\n            case 'postCreateAccount':\n                return {\n                    ...state,\n                    isSignedIn: false,\n                    inProgress: false,\n                    createAccountError: null,\n                    createAccountEmail: action.accountEmail\n                };\n            case 'cleanupAccountCreated':\n                return {\n                    ...state,\n                    createAccountEmail: null\n                };\n            case 'error': {\n                return {\n                    ...state,\n                    inProgress: false,\n                    signInError: action.error\n                };\n            }\n            case 'createAccountError': {\n                return {\n                    ...state,\n                    inProgress: false,\n                    createAccountError: parseError(action.error)\n                };\n            }\n            case 'signOut':\n                return {\n                    ...state,\n                    isSignedIn: false,\n                    inProgress: false,\n                    token: '',\n                    currentUser: {\n                        firstname: '',\n                        lastname: '',\n                        email: '',\n                        addresses: []\n                    },\n                    cartId: '',\n                    accountDropdownView: null\n                };\n            case 'toggleAccountDropdown':\n                return {\n                    ...state,\n                    isAccountDropdownOpen: action.toggle\n                };\n            case 'changeAccountDropdownView':\n                return {\n                    ...state,\n                    accountDropdownView: action.view\n                };\n            case 'openAddressForm':\n                return {\n                    ...state,\n                    isShowAddressForm: true\n                };\n            case 'closeAddressForm':\n                return {\n                    ...state,\n                    isShowAddressForm: false\n                };\n            default:\n                return state;\n        }\n    };\n};\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst UserContextProvider = props => {\n    const [userCookie, setUserCookie] = useCookieValue('cif.userToken');\n    const [, setCartCookie] = useCookieValue('cif.cart');\n    const isSignedInFunc = () => !!userCookie;\n    const mse = useStorefrontEvents();\n    const [deleteCustomerAddress] = useMutation(MUTATION_DELETE_CUSTOMER_ADDRESS);\n    const [revokeCustomerToken] = useMutation(MUTATION_REVOKE_TOKEN);\n    const fetchCustomerDetails = useAwaitQuery(QUERY_CUSTOMER_DETAILS);\n\n    const factory = props.reducerFactory || reducerFactory;\n    const initialState = props.initialState || {\n        currentUser: {\n            firstname: '',\n            lastname: '',\n            email: '',\n            addresses: []\n        },\n        token: userCookie,\n        isSignedIn: isSignedInFunc(),\n        isAccountDropdownOpen: false,\n        isShowAddressForm: false,\n        addressFormError: null,\n        updateAddress: null,\n        updateAddressError: null,\n        deleteAddress: null,\n        deleteAddressError: null,\n        signInError: null,\n        inProgress: false,\n        createAccountError: null,\n        createAccountEmail: null,\n        cartId: null,\n        accountDropdownView: null\n    };\n    const [userState, dispatch] = useReducer(factory(), initialState);\n\n    const { isSignedIn, currentUser } = userState;\n\n    // Storage as used by Peregrine components\n    const storage = new BrowserPersistence();\n\n    useEffect(() => {\n        if (!isSignedIn) {\n            mse && mse.context.setShopper({ shopperId: 'guest' });\n            dataLayerUtils.pushData({ user: null });\n        } else if (isSignedIn && currentUser && currentUser.email !== '') {\n            mse && mse.context.setShopper({ shopperId: 'logged-in' });\n            dataLayerUtils.pushData({ user: currentUser });\n        }\n    }, [isSignedIn, currentUser]);\n\n    const setToken = token => {\n        setUserCookie(token);\n        dataLayerUtils.pushEvent('cif:userSignIn');\n        mse && mse.context.setShopper({ shopperId: 'logged-in' });\n        mse && mse.publish.signIn();\n\n        storage.setItem('signin_token', token, 3600);\n\n        dispatch({ type: 'setToken', token });\n    };\n\n    const setError = error => {\n        dispatch({ type: 'error', error: parseError(error) });\n    };\n\n    const setCustomerCart = cartId => {\n        dispatch({ type: 'setCartId', cartId });\n    };\n\n    const signOut = async () => {\n        dataLayerUtils.pushEvent('cif:userSignOut', null, { user: null });\n        mse && mse.context.setShopper({ shopperId: 'guest' });\n        mse && mse.publish.signOut();\n\n        storage.removeItem('signin_token');\n        await clearCartId();\n\n        await signOutUserAction({ revokeCustomerToken, setCartCookie, setUserCookie, dispatch });\n    };\n\n    const resetCustomerCart = async fetchCustomerCartQuery => {\n        await resetCustomerCartAction({ fetchCustomerCartQuery, dispatch });\n    };\n\n    const getUserDetails = useCallback(async () => {\n        try {\n            const { data: customerData } = await fetchCustomerDetails({ fetchPolicy: 'no-cache' });\n            dispatch({ type: 'setUserDetails', userDetails: customerData.customer });\n        } catch (error) {\n            dispatch({ type: 'error', error });\n        }\n    }, [fetchCustomerDetails]);\n\n    const toggleAccountDropdown = toggle => {\n        dispatch({ type: 'toggleAccountDropdown', toggle });\n    };\n\n    const showSignIn = () => {\n        dispatch({ type: 'changeAccountDropdownView', view: 'SIGN_IN' });\n    };\n\n    const showMyAccount = () => {\n        dispatch({ type: 'changeAccountDropdownView', view: 'MY_ACCOUNT' });\n    };\n\n    const showForgotPassword = () => {\n        dispatch({ type: 'changeAccountDropdownView', view: 'FORGOT_PASSWORD' });\n    };\n\n    const showCreateAccount = () => {\n        dispatch({ type: 'changeAccountDropdownView', view: 'CREATE_ACCOUNT' });\n    };\n\n    const showAccountCreated = () => {\n        dispatch({ type: 'changeAccountDropdownView', view: 'ACCOUNT_CREATED' });\n    };\n\n    const showChangePassword = () => {\n        dispatch({ type: 'changeAccountDropdownView', view: 'CHANGE_PASSWORD' });\n    };\n\n    const deleteAddress = async address => {\n        await deleteAddressAction({ deleteCustomerAddress, address, dispatch });\n    };\n\n    const { children } = props;\n    const contextValue = [\n        userState,\n        {\n            dispatch,\n            setToken,\n            setError,\n            signOut,\n            setCustomerCart,\n            getUserDetails,\n            resetCustomerCart,\n            toggleAccountDropdown,\n            showSignIn,\n            showMyAccount,\n            showForgotPassword,\n            showCreateAccount,\n            showAccountCreated,\n            showChangePassword,\n            deleteAddress\n        }\n    ];\n    return <UserContext.Provider value={contextValue}>{children}</UserContext.Provider>;\n};\n\nUserContextProvider.propTypes = {\n    reducerFactory: func,\n    initialState: object\n};\nexport default UserContextProvider;\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const useUserContext = () => useContext(UserContext);\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation(\n        $id: Int!\n        $city: String\n        $company: String\n        $country_code: CountryCodeEnum\n        $default_billing: Boolean\n        $default_shipping: Boolean\n        $firstname: String\n        $lastname: String\n        $postcode: String\n        $region: CustomerAddressRegionInput\n        $street: [String]\n        $telephone: String\n    ) {\n        updateCustomerAddress(\n            id: $id\n            input: {\n                city: $city\n                company: $company\n                country_code: $country_code\n                default_billing: $default_billing\n                default_shipping: $default_shipping\n                firstname: $firstname\n                lastname: $lastname\n                postcode: $postcode\n                region: $region\n                street: $street\n                telephone: $telephone\n            }\n        ) {\n            id\n            city\n            company\n            country_code\n            default_billing\n            default_shipping\n            firstname\n            lastname\n            postcode\n            region {\n                region_code\n            }\n            street\n            telephone\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation(\n        $city: String\n        $company: String\n        $country_code: CountryCodeEnum\n        $default_billing: Boolean\n        $default_shipping: Boolean\n        $firstname: String\n        $lastname: String\n        $postcode: String\n        $region: CustomerAddressRegionInput\n        $street: [String]\n        $telephone: String\n    ) {\n        createCustomerAddress(\n            input: {\n                city: $city\n                company: $company\n                country_code: $country_code\n                default_billing: $default_billing\n                default_shipping: $default_shipping\n                firstname: $firstname\n                lastname: $lastname\n                postcode: $postcode\n                region: $region\n                street: $street\n                telephone: $telephone\n            }\n        ) {\n            id\n            city\n            company\n            country_code\n            default_billing\n            default_shipping\n            firstname\n            lastname\n            postcode\n            region {\n                region_code\n            }\n            street\n            telephone\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useState } from 'react';\nimport { useUserContext } from '../../context/UserContext';\nimport { useMutation } from '@apollo/client';\n\nimport { useCountries } from '../../utils/hooks';\nimport { createAddress, updateAddress } from '../../actions/user';\n\nimport MUTATION_UPDATE_CUSTOMER_ADDRESS from '../../queries/mutation_update_customer_address.graphql';\nimport MUTATION_CREATE_CUSTOMER_ADDRESS from '../../queries/mutation_create_customer_address.graphql';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const useAddressForm = () => {\n    const [userState, { dispatch }] = useUserContext();\n    const { countries } = useCountries();\n    const [inProgress, setInProgress] = useState(false);\n\n    const [createCustomerAddress] = useMutation(MUTATION_CREATE_CUSTOMER_ADDRESS);\n    const [updateCustomerAddress] = useMutation(MUTATION_UPDATE_CUSTOMER_ADDRESS);\n\n    let errorMessage = '';\n    if (userState.addressFormError && userState.addressFormError.length > 0) {\n        errorMessage = userState.addressFormError;\n    }\n\n    const findSavedAddress = address => {\n        return address ? userState.currentUser.addresses.find(item => isSameAddress(item, address)) : null;\n    };\n\n    const getNewAddress = () => {\n        return {\n            city: '',\n            firstname: '',\n            lastname: '',\n            postcode: '',\n            region_code: '',\n            save_in_address_book: false,\n            street0: '',\n            telephone: ''\n        };\n    };\n\n    const getRegionCode = address => {\n        return (address.region && (address.region.region_code || address.region.code)) || address.region_code;\n    };\n\n    const getRegionId = (countries, countryCode, regionCode) => {\n        const region =\n            countries &&\n            countries\n                .filter(country => country.id == countryCode && country.available_regions)\n                .map(country => country.available_regions.find(region => region.code == regionCode));\n        return region && region[0] ? region[0].id : null;\n    };\n\n    const handleSubmit = async formValues => {\n        setInProgress(true);\n\n        const variables = {\n            region: {\n                region_code: formValues.region_code,\n                region_id: getRegionId(countries, formValues.country_code, formValues.region_code)\n            },\n            default_billing: formValues.default_shipping,\n            ...formValues\n        };\n\n        let resetFields;\n        if (formValues.default_shipping) {\n            resetFields = {\n                default_shipping: false,\n                default_billing: false\n            };\n        }\n\n        if (userState.updateAddress) {\n            variables.id = userState.updateAddress.id;\n            updateAddress({ updateCustomerAddress, variables, resetFields, dispatch });\n        } else {\n            createAddress({ createCustomerAddress, variables, resetFields, dispatch });\n        }\n\n        setInProgress(false);\n    };\n\n    const handleCancel = () => {\n        dispatch({ type: 'clearAddressFormError' });\n        if (userState.updateAddress) {\n            dispatch({ type: 'endEditingAddress' });\n        }\n        dispatch({ type: 'closeAddressForm' });\n    };\n\n    const isSameAddress = (address1, address2) => {\n        return (\n            address1.firstname === address2.firstname &&\n            address1.lastname === address2.lastname &&\n            address1.street.join(' ') === address2.street.join(' ') &&\n            address1.city === address2.city &&\n            address1.country_code === address2.country_code &&\n            getRegionCode(address1) === getRegionCode(address2) &&\n            address1.postcode === address2.postcode &&\n            address1.telephone === address2.telephone\n        );\n    };\n\n    const parseAddress = (address, email) => {\n        let result = {\n            ...address,\n            region_code: getRegionCode(address),\n            country_code: address.country_code || address.country.code\n        };\n        if (email) {\n            result.email = email;\n        }\n        return result;\n    };\n\n    const parseAddressFormValues = address => {\n        const fields = [\n            'city',\n            'default_shipping',\n            'email',\n            'firstname',\n            'lastname',\n            'postcode',\n            'region_code',\n            'country_code',\n            'region',\n            'save_in_address_book',\n            'street',\n            'telephone'\n        ];\n\n        return fields.reduce((acc, key) => {\n            if (address && key in address) {\n                // Convert street from array to flat strings\n                if (key === 'street') {\n                    address[key].forEach((v, i) => (acc[`street${i}`] = v));\n                    return acc;\n                }\n                // Convert region from object to region_code string, region object returned in different graphql\n                // endpoints has different shape, so we have to check both 'region_code' and 'code' to get the\n                // value of the region code\n                if (key === 'region') {\n                    acc['region_code'] = address[key].region_code || address[key].code;\n                    return acc;\n                }\n                acc[key] = address[key];\n            }\n            return acc;\n        }, {});\n    };\n\n    return {\n        countries,\n        errorMessage,\n        findSavedAddress,\n        getNewAddress,\n        getRegionCode,\n        getRegionId,\n        handleSubmit,\n        handleCancel,\n        inProgress,\n        isSameAddress,\n        parseAddress,\n        parseAddressFormValues,\n        updateAddress: userState.updateAddress\n    };\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { createContext, useContext, useReducer } from 'react';\nimport { bool, func, object, shape, string } from 'prop-types';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const initialCheckoutState = {\n    flowState: 'cart',\n    order: null,\n    editing: null,\n    shippingAddress: null,\n    billingAddress: null,\n    billingAddressSameAsShippingAddress: true,\n    isEditingNewAddress: false,\n    shippingMethod: null,\n    paymentMethod: null,\n    braintreeToken: false\n};\n\nexport const checkoutReducer = (state, action) => {\n    switch (action.type) {\n        case 'beginCheckout':\n            return {\n                ...state,\n                flowState: 'form'\n            };\n        case 'cancelCheckout':\n            return {\n                ...state,\n                flowState: 'cart'\n            };\n        case 'placeOrder':\n            return {\n                ...state,\n                order: action.order,\n                flowState: 'receipt',\n                editing: 'receipt'\n            };\n        case 'reset':\n            return {\n                ...initialCheckoutState\n            };\n        case 'setEditing':\n            return {\n                ...state,\n                editing: action.editing\n            };\n        case 'endEditing':\n            return {\n                ...state,\n                editing: null,\n                isEditingNewAddress: false\n            };\n        case 'setShippingAddress':\n            return {\n                ...state,\n                shippingAddress: action.shippingAddress,\n                editing: null,\n                isEditingNewAddress: false\n            };\n        case 'setShippingAddressEmail':\n            return {\n                ...state,\n                shippingAddress: {\n                    ...state.shippingAddress,\n                    email: action.email\n                }\n            };\n        case 'setBillingAddress':\n            return {\n                ...state,\n                billingAddress: action.billingAddress,\n                editing: null,\n                isEditingNewAddress: false\n            };\n        case 'setBillingAddressEmail':\n            return {\n                ...state,\n                billingAddress: {\n                    ...state.billingAddress,\n                    email: action.email\n                }\n            };\n        case 'setBillingAddressSameAsShippingAddress':\n            return {\n                ...state,\n                billingAddressSameAsShippingAddress: action.same\n            };\n        case 'setIsEditingNewAddress':\n            return {\n                ...state,\n                isEditingNewAddress: action.editing\n            };\n        case 'setShippingMethod':\n            return {\n                ...state,\n                shippingMethod: action.shippingMethod,\n                editing: null\n            };\n        case 'setPaymentMethod':\n            return {\n                ...state,\n                paymentMethod: action.paymentMethod,\n                editing: null\n            };\n        case 'setBraintreeToken':\n            return {\n                ...state,\n                braintreeToken: action.token\n            };\n\n        default:\n            return state;\n    }\n};\n\nexport const CheckoutContext = createContext();\n\nexport const CheckoutProvider = props => {\n    const reducer = props.reducer || checkoutReducer;\n    const initialState = props.initialState || initialCheckoutState;\n    return (\n        <CheckoutContext.Provider value={useReducer(reducer, initialState)}>{props.children}</CheckoutContext.Provider>\n    );\n};\n\nCheckoutProvider.propTypes = {\n    reducer: func,\n    initialState: shape({\n        flowState: string.isRequired,\n        order: object,\n        editing: string,\n        shippingAddress: object,\n        billingAddress: object,\n        billingAddressSameAsShippingAddress: bool,\n        isEditingNewAddress: bool,\n        shippingMethod: object,\n        paymentMethod: object\n    })\n};\n\nexport const useCheckoutState = () => useContext(CheckoutContext);\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation(\n        $cartId: String!\n        $city: String!\n        $company: String\n        $country_code: String!\n        $firstname: String!\n        $lastname: String!\n        $postcode: String\n        $region_code: String\n        $save_in_address_book: Boolean\n        $street: [String]!\n        $telephone: String!\n    ) {\n        setShippingAddressesOnCart(\n            input: {\n                cart_id: $cartId\n                shipping_addresses: [\n                    {\n                        address: {\n                            city: $city\n                            company: $company\n                            country_code: $country_code\n                            firstname: $firstname\n                            lastname: $lastname\n                            postcode: $postcode\n                            region: $region_code\n                            save_in_address_book: $save_in_address_book\n                            street: $street\n                            telephone: $telephone\n                        }\n                    }\n                ]\n            }\n        ) {\n            cart {\n                shipping_addresses {\n                    available_shipping_methods {\n                        carrier_code\n                        carrier_title\n                        method_code\n                        method_title\n                    }\n                    city\n                    company\n                    country {\n                        code\n                    }\n                    firstname\n                    lastname\n                    postcode\n                    region {\n                        code\n                    }\n                    street\n                    telephone\n                }\n            }\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useMutation } from '@apollo/client';\n\nimport { useAddressForm } from '../AddressForm/useAddressForm';\nimport { useAwaitQuery, useStorefrontEvents } from '../../utils/hooks';\nimport { useCartState } from '../Minicart/cartContext';\nimport { useCheckoutState } from './checkoutContext';\nimport { useUserContext } from '../../context/UserContext';\n\nimport { getCartDetails } from '../../actions/cart';\n\nimport MUTATION_SET_SHIPPING_ADDRESS from '../../queries/mutation_set_shipping_address.graphql';\nimport CART_DETAILS_QUERY from '../../queries/query_cart_details.graphql';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport default () => {\n    const { parseAddress, isSameAddress } = useAddressForm();\n    const [{ cartId, cart }, cartDispatch] = useCartState();\n    const [{ shippingAddress }, dispatch] = useCheckoutState();\n    const [{ currentUser, isSignedIn }] = useUserContext();\n    const [setShippingAddressesOnCart] = useMutation(MUTATION_SET_SHIPPING_ADDRESS);\n    const cartDetailsQuery = useAwaitQuery(CART_DETAILS_QUERY);\n    const mse = useStorefrontEvents();\n\n    const beginCheckout = async () => {\n        cartDispatch({ type: 'beginLoading' });\n\n        if (\n            cart &&\n            ((cart.shipping_addresses && cart.shipping_addresses[0]) || (cart.is_virtual && cart.billing_address))\n        ) {\n            await getCartDetails({ cartDetailsQuery, cartId, dispatch: cartDispatch });\n\n            const cartShippingAddress = cart.shipping_addresses && cart.shipping_addresses[0];\n            const cartBillingAddress = cart.billing_address;\n            if (cartShippingAddress && cartBillingAddress && !isSameAddress(cartShippingAddress, cartBillingAddress)) {\n                dispatch({ type: 'setBillingAddressSameAsShippingAddress', same: false });\n            }\n        } else if (isSignedIn && currentUser.addresses.length > 0 && cart && !cart.is_virtual && !shippingAddress) {\n            const address = currentUser.addresses.find(address => address.default_shipping) || currentUser.addresses[0];\n            const addressVariables = { variables: { cartId, country_code: 'US', ...parseAddress(address) } };\n            await setShippingAddressesOnCart(addressVariables);\n            await getCartDetails({ cartDetailsQuery, dispatch: cartDispatch, cartId });\n        }\n\n        mse && mse.publish.initiateCheckout();\n\n        cartDispatch({ type: 'endLoading' });\n        dispatch({ type: 'beginCheckout' });\n    };\n\n    return { beginCheckout };\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { bool, func } from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport Button from '../Button';\nimport Icon from '../Icon';\nimport { Lock as LockIcon } from 'react-feather';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst CheckoutButton = ({ disabled, onClick }) => {\n    const intl = useIntl();\n\n    return (\n        <Button priority=\"high\" disabled={disabled} onClick={onClick}>\n            <Icon src={LockIcon} size={16} />\n            <span>{intl.formatMessage({ id: 'checkout:checkout', defaultMessage: 'Checkout' })}</span>\n        </Button>\n    );\n};\n\nCheckoutButton.propTypes = {\n    disabled: bool,\n    onClick: func\n};\n\nexport default CheckoutButton;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { bool, shape, string } from 'prop-types';\n\nimport useCart from './useCart';\n\nimport CheckoutButton from './checkoutButton';\nimport classes from './cart.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Cart = props => {\n    const { ready, submitting } = props;\n    const { beginCheckout } = useCart();\n\n    const disabled = submitting || !ready;\n\n    return (\n        <div className={classes.root}>\n            <CheckoutButton disabled={disabled} onClick={beginCheckout} />\n        </div>\n    );\n};\n\nCart.propTypes = {\n    classes: shape({\n        root: string\n    }),\n    ready: bool.isRequired,\n    submitting: bool.isRequired\n};\n\nexport default Cart;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { Fragment } from 'react';\nimport { shape, string } from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport { useCheckoutState } from './checkoutContext';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst PaymentMethodSummary = props => {\n    const { classes } = props;\n    const [{ paymentMethod }] = useCheckoutState();\n    const intl = useIntl();\n\n    if (!paymentMethod) {\n        return (\n            <span className={classes.informationPrompt}>\n                {intl.formatMessage({\n                    id: 'checkout:add-billing-information',\n                    defaultMessage: 'Add Billing Information'\n                })}\n            </span>\n        );\n    }\n\n    return (\n        <Fragment>\n            <strong className={classes.paymentDisplayPrimary}>{paymentMethod.title}</strong>\n            <br />\n            <span className={classes.paymentDisplaySecondary}>{paymentMethod.description}</span>\n        </Fragment>\n    );\n};\n\nPaymentMethodSummary.propTypes = {\n    classes: shape({\n        informationPrompt: string,\n        paymentDisplayPrimary: string,\n        paymentDisplaySecondary: string\n    })\n};\n\nexport default PaymentMethodSummary;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { Fragment } from 'react';\nimport { shape, string } from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport { useCheckoutState } from './checkoutContext';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst ShippingAddressSummary = props => {\n    const { classes } = props;\n    const [{ shippingAddress }] = useCheckoutState();\n    const intl = useIntl();\n\n    if (!shippingAddress) {\n        return (\n            <span className={classes.informationPrompt}>\n                {intl.formatMessage({\n                    id: 'checkout:add-shipping-information',\n                    defaultMessage: 'Add Shipping Information'\n                })}\n            </span>\n        );\n    }\n\n    const name = `${shippingAddress.firstname} ${shippingAddress.lastname}`;\n    const street = shippingAddress.street.join(' ');\n\n    return (\n        <Fragment>\n            <strong>{name}</strong>\n            <br />\n            <span>{street}</span>\n        </Fragment>\n    );\n};\n\nShippingAddressSummary.propTypes = {\n    classes: shape({\n        informationPrompt: string\n    })\n};\n\nexport default ShippingAddressSummary;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { Fragment } from 'react';\nimport { shape, string } from 'prop-types';\nimport { useCheckoutState } from './checkoutContext';\nimport { useIntl } from 'react-intl';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst ShippingMethodSummary = props => {\n    const { classes } = props;\n    const [{ shippingMethod }] = useCheckoutState();\n    const intl = useIntl();\n\n    if (!shippingMethod) {\n        return (\n            <span className={classes.informationPrompt}>\n                {intl.formatMessage({\n                    id: 'checkout:specify-shipping-method',\n                    defaultMessage: 'Specify Shipping Method'\n                })}\n            </span>\n        );\n    }\n\n    return (\n        <Fragment>\n            <strong>{shippingMethod.carrier_title}</strong>\n        </Fragment>\n    );\n};\n\nShippingMethodSummary.propTypes = {\n    classes: shape({\n        informationPrompt: string\n    })\n};\n\nexport default ShippingMethodSummary;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { bool, node, shape, string } from 'prop-types';\nimport { Edit2 as EditIcon } from 'react-feather';\n\nimport Icon from '../Icon';\nimport classes from './section.css';\n\nconst editIconAttrs = {\n    color: 'black',\n    width: 18\n};\nconst EDIT_ICON = <Icon src={EditIcon} attrs={editIconAttrs} />;\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Section = props => {\n    const { children, label, showEditIcon = false, ...restProps } = props;\n\n    const icon = showEditIcon ? EDIT_ICON : null;\n\n    return (\n        <button className={classes.root} {...restProps}>\n            <span className={classes.content}>\n                <span className={classes.label}>\n                    <span>{label}</span>\n                </span>\n                <span className={classes.summary}>{children}</span>\n                <span className={classes.icon}>{icon}</span>\n            </span>\n        </button>\n    );\n};\n\nSection.propTypes = {\n    classes: shape({\n        content: string,\n        icon: string,\n        label: string,\n        root: string,\n        summary: string\n    }),\n    label: node,\n    showEditIcon: bool\n};\n\nexport default Section;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation($cartId: String!) {\n        placeOrder(input: { cart_id: $cartId }) {\n            order {\n                order_id\n            }\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    query {\n        customerCart {\n            id\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useMutation } from '@apollo/client';\nimport { useState } from 'react';\n\nimport MUTATION_PLACE_ORDER from '../../queries/mutation_place_order.graphql';\nimport QUERY_CUSTOMER_CART from '../../queries/query_customer_cart.graphql';\n\nimport { useAddressForm } from '../AddressForm/useAddressForm';\nimport { useAwaitQuery, useStorefrontEvents } from '../../utils/hooks';\nimport { useCartState } from '../Minicart/cartContext';\nimport { useCheckoutState } from './checkoutContext';\nimport { useUserContext } from '../../context/UserContext';\nimport * as dataLayerUtils from '../../utils/dataLayerUtils';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport default () => {\n    const [\n        { shippingAddress, billingAddress, billingAddressSameAsShippingAddress, shippingMethod, paymentMethod },\n        checkoutDispatch\n    ] = useCheckoutState();\n    const [{ cart, cartId }, cartDispatch] = useCartState();\n    const [{ isSignedIn }, { resetCustomerCart }] = useUserContext();\n    const fetchCustomerCartQuery = useAwaitQuery(QUERY_CUSTOMER_CART);\n    const { findSavedAddress } = useAddressForm();\n\n    const [placeOrder] = useMutation(MUTATION_PLACE_ORDER);\n    const [inProgress, setInProgress] = useState(false);\n\n    const mse = useStorefrontEvents();\n\n    const editShippingAddress = address => {\n        if (!findSavedAddress(address)) {\n            checkoutDispatch({ type: 'setIsEditingNewAddress', editing: true });\n        }\n        checkoutDispatch({ type: 'setEditing', editing: 'address' });\n    };\n\n    const editBillingInformation = address => {\n        if (!findSavedAddress(address) || billingAddressSameAsShippingAddress) {\n            checkoutDispatch({ type: 'setIsEditingNewAddress', editing: true });\n        }\n        checkoutDispatch({ type: 'setEditing', editing: 'paymentMethod' });\n    };\n\n    const submitOrder = async () => {\n        setInProgress(true);\n        // we set the progress to `false` *before* dispatching because the component\n        // will be unmounted and the `setInProgress` call will trigger a React warning\n        try {\n            const { data } = await placeOrder({ variables: { cartId } });\n            checkoutDispatch({ type: 'placeOrder', order: data.placeOrder.order });\n\n            const {\n                placeOrder: {\n                    order: { order_id }\n                }\n            } = data;\n\n            const {\n                email,\n                applied_coupon,\n                prices: {\n                    subtotal_excluding_tax: { value: subtotalExcludingTax },\n                    subtotal_including_tax: { value: subtotalIncludingTax },\n                    grand_total: { currency, value: priceTotal }\n                },\n                selected_payment_method: { code: paymentCode, title: paymentName },\n                items\n            } = cart;\n\n            dataLayerUtils.pushEvent('cif:placeOrder', {\n                'xdm:purchaseOrderNumber': order_id,\n                'xdm:currencyCode': currency,\n                'xdm:priceTotal': priceTotal,\n                'xdm:payments': [\n                    {\n                        'xdm:paymentAmount': priceTotal,\n                        'xdm:paymentType': paymentCode,\n                        'xdm:currencyCode': currency\n                    }\n                ],\n                'xdm:products': await Promise.all(\n                    items.map(async item => {\n                        const {\n                            product: { sku },\n                            quantity\n                        } = item;\n                        return {\n                            '@id': await dataLayerUtils.generateDataLayerId('product', sku),\n                            'xdm:SKU': sku,\n                            'xdm:quantity': quantity\n                        };\n                    })\n                )\n            });\n\n            mse &&\n                mse.context.setOrder({\n                    appliedCouponCode: applied_coupon ? applied_coupon.code : '',\n                    email: email,\n                    grandTotal: priceTotal,\n                    orderId: order_id,\n                    otherTax: priceTotal - subtotalIncludingTax,\n                    paymentMethodCode: paymentCode,\n                    paymentMethodName: paymentName,\n                    salesTax: subtotalIncludingTax - subtotalExcludingTax,\n                    subtotalExcludingTax: subtotalExcludingTax,\n                    subtotalIncludingTax: subtotalIncludingTax\n                });\n            mse && mse.publish.placeOrder();\n\n            // if user is signed in reset the cart\n            if (isSignedIn) {\n                resetCustomerCart(fetchCustomerCartQuery);\n            }\n            cartDispatch({ type: 'reset' });\n            return data;\n        } catch (error) {\n            console.error(error);\n            cartDispatch({ type: 'error', error: error.toString() });\n        } finally {\n            setInProgress(false);\n        }\n    };\n\n    return [\n        { shippingAddress, billingAddress, shippingMethod, paymentMethod, inProgress, cart },\n        { editShippingAddress, editBillingInformation, placeOrder: submitOrder, checkoutDispatch }\n    ];\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { Fragment } from 'react';\nimport { shape, string } from 'prop-types';\n\nimport Price from '../Price';\nimport { useIntl } from 'react-intl';\n\nimport PaymentMethodSummary from './paymentMethodSummary';\nimport ShippingAddressSummary from './shippingAddressSummary';\nimport ShippingMethodSummary from './shippingMethodSummary';\nimport LoadingIndicator from '../LoadingIndicator';\nimport Section from './section';\nimport Button from '../Button';\nimport useOverview from './useOverview';\n\n/**\n * The Overview component renders summaries for each section of the editable\n * form.\n *\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Overview = props => {\n    const { classes } = props;\n    const intl = useIntl();\n\n    const [\n        { billingAddress, shippingAddress, shippingMethod, paymentMethod, cart, inProgress },\n        { editShippingAddress, editBillingInformation, placeOrder, checkoutDispatch }\n    ] = useOverview();\n\n    const ready = (cart.is_virtual && paymentMethod) || (shippingAddress && paymentMethod && shippingMethod);\n\n    if (inProgress) {\n        return <LoadingIndicator message=\"Placing order\"></LoadingIndicator>;\n    }\n    const submitOrder = async () => {\n        await placeOrder(cart.id);\n    };\n\n    return (\n        <Fragment>\n            <div className={classes.body}>\n                {!cart.is_virtual && (\n                    <Section\n                        label={intl.formatMessage({ id: 'checkout:ship-to', defaultMessage: 'Ship To' })}\n                        onClick={() => editShippingAddress(shippingAddress)}\n                        showEditIcon={!!shippingAddress}>\n                        <ShippingAddressSummary classes={classes} />\n                    </Section>\n                )}\n                <Section\n                    label={intl.formatMessage({ id: 'checkout:pay-with', defaultMessage: 'Pay With' })}\n                    onClick={() => editBillingInformation(billingAddress)}\n                    showEditIcon={!!paymentMethod}\n                    disabled={!cart.is_virtual && !shippingAddress}>\n                    <PaymentMethodSummary classes={classes} />\n                </Section>\n                {!cart.is_virtual && (\n                    <Section\n                        label={intl.formatMessage({ id: 'checkout:use', defaultMessage: 'Use' })}\n                        onClick={() => checkoutDispatch({ type: 'setEditing', editing: 'shippingMethod' })}\n                        showEditIcon={!!shippingMethod}\n                        disabled={!shippingAddress}>\n                        <ShippingMethodSummary classes={classes} />\n                    </Section>\n                )}\n                <Section label={intl.formatMessage({ id: 'checkout:total', defaultMessage: 'TOTAL' })}>\n                    <Price currencyCode={cart.prices.grand_total.currency} value={cart.prices.grand_total.value || 0} />\n                    <br />\n                    <span>{cart.items.length} Items</span>\n                </Section>\n            </div>\n            <div className={classes.footer}>\n                <Button onClick={() => checkoutDispatch({ type: 'cancelCheckout' })}>\n                    {' '}\n                    {intl.formatMessage({ id: 'checkout:back-to-cart', defaultMessage: 'Back to cart' })}\n                </Button>\n\n                <Button priority=\"high\" disabled={!ready} onClick={submitOrder}>\n                    {intl.formatMessage({ id: 'checkout:confirm-order', defaultMessage: 'Confirm Order' })}\n                </Button>\n            </div>\n        </Fragment>\n    );\n};\n\nOverview.propTypes = {\n    classes: shape({\n        body: string,\n        footer: string\n    })\n};\n\nexport default Overview;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nconst SUCCESS = undefined;\n\nexport const hasLengthAtLeast = (value, values, minimumLength) => {\n    if (!value || value.length < minimumLength) {\n        return `Must contain at least ${minimumLength} character(s).`;\n    }\n\n    return SUCCESS;\n};\n\nexport const hasLengthAtMost = (value, values, maximumLength) => {\n    if (value && value.length > maximumLength) {\n        return `Must not exceed ${maximumLength} character(s).`;\n    }\n\n    return SUCCESS;\n};\n\nexport const hasLengthExactly = (value, values, length) => {\n    if (value && value.length !== length) {\n        return `Must contain exactly ${length} character(s).`;\n    }\n\n    return SUCCESS;\n};\n\nexport const isRequired = value => {\n    return (value || '').trim() ? SUCCESS : 'The field is required.';\n};\n\nexport const validateEmail = value => {\n    const regex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n    return regex.test(value) ? SUCCESS : 'Please enter a valid email address (Ex: johndoe@domain.com).';\n};\n\nexport const validateRegionCode = (value, values, countries) => {\n    const selectedCountry = values.countryCode;\n    if (selectedCountry !== 'US') {\n        // not validating the state for countries other than US\n        // this is actually more complex since on the Magento side\n        // you can define this in the store configuration\n        // ...but we don't read the store configuration now.\n        return SUCCESS;\n    }\n    if (!value || value.length === 0) {\n        return 'This field is mandatory';\n    }\n\n    let lengthValidation = hasLengthExactly(value, values, 2);\n    if (lengthValidation) {\n        return lengthValidation;\n    }\n\n    const country = countries.find(({ id }) => id === 'US');\n\n    const { available_regions: regions } = country;\n\n    if (!(Array.isArray(regions) && regions.length)) {\n        return 'Country \"US\" does not contain any available regions.';\n    }\n    const region = regions.find(({ code }) => code === value);\n    if (!region) {\n        return `State \"${value}\" is not an valid state abbreviation.`;\n    }\n\n    return SUCCESS;\n};\n\nexport const validatePassword = value => {\n    const count = {\n        lower: 0,\n        upper: 0,\n        digit: 0,\n        special: 0\n    };\n\n    for (const char of value) {\n        if (/[a-z]/.test(char)) count.lower++;\n        else if (/[A-Z]/.test(char)) count.upper++;\n        else if (/\\d/.test(char)) count.digit++;\n        else if (/\\S/.test(char)) count.special++;\n    }\n\n    if (Object.values(count).filter(Boolean).length < 3) {\n        return 'A password must contain at least 3 of the following: lowercase, uppercase, digits, special characters.';\n    }\n\n    return SUCCESS;\n};\n\nexport const validateConfirmPassword = (value, values, passwordKey = 'password') => {\n    return value === values[passwordKey] ? SUCCESS : 'Passwords must match.';\n};\n\nexport const isNotEqualToField = (value, values, otherField) => {\n    return value !== values[otherField] ? SUCCESS : `${otherField} must be different`;\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\n/**\n * The function purpose is to group validation callbacks into a chain within single callback function.\n *\n * The single callback function should be passed as `validation` prop to an input component. It's being\n * called by the React Controller on a form submit.\n * The `callbacks` param is the array contains validators. Each validator should be either function or array. In case of a\n * validator is a function it is called the same way as React Controller does, with a field `value` and a form `values` params. If\n * the validator is an array, this means that it is extended validator which requires additional param for configuration.\n * The first index of that array should be a extended validator function, the second index is extended param, which is needed for\n * that function. So the function is called with three params on the form submit, with a field `value`, a form `values`\n * and an `extended param`.\n *\n * Example usage of the function:\n *\n * <input validate={combine([\n * foo\n * ])} .../>\n *\n * foo - validation function\n * It will be called on form submitting within chain as:\n * `foo(value, values)`\n *\n * Example usage of the function with extended callback:\n *\n * <input validate={combine([\n * [foo, bar]\n * ])} .../>\n *\n * foo - extended validator\n * bar - additional param\n * It will be called on form submitting within chain as:\n * `foo(value, values, bar)`\n *\n * Each callback being called one after another, according to their index in callbacks array, if one item returned the error\n * message, validation is failed, and rest validator are not supposed to be called.\n *\n * @param {Array} callbacks\n * @return {function(value, values): *}\n */\nexport default callbacks => {\n    if (callbacks == null || !Array.isArray(callbacks)) {\n        throw new Error('Expected `callbacks` to be array.');\n    }\n\n    return (value, values) => {\n        let result = null;\n\n        for (let i = 0; i < callbacks.length; i++) {\n            const callback = callbacks[i];\n\n            if (callback == null || (!Array.isArray(callback) && typeof callback !== 'function')) {\n                throw new Error('Expected `callbacks[' + i + ']` to be array or function.');\n            }\n\n            if (Array.isArray(callback)) {\n                const [extendedCallback, extendedParam] = callback;\n\n                if (typeof extendedCallback !== 'function') {\n                    throw new Error('Expected `callbacks[' + i + '][0]` to be function.');\n                }\n\n                result = extendedCallback(value, values, extendedParam);\n            } else {\n                result = callback(value, values);\n            }\n\n            if (result) {\n                break;\n            }\n        }\n\n        return result;\n    };\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useAddressForm } from './useAddressForm';\nimport { useCheckoutState } from '../Checkout/checkoutContext';\nimport { useUserContext } from '../../context/UserContext';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const useAddressSelect = (props = { initialAddress: undefined }) => {\n    const { initialAddress } = props;\n    const intl = useIntl();\n    const { findSavedAddress, getNewAddress, parseAddress, parseAddressFormValues } = useAddressForm();\n    const [, dispatch] = useCheckoutState();\n    const [{ currentUser }] = useUserContext();\n\n    const parseInitialAddressSelectValue = address => {\n        let initialValue = 0; // '0' is the value of option item 'New Address' in address select\n        const foundAddress = findSavedAddress(address);\n        return foundAddress ? foundAddress.id : initialValue;\n    };\n    const initialAddressId = initialAddress ? parseInitialAddressSelectValue(initialAddress) : 0;\n    const [selectedAddressId, setSelectedAddressId] = useState(initialAddressId);\n    const addressSelectNewAddressItem = {\n        label: intl.formatMessage({\n            id: 'checkout:address-form-address-select-new-address',\n            defaultMessage: 'New Address'\n        }),\n        value: 0\n    };\n    const addressSelectItems = currentUser.addresses.map(address => {\n        return {\n            label: address.street.join(' '),\n            value: address.id\n        };\n    });\n    addressSelectItems.unshift(addressSelectNewAddressItem);\n\n    const handleChangeAddressSelectInCheckout = (value, addressFormApi) => {\n        const newAddressItemValue = 0;\n        setSelectedAddressId(value);\n        if (newAddressItemValue == value) {\n            // clear the values of the form fields if the current select option item is 'New Address'\n            addressFormApi.setValues(getNewAddress());\n            dispatch({ type: 'setIsEditingNewAddress', editing: true });\n            return;\n        }\n\n        const address = currentUser.addresses.find(address => address.id == value);\n        // parse the \"GraphQL format\" address and normalize the properties (i.e. add the region_code on the same level as the rest of the props)\n        const parsedAddress = parseAddress(address);\n        // update form values by using formApi passed from <AddressForm> component, this is due to the fact that\n        // this is the proposed way to update values of fields in 'informed' form library\n        const parsedFormValues = parseAddressFormValues(parsedAddress);\n        addressFormApi.setValues(parsedFormValues);\n    };\n\n    return {\n        addressSelectItems,\n        selectedAddressId,\n        handleChangeAddressSelectInCheckout,\n        parseInitialAddressSelectValue\n    };\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { func, number } from 'prop-types';\n\nimport { useAddressSelect } from './useAddressSelect';\nimport Select from '../Select';\n\nimport classes from './addressSelect.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst AddressSelect = props => {\n    const { initialValue, onValueChange } = props;\n    const { addressSelectItems } = useAddressSelect();\n\n    return (\n        <div className={classes.root}>\n            <Select\n                items={addressSelectItems}\n                field=\"address_select\"\n                initialValue={initialValue}\n                onValueChange={onValueChange}\n            />\n        </div>\n    );\n};\n\nAddressSelect.propTypes = {\n    initialValue: number,\n    onValueChange: func\n};\n\nexport default AddressSelect;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { bool, node, shape, string } from 'prop-types';\nimport { BasicCheckbox, asField } from 'informed';\n\nimport { Message } from '../Field';\nimport Icon from '../Icon';\nimport { Check as CheckIcon } from 'react-feather';\nimport classes from './checkbox.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Checkbox = props => {\n    const { fieldState, id, label, message, ...rest } = props;\n    const { value: checked } = fieldState;\n\n    return (\n        <>\n            <label className={classes.root} htmlFor={id}>\n                <span className={classes.icon}>{checked && <Icon src={CheckIcon} size={18} />}</span>\n                <BasicCheckbox {...rest} className={classes.input} fieldState={fieldState} id={id} />\n                <span className={classes.label}>{label}</span>\n            </label>\n            <Message fieldState={fieldState}>{message}</Message>\n        </>\n    );\n};\n\nCheckbox.propTypes = {\n    classes: shape({\n        icon: string,\n        input: string,\n        label: string,\n        message: string,\n        root: string\n    }),\n    field: string.isRequired,\n    fieldState: shape({\n        value: bool\n    }).isRequired,\n    id: string,\n    label: node.isRequired,\n    message: node\n};\n\nexport default asField(Checkbox);\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './checkbox';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { Fragment } from 'react';\nimport { node, shape, string } from 'prop-types';\nimport { BasicText, asField } from 'informed';\n\nimport { FieldIcons, Message } from '../Field';\nimport classes from './textInput.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst TextInput = props => {\n    const { after, before, fieldState, message, ...rest } = props;\n\n    return (\n        <Fragment>\n            <FieldIcons after={after} before={before}>\n                <BasicText {...rest} fieldState={fieldState} className={classes.input} />\n            </FieldIcons>\n            <Message fieldState={fieldState}>{message}</Message>\n        </Fragment>\n    );\n};\n\nTextInput.propTypes = {\n    after: node,\n    before: node,\n    classes: shape({\n        input: string\n    }),\n    fieldState: shape({\n        value: string\n    }),\n    message: node\n};\n\nexport default asField(TextInput);\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './textInput';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { Form, useFieldState } from 'informed';\nimport { array, bool, func, object, shape, string, number } from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport Button from '../Button';\nimport Select from '../Select';\nimport classes from './addressForm.css';\nimport { validateEmail, isRequired } from '../../utils/formValidators';\nimport combine from '../../utils/combineValidators';\n\nimport { useAddressForm } from './useAddressForm';\n\nimport AddressSelect from './addressSelect';\nimport Checkbox from '../Checkbox';\nimport Field from '../Field';\nimport TextInput from '../TextInput';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst AddressForm = props => {\n    const { parseAddressFormValues } = useAddressForm({});\n    const [submitting, setIsSubmitting] = useState(false);\n    const {\n        cancel,\n        countries,\n        formErrorMessage,\n        formHeading,\n        isAddressInvalid,\n        invalidAddressMessage,\n        initialAddressSelectValue,\n        initialValues,\n        onAddressSelectValueChange,\n        showAddressSelect,\n        showDefaultAddressCheckbox,\n        showEmailInput,\n        showSaveInAddressBookCheckbox,\n        submit,\n        submitButtonLabel\n    } = props;\n    const validationMessage = isAddressInvalid ? invalidAddressMessage : null;\n    const errorMessage = formErrorMessage ? formErrorMessage : null;\n    const intl = useIntl();\n\n    const displayCountries = useMemo(() => {\n        if (!countries || countries.length === 0) {\n            return [];\n        }\n        return countries.map(country => {\n            return {\n                label: country['full_name_locale'],\n                value: country['id']\n            };\n        });\n    }, [countries]);\n\n    const handleSubmit = useCallback(\n        values => {\n            if (!values['region_code'] || values['region_code'].length === 0) {\n                // add an empty `region_code` value since\n                // the form doesn't provide one if you leave the field empty\n                values['region_code'] = '';\n            }\n            setIsSubmitting(true);\n            // Convert street back to array\n            submit({ ...values, street: [values.street0], street0: undefined });\n        },\n        [submit]\n    );\n\n    const Regions = () => {\n        const { value: countryCode } = useFieldState('country_code');\n        const country = countries.find(({ id }) => countryCode === id);\n\n        if (!country || !country.available_regions) {\n            return <TextInput id={classes.region_code} field=\"region_code\" />;\n        }\n\n        // US do not have regions with unique codes\n        const uniqueRegions = [...new Set(country.available_regions.map(item => item.code))];\n        const displayRegions = uniqueRegions.map(id => {\n            let entry = country.available_regions.find(({ code }) => code === id);\n            return {\n                value: entry.code,\n                label: entry.name\n            };\n        });\n\n        return (\n            <Select\n                id={classes.region_code}\n                field=\"region_code\"\n                items={[{ value: '', label: '' }, ...displayRegions]}\n                validate={isRequired}\n            />\n        );\n    };\n\n    return (\n        <Form className={classes.root} initialValues={parseAddressFormValues(initialValues)} onSubmit={handleSubmit}>\n            {({ formApi }) => (\n                <>\n                    <div className={classes.body}>\n                        <h2 className={classes.heading}>{formHeading}</h2>\n                        {showAddressSelect && (\n                            <div className={classes.address_select}>\n                                <Field\n                                    label={intl.formatMessage({\n                                        id: 'checkout:address-use-saved-address',\n                                        defaultMessage: 'Use Saved Address'\n                                    })}>\n                                    <AddressSelect\n                                        initialValue={initialAddressSelectValue}\n                                        onValueChange={value => onAddressSelectValueChange(value, formApi)}\n                                    />\n                                </Field>\n                            </div>\n                        )}\n                        <div className={classes.firstname}>\n                            <Field\n                                htmlFor={classes.firstname}\n                                label={intl.formatMessage({\n                                    id: 'checkout:address-firstname',\n                                    defaultMessage: 'First Name'\n                                })}>\n                                <TextInput\n                                    id={classes.firstname}\n                                    field=\"firstname\"\n                                    validateOnBlur\n                                    validate={isRequired}\n                                />\n                            </Field>\n                        </div>\n                        <div className={classes.lastname}>\n                            <Field\n                                htmlFor={classes.lastname}\n                                label={intl.formatMessage({\n                                    id: 'checkout:address-lastname',\n                                    defaultMessage: 'Last Name'\n                                })}>\n                                <TextInput\n                                    id={classes.lastname}\n                                    field=\"lastname\"\n                                    validateOnBlur\n                                    validate={isRequired}\n                                />\n                            </Field>\n                        </div>\n                        {showEmailInput && (\n                            <div className={classes.email}>\n                                <Field\n                                    htmlFor={classes.email}\n                                    label={intl.formatMessage({\n                                        id: 'checkout:address-email',\n                                        defaultMessage: 'E-Mail'\n                                    })}>\n                                    <TextInput\n                                        id={classes.email}\n                                        field=\"email\"\n                                        validateOnBlur\n                                        validate={combine([isRequired, validateEmail])}\n                                    />\n                                </Field>\n                            </div>\n                        )}\n                        <div className={classes.street0}>\n                            <Field\n                                htmlFor={classes.street0}\n                                label={intl.formatMessage({ id: 'checkout:address-street', defaultMessage: 'Street' })}>\n                                <TextInput id={classes.street0} field=\"street0\" validateOnBlur validate={isRequired} />\n                            </Field>\n                        </div>\n                        <div className={classes.city}>\n                            <Field\n                                htmlFor={classes.city}\n                                label={intl.formatMessage({ id: 'checkout:address-city', defaultMessage: 'City' })}>\n                                <TextInput id={classes.city} field=\"city\" validateOnBlur validate={isRequired} />\n                            </Field>\n                        </div>\n                        <div className={classes.country}>\n                            <Field\n                                htmlFor={classes.country}\n                                label={intl.formatMessage({ id: 'checkout:country', defaultMessage: 'Country' })}>\n                                <Select\n                                    id={classes.country}\n                                    field=\"country_code\"\n                                    items={displayCountries}\n                                    onChange={() => {\n                                        // reset the region_code field when we change the country\n                                        // otherwise the previous selected version would still be in the form state\n                                        formApi.setValue('region_code', '');\n                                    }}\n                                />\n                            </Field>\n                        </div>\n                        <div className={classes.region_code}>\n                            <Field\n                                htmlFor={classes.region_code}\n                                label={intl.formatMessage({ id: 'checkout:address-state', defaultMessage: 'State' })}>\n                                <Regions />\n                            </Field>\n                        </div>\n                        <div className={classes.postcode}>\n                            <Field\n                                htmlFor={classes.postcode}\n                                label={intl.formatMessage({ id: 'checkout:address-postcode', defaultMessage: 'ZIP' })}>\n                                <TextInput\n                                    id={classes.postcode}\n                                    field=\"postcode\"\n                                    validateOnBlur\n                                    validate={isRequired}\n                                />\n                            </Field>\n                        </div>\n                        <div className={classes.telephone}>\n                            <Field\n                                htmlFor={classes.telephone}\n                                label={intl.formatMessage({ id: 'checkout:address-phone', defaultMessage: 'Phone' })}>\n                                <TextInput\n                                    id={classes.telephone}\n                                    field=\"telephone\"\n                                    validateOnBlur\n                                    validate={isRequired}\n                                />\n                            </Field>\n                        </div>\n                        {showDefaultAddressCheckbox && (\n                            <div className={classes.default_shipping}>\n                                <Checkbox\n                                    id={classes.default_shipping}\n                                    label={intl.formatMessage({\n                                        id: 'checkout:address-default-address',\n                                        defaultMessage: 'Make my default address'\n                                    })}\n                                    field=\"default_shipping\"\n                                />\n                            </div>\n                        )}\n                        {showSaveInAddressBookCheckbox && (\n                            <div className={classes.save_in_address_book}>\n                                <Checkbox\n                                    id={classes.save_in_address_book}\n                                    label={intl.formatMessage({\n                                        id: 'checkout:address-save-in-address-book',\n                                        defaultMessage: 'Save in address book'\n                                    })}\n                                    field=\"save_in_address_book\"\n                                />\n                            </div>\n                        )}\n                        <div className={classes.validation}>{validationMessage}</div>\n                        <div className={classes.error}>{errorMessage}</div>\n                    </div>\n                    <div className={classes.footer}>\n                        <Button onClick={cancel}>\n                            {intl.formatMessage({ id: 'common:cancel', defaultMessage: 'Cancel' })}\n                        </Button>\n                        <Button type=\"submit\" priority=\"high\" disabled={submitting}>\n                            {submitButtonLabel}\n                        </Button>\n                    </div>\n                </>\n            )}\n        </Form>\n    );\n};\n\nAddressForm.propTypes = {\n    cancel: func.isRequired,\n    classes: shape({\n        body: string,\n        button: string,\n        city: string,\n        default_shipping: string,\n        email: string,\n        firstname: string,\n        footer: string,\n        heading: string,\n        lastname: string,\n        postcode: string,\n        root: string,\n        region_code: string,\n        street0: string,\n        telephone: string,\n        validation: string\n    }),\n    countries: array,\n    formErrorMessage: string,\n    formHeading: string,\n    invalidAddressMessage: string,\n    initialAddressSelectValue: number,\n    initialValues: object,\n    isAddressInvalid: bool,\n    onAddressSelectValueChange: func,\n    showAddressSelect: bool,\n    showDefaultAddressCheckbox: bool,\n    showEmailInput: bool,\n    showSaveInAddressBookCheckbox: bool,\n    submit: func.isRequired,\n    submitting: bool,\n    submitButtonLabel: string\n};\n\nAddressForm.defaultProps = {\n    initialAddressSelectValue: null,\n    initialValues: {},\n    showAddressSelect: false,\n    showDefaultAddressCheckbox: false,\n    showEmailInput: false,\n    showSaveInAddressBookCheckbox: false\n};\n\nexport default AddressForm;\n\n/*\nconst mockAddress = {\n    country_id: 'US',\n    firstname: 'Veronica',\n    lastname: 'Costello',\n    street: ['6146 Honey Bluff Parkway'],\n    city: 'Calder',\n    postcode: '49628-7978',\n    region_code: 'MI',\n    region: {\n        region_code: 'MI'\n    },\n    telephone: '(555) 229-3326',\n    email: 'veronica@example.com'\n};\n*/\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './addressForm';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation {\n        createBraintreeClientToken\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { useEffect, useState } from 'react';\n\nimport { useCheckoutState } from '../checkoutContext';\nimport { useMutation } from '@apollo/client';\nimport dropIn from 'braintree-web-drop-in';\nimport CREATE_BRAINTREE_CLIENT_TOKEN from '../../../queries/mutation_create_braintree_client_token.graphql';\nimport { oneOf } from 'prop-types';\nimport { useFieldApi } from 'informed';\nimport { useCartState } from '../../Minicart/cartContext';\n\nconst CONTAINER_ID = 'braintree-dropin-container';\n\nconst Braintree = props => {\n    const [{ braintreeToken }, dispatch] = useCheckoutState();\n    const [{ cart }, cartDispatch] = useCartState();\n\n    const [dropinInstance, setDropinInstance] = useState(); // This state is gone after you leave the payment form\n    const [paymentMethodRequestable, setPaymentMethodRequestable] = useState(false);\n    const paymentNonceField = useFieldApi('payment_nonce');\n\n    const [createBraintreeClientToken, { data: braintreeTokenData, error: braintreeTokenError }] = useMutation(\n        CREATE_BRAINTREE_CLIENT_TOKEN\n    );\n\n    async function createDropinInstance() {\n        try {\n            // Tear down instance if it already exists, e.g. when switching between the PayPal and credit card form.\n            if (dropinInstance) {\n                await dropinInstance.teardown();\n                setDropinInstance(false);\n            }\n\n            let paypal = false;\n            if (props.accept === 'paypal') {\n                const amount = {\n                    amount: cart.prices.grand_total.value,\n                    currency: cart.prices.grand_total.currency\n                };\n\n                paypal = {\n                    flow: 'checkout',\n                    ...amount\n                };\n            }\n            let card = false;\n            if (props.accept === 'card') {\n                card = {\n                    cardholderName: {\n                        required: true\n                    },\n                    overrides: {\n                        fields: {\n                            number: {\n                                maskInput: {\n                                    // Only show last four digits on blur.\n                                    showLastFour: true\n                                }\n                            }\n                        }\n                    }\n                };\n            }\n\n            const braintreeDropIn = await dropIn.create({\n                authorization: braintreeToken,\n                container: `#${CONTAINER_ID}`,\n                paypal,\n                card\n            });\n\n            braintreeDropIn.on('paymentMethodRequestable', () => {\n                setPaymentMethodRequestable(true);\n            });\n\n            braintreeDropIn.on('noPaymentMethodRequestable', () => {\n                setPaymentMethodRequestable(false);\n            });\n\n            setDropinInstance(braintreeDropIn);\n        } catch (error) {\n            cartDispatch({ type: 'error', error: error.toString() });\n        }\n    }\n\n    // Request new braintree token and initialize payment form\n    useEffect(() => {\n        if (!braintreeToken) {\n            createBraintreeClientToken();\n            return;\n        }\n        createDropinInstance();\n    }, [braintreeToken, props.accept]);\n\n    // Store braintree token\n    useEffect(() => {\n        if (braintreeTokenError) {\n            cartDispatch({ type: 'error', error: braintreeTokenError.toString() });\n            return;\n        }\n        if (braintreeTokenData && braintreeTokenData.createBraintreeClientToken) {\n            dispatch({ type: 'setBraintreeToken', token: braintreeTokenData.createBraintreeClientToken });\n        }\n    }, [braintreeTokenData, braintreeTokenError]);\n\n    useEffect(() => {\n        if (paymentMethodRequestable) {\n            dropinInstance\n                .requestPaymentMethod()\n                .then(paymentNonce => {\n                    paymentNonceField.setValue(paymentNonce.nonce);\n                })\n                .catch(error => {\n                    cartDispatch({ type: 'error', error: error.toString() });\n                });\n        }\n    }, [paymentMethodRequestable]);\n\n    return <div id={CONTAINER_ID} />;\n};\n\nBraintree.propTypes = {\n    accept: oneOf(['card', 'paypal']).isRequired\n};\n\nexport default Braintree;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport default (value, values) => {\n    const nonce = value;\n    const paymentMethod = values.payment_method;\n    switch (paymentMethod) {\n        case 'braintree': {\n            return !nonce || nonce.length < 11 ? 'Please provide your credit card details.' : undefined;\n        }\n        case 'braintree_paypal': {\n            return !nonce || nonce.length < 11 ? 'Please provide your PayPal details.' : undefined;\n        }\n        default: {\n            // No nonce needed for any other payment methods\n            return undefined;\n        }\n    }\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { Text, useFormState } from 'informed';\n\nimport Braintree from './braintree';\nimport nonceValidation from './nonceValidation';\n\nimport classes from './paymentProvider.css';\n\nconst PaymentProvider = () => {\n    const formState = useFormState();\n    let child;\n\n    switch (formState.values.payment_method) {\n        case 'braintree': {\n            child = <Braintree accept=\"card\" />;\n            break;\n        }\n\n        case 'braintree_paypal': {\n            child = <Braintree accept=\"paypal\" />;\n            break;\n        }\n\n        default: {\n            return null;\n        }\n    }\n\n    return (\n        <div className={classes.braintree}>\n            {child}\n            <Text type=\"hidden\" field=\"payment_nonce\" validate={nonceValidation} />\n            {formState.errors.payment_nonce && (\n                <p className={classes.error_message}>{formState.errors.payment_nonce}</p>\n            )}\n        </div>\n    );\n};\n\nexport default PaymentProvider;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { useCallback, useState, useRef, useEffect } from 'react';\nimport { Form } from 'informed';\nimport { array, bool, shape, string, func, number } from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport AddressSelect from '../AddressForm/addressSelect';\nimport Button from '../Button';\nimport Select from '../Select';\nimport Checkbox from '../Checkbox';\nimport Field from '../Field';\nimport TextInput from '../TextInput';\nimport PaymentProvider from './paymentProviders/paymentProvider';\n\nimport classes from './paymentsForm.css';\nimport { isRequired, hasLengthExactly, validateRegionCode, validateEmail } from '../../utils/formValidators';\nimport combine from '../../utils/combineValidators';\n\n/**\n * A wrapper around the payment form. This component's purpose is to maintain\n * the submission state as well as prepare/set initial values.\n *\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst PaymentsForm = props => {\n    const {\n        allowSame,\n        billingAddressSameAsShippingAddress,\n        cancel,\n        countries,\n        initialAddressSelectValue,\n        initialPaymentMethod,\n        initialValues,\n        onAddressSelectValueChange,\n        paymentMethods,\n        showAddressSelect,\n        showEmailInput,\n        showSaveInAddressBookCheckbox,\n        submit\n    } = props;\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const intl = useIntl();\n\n    const anchorRef = useRef(null);\n\n    const paymentMethodsItems = paymentMethods.map(item => {\n        return {\n            label: item.title,\n            value: item.code\n        };\n    });\n\n    const initialPaymentMethodState = !initialPaymentMethod ? paymentMethodsItems[0].value : initialPaymentMethod.code;\n    const [paymentMethod] = useState(initialPaymentMethodState);\n\n    let initialFormValues;\n    if (allowSame && billingAddressSameAsShippingAddress) {\n        // If the addresses are the same, don't populate any fields\n        // other than the checkbox with an initial value.\n        initialFormValues = {\n            addresses_same: true\n        };\n    } else {\n        // Convert street array\n        if (initialValues && initialValues.street) {\n            initialValues.street.forEach((v, i) => {\n                initialValues[`street${i}`] = v;\n            });\n        }\n\n        // Convert region code\n        if (initialValues && initialValues.region) {\n            initialValues.region_code = initialValues.region.code;\n        }\n\n        // The addresses are not the same, populate the other fields.\n        initialFormValues = {\n            addresses_same: false,\n            ...initialValues\n        };\n    }\n\n    const [differentAddress, setDifferentAddress] = useState(!initialFormValues.addresses_same);\n\n    const handleSubmit = useCallback(\n        formValues => {\n            setIsSubmitting(true);\n            const sameAsShippingAddress = formValues['addresses_same'];\n            let billingAddress = {\n                sameAsShippingAddress\n            };\n            if (!sameAsShippingAddress) {\n                billingAddress = {\n                    ...billingAddress,\n                    ...formValues,\n                    street: [formValues.street0]\n                };\n            }\n            submit({\n                paymentMethod: paymentMethods.find(v => v.code === formValues['payment_method']),\n                paymentNonce: formValues['payment_nonce'],\n                billingAddress\n            });\n        },\n        [setIsSubmitting, paymentMethod]\n    );\n\n    const billingAddressFields = differentAddress ? (\n        <>\n            <div className={classes.firstname}>\n                <Field label={intl.formatMessage({ id: 'checkout:address-firstname', defaultMessage: 'First Name' })}>\n                    <TextInput id={classes.firstname} field=\"firstname\" validate={isRequired} />\n                </Field>\n            </div>\n            <div className={classes.lastname}>\n                <Field label={intl.formatMessage({ id: 'checkout:address-lastname', defaultMessage: 'Last Name' })}>\n                    <TextInput id={classes.lastname} field=\"lastname\" validate={isRequired} />\n                </Field>\n            </div>\n            {showEmailInput && (\n                <div className={classes.email}>\n                    <Field label={intl.formatMessage({ id: 'checkout:address-email', defaultMessage: 'E-Mail' })}>\n                        <TextInput id={classes.email} field=\"email\" validate={combine([isRequired, validateEmail])} />\n                    </Field>\n                </div>\n            )}\n            <div className={classes.street0}>\n                <Field label={intl.formatMessage({ id: 'checkout:address-street', defaultMessage: 'Street' })}>\n                    <TextInput id={classes.street0} field=\"street0\" validate={isRequired} />\n                </Field>\n            </div>\n            <div className={classes.city}>\n                <Field label={intl.formatMessage({ id: 'checkout:address-city', defaultMessage: 'City' })}>\n                    <TextInput id={classes.city} field=\"city\" validate={isRequired} />\n                </Field>\n            </div>\n            <div className={classes.region_code}>\n                <Field label={intl.formatMessage({ id: 'checkout:address-state', defaultMessage: 'State' })}>\n                    <TextInput\n                        id={classes.region_code}\n                        field=\"region_code\"\n                        validate={combine([isRequired, [hasLengthExactly, 2], [validateRegionCode, countries]])}\n                    />\n                </Field>\n            </div>\n            <div className={classes.postcode}>\n                <Field label={intl.formatMessage({ id: 'checkout:address-postcode', defaultMessage: 'ZIP' })}>\n                    <TextInput id={classes.postcode} field=\"postcode\" validate={isRequired} />\n                </Field>\n            </div>\n            <div className={classes.telephone}>\n                <Field label={intl.formatMessage({ id: 'checkout:address-phone', defaultMessage: 'Phone' })}>\n                    <TextInput id={classes.telephone} field=\"telephone\" validate={isRequired} />\n                </Field>\n            </div>\n            <span ref={anchorRef} />\n        </>\n    ) : null;\n\n    // When the address checkbox is unchecked, additional fields are rendered.\n    // This causes the form to grow, and potentially to overflow, so the new\n    // fields may go unnoticed. To reveal them, we scroll them into view.\n    useEffect(() => {\n        if (differentAddress) {\n            const { current: element } = anchorRef;\n\n            if (element instanceof HTMLElement) {\n                element.scrollIntoView({ behavior: 'smooth' });\n            }\n        }\n    }, [differentAddress]);\n\n    return (\n        <Form className={classes.root} initialValues={initialFormValues} onSubmit={handleSubmit}>\n            {({ formApi }) => (\n                <>\n                    <div className={classes.body}>\n                        <h2 className={classes.heading}>Billing Information</h2>\n                        <div className={classes.braintree}>\n                            <Select\n                                items={paymentMethodsItems}\n                                field=\"payment_method\"\n                                initialValue={paymentMethod}\n                                onValueChange={() =>\n                                    formApi.getError('payment_nonce') && formApi.resetField('payment_nonce')\n                                }\n                            />\n                        </div>\n                        <PaymentProvider />\n                        <div className={classes.address_check}>\n                            {allowSame && (\n                                <Checkbox\n                                    field=\"addresses_same\"\n                                    label={intl.formatMessage({\n                                        id: 'checkout:same-as-shipping',\n                                        defaultMessage: 'Billing address same as shipping address'\n                                    })}\n                                    onClick={ev => {\n                                        setDifferentAddress(!ev.target.checked);\n                                    }}\n                                />\n                            )}\n                        </div>\n                        {differentAddress && showAddressSelect && (\n                            <div className={classes.address_select}>\n                                <Field\n                                    label={intl.formatMessage({\n                                        id: 'checkout:address-use-saved-address',\n                                        defaultMessage: 'Use Saved Address'\n                                    })}>\n                                    <AddressSelect\n                                        initialValue={initialAddressSelectValue}\n                                        onValueChange={value => onAddressSelectValueChange(value, formApi)}\n                                    />\n                                </Field>\n                            </div>\n                        )}\n                        {billingAddressFields}\n                        {differentAddress && showSaveInAddressBookCheckbox && (\n                            <div className={classes.save_in_address_book}>\n                                <Checkbox\n                                    id={classes.save_in_address_book}\n                                    label={intl.formatMessage({\n                                        id: 'checkout:address-save-in-address-book',\n                                        defaultMessage: 'Save in address book'\n                                    })}\n                                    field=\"save_in_address_book\"\n                                />\n                            </div>\n                        )}\n                    </div>\n                    <div className={classes.footer}>\n                        <Button onClick={cancel}>\n                            {intl.formatMessage({ id: 'common:cancel', defaultMessage: 'Cancel' })}\n                        </Button>\n                        <Button priority=\"high\" type=\"submit\" disabled={isSubmitting}>\n                            {intl.formatMessage({\n                                id: 'checkout:use-payment-method',\n                                defaultMessage: 'Use Payment Method'\n                            })}\n                        </Button>\n                    </div>\n                </>\n            )}\n        </Form>\n    );\n};\n\nPaymentsForm.propTypes = {\n    allowSame: bool,\n    billingAddressSameAsShippingAddress: bool,\n    cancel: func.isRequired,\n    classes: shape({\n        root: string\n    }),\n    countries: array,\n    initialAddressSelectValue: number,\n    initialPaymentMethod: shape({\n        code: string\n    }),\n    initialValues: shape({\n        firstname: string,\n        lastname: string,\n        telephone: string,\n        city: string,\n        postcode: string,\n        region_code: string,\n        street0: string\n    }),\n    onAddressSelectValueChange: func,\n    paymentMethods: array.isRequired,\n    showAddressSelect: bool,\n    showEmailInput: bool,\n    showSaveInAddressBookCheckbox: bool,\n    submit: func.isRequired\n};\n\nPaymentsForm.defaultProps = {\n    allowSame: true,\n    billingAddressSameAsShippingAddress: true,\n    initialAddressSelectValue: null,\n    initialValues: {},\n    showAddressSelect: false,\n    showEmailInput: false,\n    showSaveInAddressBookCheckbox: false\n};\n\nexport default PaymentsForm;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { useCallback } from 'react';\nimport { Form } from 'informed';\nimport { array, bool, func, shape, string, object } from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport Button from '../Button';\nimport Select from '../Select';\n\nimport classes from './shippingForm.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst ShippingForm = props => {\n    const { availableShippingMethods, cancel, shippingMethod, submit, submitting } = props;\n    const intl = useIntl();\n    let initialValue;\n    let selectableShippingMethods;\n\n    if (availableShippingMethods.length > 0) {\n        selectableShippingMethods = availableShippingMethods\n            .filter(method => method.carrier_code && method.carrier_title)\n            .map(({ carrier_code, carrier_title }) => ({\n                label: carrier_title,\n                value: carrier_code\n            }));\n        initialValue = shippingMethod ? shippingMethod.carrier_code : availableShippingMethods[0].carrier_code;\n    } else {\n        selectableShippingMethods = [];\n        initialValue = '';\n    }\n\n    const handleSubmit = useCallback(\n        ({ shippingMethod }) => {\n            const selectedShippingMethod = availableShippingMethods.find(\n                ({ carrier_code }) => carrier_code === shippingMethod\n            );\n\n            if (!selectedShippingMethod) {\n                console.warn(\n                    `Could not find the selected shipping method ${selectedShippingMethod} in the list of available shipping methods.`\n                );\n                cancel();\n                return;\n            }\n            submit({ shippingMethod: selectedShippingMethod });\n        },\n        [availableShippingMethods, cancel, submit]\n    );\n\n    return (\n        <Form className={classes.root} onSubmit={handleSubmit}>\n            <div className={classes.body}>\n                <h2 className={classes.heading}>\n                    {intl.formatMessage({\n                        id: 'checkout:shipping-information',\n                        defaultMessage: 'Shipping Information'\n                    })}\n                </h2>\n                <div className={classes.shippingMethod} id={classes.shippingMethod}>\n                    <label htmlFor={classes.shippingMethod}>\n                        {intl.formatMessage({ id: 'checkout:shipping-method', defaultMessage: 'Shipping Method' })}\n                    </label>\n                    <Select field=\"shippingMethod\" initialValue={initialValue} items={selectableShippingMethods} />\n                </div>\n            </div>\n            <div className={classes.footer}>\n                <Button onClick={cancel}>\n                    {intl.formatMessage({ id: 'common:cancel', defaultMessage: 'Cancel' })}\n                </Button>\n                <Button priority=\"high\" type=\"submit\" disabled={submitting}>\n                    {intl.formatMessage({ id: 'checkout:use-shipping-method', defaultMessage: 'Use Method' })}\n                </Button>\n            </div>\n        </Form>\n    );\n};\n\nShippingForm.propTypes = {\n    availableShippingMethods: array.isRequired,\n    cancel: func.isRequired,\n    classes: shape({\n        body: string,\n        button: string,\n        footer: string,\n        heading: string,\n        shippingMethod: string\n    }),\n    shippingMethod: object,\n    submit: func.isRequired,\n    submitting: bool\n};\n\nShippingForm.defaultProps = {\n    availableShippingMethods: [{}]\n};\n\nexport default ShippingForm;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation($cartId: String!, $paymentMethodCode: String!) {\n        setPaymentMethodOnCart(input: { cart_id: $cartId, payment_method: { code: $paymentMethodCode } }) {\n            cart {\n                selected_payment_method {\n                    code\n                    title\n                }\n            }\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation($cartId: String!, $paymentMethodCode: String!, $nonce: String!) {\n        setPaymentMethodOnCart(\n            input: {\n                cart_id: $cartId\n                payment_method: {\n                    code: $paymentMethodCode\n                    braintree: { payment_method_nonce: $nonce, is_active_payment_token_enabler: false }\n                }\n            }\n        ) {\n            cart {\n                selected_payment_method {\n                    code\n                    title\n                }\n            }\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    # Welcome to Altair GraphQL Client.\n    # You can send your request using CmdOrCtrl + Enter.\n\n    # Enter your graphQL query here.\n\n    mutation(\n        $cartId: String!\n        $city: String!\n        $company: String\n        $country_code: String!\n        $firstname: String!\n        $lastname: String!\n        $postcode: String\n        $region_code: String\n        $save_in_address_book: Boolean\n        $street: [String]!\n        $telephone: String!\n    ) {\n        setBillingAddressOnCart(\n            input: {\n                cart_id: $cartId\n                billing_address: {\n                    address: {\n                        city: $city\n                        company: $company\n                        country_code: $country_code\n                        firstname: $firstname\n                        lastname: $lastname\n                        postcode: $postcode\n                        region: $region_code\n                        save_in_address_book: $save_in_address_book\n                        street: $street\n                        telephone: $telephone\n                    }\n                }\n            }\n        ) {\n            cart {\n                billing_address {\n                    city\n                    company\n                    country {\n                        code\n                    }\n                    firstname\n                    lastname\n                    postcode\n                    region {\n                        code\n                    }\n                    street\n                    telephone\n                }\n            }\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation($cartId: String!, $carrier_code: String!, $method_code: String!) {\n        setShippingMethodsOnCart(\n            input: { cart_id: $cartId, shipping_methods: { carrier_code: $carrier_code, method_code: $method_code } }\n        ) {\n            cart {\n                shipping_addresses {\n                    selected_shipping_method {\n                        method_code\n                        method_title\n                        carrier_code\n                        carrier_title\n                    }\n                }\n            }\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation($cartId: String!, $email: String!) {\n        setGuestEmailOnCart(input: { cart_id: $cartId, email: $email }) {\n            cart {\n                email\n            }\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { useCallback } from 'react';\nimport { bool, string } from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport { useMutation } from '@apollo/client';\n\nimport { useCountries, useAwaitQuery } from '../../utils/hooks';\nimport { getCartDetails } from '../../actions/cart';\n\nimport AddressForm from '../AddressForm';\nimport PaymentsForm from './paymentsForm';\nimport ShippingForm from './shippingForm';\nimport { useAddressSelect } from '../AddressForm/useAddressSelect';\nimport { useCartState } from '../Minicart/cartContext';\nimport { useCheckoutState } from './checkoutContext';\nimport { useUserContext } from '../../context/UserContext';\n\nimport MUTATION_SET_SHIPPING_ADDRESS from '../../queries/mutation_set_shipping_address.graphql';\nimport MUTATION_SET_PAYMENT_METHOD from '../../queries/mutation_set_payment_method.graphql';\nimport MUTATION_SET_BRAINTREE_PAYMENT_METHOD from '../../queries/mutation_set_braintree_payment_method.graphql';\nimport MUTATION_SET_BILLING_ADDRESS from '../../queries/mutation_set_billing_address.graphql';\nimport MUTATION_SET_SHIPPING_METHOD from '../../queries/mutation_set_shipping_method.graphql';\nimport MUTATION_SET_GUEST_EMAIL_ON_CART from '../../queries/mutation_set_guest_email_on_cart.graphql';\nimport CART_DETAILS_QUERY from '../../queries/query_cart_details.graphql';\n\n/**\n * The EditableForm component renders the actual edit forms for the sections\n * within the form.\n *\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst EditableForm = props => {\n    const { submitting, isAddressInvalid, invalidAddressMessage } = props;\n    const [{ cart, cartId }, cartDispatch] = useCartState();\n    const [\n        {\n            editing,\n            shippingAddress,\n            shippingMethod,\n            paymentMethod,\n            billingAddress,\n            billingAddressSameAsShippingAddress,\n            isEditingNewAddress\n        },\n        dispatch\n    ] = useCheckoutState();\n    const { selectedAddressId, parseInitialAddressSelectValue, handleChangeAddressSelectInCheckout } = useAddressSelect(\n        {\n            initialAddress: shippingAddress\n        }\n    );\n    const { error: countriesError, countries } = useCountries();\n    const [{ isSignedIn, currentUser }] = useUserContext();\n\n    const cartDetailsQuery = useAwaitQuery(CART_DETAILS_QUERY);\n    const [setShippingAddressesOnCart] = useMutation(MUTATION_SET_SHIPPING_ADDRESS);\n\n    const [setBraintreePaymentMethodOnCart] = useMutation(MUTATION_SET_BRAINTREE_PAYMENT_METHOD);\n    const [setPaymentMethodOnCart] = useMutation(MUTATION_SET_PAYMENT_METHOD);\n    const [setBillingAddressOnCart] = useMutation(MUTATION_SET_BILLING_ADDRESS);\n\n    const [setShippingMethodsOnCart, { data: shippingMethodsResult, error: shippingMethodsError }] = useMutation(\n        MUTATION_SET_SHIPPING_METHOD\n    );\n    const [setGuestEmailOnCart] = useMutation(MUTATION_SET_GUEST_EMAIL_ON_CART);\n    const intl = useIntl();\n\n    if (shippingMethodsError || countriesError) {\n        let errorObj = shippingMethodsError || countriesError;\n        cartDispatch({ type: 'error', error: errorObj.toString() });\n    }\n\n    const handleCancel = useCallback(() => {\n        dispatch({ type: 'endEditing' });\n    }, [dispatch]);\n\n    const handleSubmitAddressForm = async formValues => {\n        cartDispatch({ type: 'beginLoading' });\n        try {\n            const addressVariables = { variables: { cartId, country_code: 'US', ...formValues } };\n            await setShippingAddressesOnCart(addressVariables);\n            if (billingAddressSameAsShippingAddress) {\n                addressVariables.variables.save_in_address_book = false;\n                await setBillingAddressOnCart(addressVariables);\n            }\n            await getCartDetails({ cartDetailsQuery, dispatch: cartDispatch, cartId });\n\n            if (!isSignedIn) {\n                await setGuestEmailOnCart({ variables: { cartId, email: formValues.email } });\n                dispatch({ type: 'setShippingAddressEmail', email: formValues.email });\n            }\n        } catch (err) {\n            cartDispatch({ type: 'error', error: err.toString() });\n        } finally {\n            cartDispatch({ type: 'endLoading' });\n        }\n    };\n\n    const handleSubmitPaymentsForm = async formValues => {\n        cartDispatch({ type: 'beginLoading' });\n        try {\n            const billingAddressValues =\n                !cart.is_virtual && formValues.billingAddress.sameAsShippingAddress && shippingAddress\n                    ? { ...shippingAddress }\n                    : formValues.billingAddress;\n            const addressVariables = { variables: { cartId, country_code: 'US', ...billingAddressValues } };\n            await setBillingAddressOnCart(addressVariables);\n            await getCartDetails({ cartDetailsQuery, dispatch: cartDispatch, cartId });\n\n            dispatch({\n                type: 'setBillingAddressSameAsShippingAddress',\n                same: formValues.billingAddress.sameAsShippingAddress\n            });\n\n            // If virtual and guest cart, set email with payment address, since no shipping address set\n            if (cart.is_virtual && !isSignedIn) {\n                await setGuestEmailOnCart({ variables: { cartId, email: formValues.billingAddress.email } });\n                dispatch({ type: 'setBillingAddressEmail', email: formValues.billingAddress.email });\n            }\n\n            let paymentResult;\n            switch (formValues.paymentMethod.code) {\n                case 'braintree':\n                case 'braintree_paypal': {\n                    paymentResult = await setBraintreePaymentMethodOnCart({\n                        variables: {\n                            cartId: cartId,\n                            paymentMethodCode: formValues.paymentMethod.code,\n                            nonce: formValues.paymentNonce\n                        }\n                    });\n                    break;\n                }\n                default: {\n                    paymentResult = await setPaymentMethodOnCart({\n                        variables: { cartId: cartId, paymentMethodCode: formValues.paymentMethod.code }\n                    });\n                }\n            }\n\n            dispatch({\n                type: 'setPaymentMethod',\n                paymentMethod: {\n                    ...paymentResult.data.setPaymentMethodOnCart.cart.selected_payment_method\n                }\n            });\n        } catch (err) {\n            cartDispatch({ type: 'error', error: err.toString() });\n        } finally {\n            cartDispatch({ type: 'endLoading' });\n        }\n    };\n\n    const handleSubmitShippingForm = async formValues => {\n        cartDispatch({ type: 'beginLoading' });\n        try {\n            await setShippingMethodsOnCart({ variables: { cartId: cartId, ...formValues.shippingMethod } });\n            await getCartDetails({ cartDetailsQuery, dispatch: cartDispatch, cartId });\n        } catch (err) {\n            cartDispatch({ type: 'error', error: err.toString() });\n        } finally {\n            cartDispatch({ type: 'endLoading' });\n        }\n    };\n\n    if (shippingMethodsResult) {\n        dispatch({\n            type: 'setShippingMethod',\n            shippingMethod:\n                shippingMethodsResult.setShippingMethodsOnCart.cart.shipping_addresses[0].selected_shipping_method\n        });\n    }\n\n    // We can display the forms only after the countries are loaded.\n    if (!countries || countries.length === 0) {\n        return null;\n    }\n\n    const hasSavedAddresses = currentUser.addresses.length > 0;\n    const newAddressItemValue = 0;\n    const billingAddressSelectInitialValue = billingAddressSameAsShippingAddress\n        ? newAddressItemValue\n        : parseInitialAddressSelectValue(billingAddress);\n\n    switch (editing) {\n        case 'address': {\n            return (\n                <AddressForm\n                    cancel={handleCancel}\n                    countries={countries}\n                    formHeading={intl.formatMessage({\n                        id: 'checkout:address-form-heading',\n                        defaultMessage: 'Shipping Address'\n                    })}\n                    isAddressInvalid={isAddressInvalid}\n                    invalidAddressMessage={invalidAddressMessage}\n                    initialAddressSelectValue={selectedAddressId}\n                    initialValues={shippingAddress}\n                    onAddressSelectValueChange={handleChangeAddressSelectInCheckout}\n                    showAddressSelect={isSignedIn && hasSavedAddresses}\n                    showEmailInput={!isSignedIn}\n                    showSaveInAddressBookCheckbox={isSignedIn && selectedAddressId !== 0}\n                    submit={handleSubmitAddressForm}\n                    submitting={submitting}\n                    submitButtonLabel={intl.formatMessage({\n                        id: 'checkout:address-submit',\n                        defaultMessage: 'Use Address'\n                    })}\n                />\n            );\n        }\n        case 'paymentMethod': {\n            return (\n                <PaymentsForm\n                    allowSame={!cart.is_virtual}\n                    billingAddressSameAsShippingAddress={billingAddressSameAsShippingAddress}\n                    cancel={handleCancel}\n                    cart={cart}\n                    countries={countries}\n                    initialAddressSelectValue={billingAddressSelectInitialValue}\n                    initialPaymentMethod={paymentMethod}\n                    initialValues={billingAddress}\n                    onAddressSelectValueChange={handleChangeAddressSelectInCheckout}\n                    paymentMethods={cart.available_payment_methods}\n                    showAddressSelect={isSignedIn && hasSavedAddresses}\n                    showEmailInput={cart.is_virtual && !isSignedIn}\n                    showSaveInAddressBookCheckbox={isSignedIn && isEditingNewAddress}\n                    submit={handleSubmitPaymentsForm}\n                    submitting={submitting}\n                />\n            );\n        }\n        case 'shippingMethod': {\n            const availableShippingMethods =\n                shippingAddress && shippingAddress.available_shipping_methods\n                    ? shippingAddress.available_shipping_methods\n                    : [];\n            return (\n                <ShippingForm\n                    availableShippingMethods={availableShippingMethods}\n                    cancel={handleCancel}\n                    shippingMethod={shippingMethod}\n                    submit={handleSubmitShippingForm}\n                    submitting={submitting}\n                />\n            );\n        }\n        default: {\n            return null;\n        }\n    }\n};\n\nEditableForm.propTypes = {\n    submitting: bool,\n    isAddressInvalid: bool,\n    invalidAddressMessage: string\n};\n\nexport default EditableForm;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { useEffect } from 'react';\n\nimport Overview from './overview';\nimport classes from './form.css';\nimport EditableForm from './editableForm';\nimport { useAddressForm } from '../AddressForm/useAddressForm';\nimport { useCartState } from '../Minicart/cartContext';\nimport { useCheckoutState } from './checkoutContext';\n\n/**\n * The Form component is similar to Flow in that it renders either the overview\n * or the editable form based on the 'editing' state value.\n *\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Form = () => {\n    const { parseAddress } = useAddressForm();\n    const [{ cart }] = useCartState();\n    const [{ editing, shippingAddress }, dispatch] = useCheckoutState();\n    const { shipping_addresses = [], selected_payment_method = undefined, billing_address = undefined, email } = cart;\n\n    useEffect(() => {\n        if (shipping_addresses && shipping_addresses.length > 0 && shipping_addresses[0].firstname !== null) {\n            dispatch({\n                type: 'setShippingAddress',\n                shippingAddress: parseAddress(shipping_addresses[0], email)\n            });\n        }\n    }, [shipping_addresses]);\n\n    useEffect(() => {\n        if (selected_payment_method && selected_payment_method.code.length > 0) {\n            dispatch({ type: 'setPaymentMethod', paymentMethod: selected_payment_method });\n        }\n    }, [selected_payment_method]);\n\n    useEffect(() => {\n        if (billing_address && billing_address.city !== null) {\n            dispatch({\n                type: 'setBillingAddress',\n                billingAddress: parseAddress(billing_address, email)\n            });\n        }\n    }, [billing_address]);\n\n    useEffect(() => {\n        if (\n            shippingAddress &&\n            shippingAddress.selected_shipping_method &&\n            shippingAddress.selected_shipping_method.carrier_code !== null\n        ) {\n            dispatch({ type: 'setShippingMethod', shippingMethod: shippingAddress.selected_shipping_method });\n        }\n    }, [shippingAddress]);\n\n    const child = editing ? <EditableForm /> : <Overview classes={classes} />;\n    return <div className={classes.root}>{child}</div>;\n};\n\nexport default Form;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useCheckoutState } from './checkoutContext';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport default () => {\n    const [{ order }, dispatch] = useCheckoutState();\n\n    const continueShopping = () => {\n        // Reset checkout state\n        dispatch({ type: 'reset' });\n    };\n\n    const orderId = order && order.order_id ? order.order_id : null;\n    return [{ orderId }, continueShopping];\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { useIntl } from 'react-intl';\n\nimport classes from './receipt.css';\nimport Trigger from '../Trigger';\n\nimport useReceipt from './useReceipt';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Receipt = () => {\n    const [{ orderId }, continueShopping] = useReceipt();\n    const intl = useIntl();\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.body}>\n                <h2 className={classes.header}>\n                    {intl.formatMessage({\n                        id: 'checkout:thankyou-for-purchase',\n                        defaultMessage: 'Thank you for your purchase!'\n                    })}\n                </h2>\n                <div className={classes.textBlock}>\n                    {intl.formatMessage(\n                        {\n                            id: 'checkout:order-confirmation',\n                            defaultMessage:\n                                'The order number is {orderId}. You will receive an order confirmation email with order status and other details.'\n                        },\n                        { orderId }\n                    )}\n                </div>\n                <Trigger action={continueShopping}>\n                    <span className={classes.continue}>\n                        {intl.formatMessage({ id: 'checkout:continue-shopping', defaultMessage: 'Continue Shopping' })}\n                    </span>\n                </Trigger>\n            </div>\n        </div>\n    );\n};\n\nexport default Receipt;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport Cart from './cart';\nimport Form from './form';\nimport classes from './flow.css';\nimport Receipt from './receipt';\nimport { useCartState } from '../Minicart/cartContext';\nimport { useCheckoutState } from './checkoutContext';\n\nconst isCartReady = cart => {\n    return cart && cart.items.length > 0;\n};\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Flow = () => {\n    const [{ cart }] = useCartState();\n    const [{ flowState }] = useCheckoutState();\n\n    let child;\n\n    switch (flowState) {\n        case 'cart': {\n            child = <Cart ready={isCartReady(cart)} submitting={false} />;\n            break;\n        }\n        case 'form': {\n            child = <Form />;\n            break;\n        }\n        case 'receipt': {\n            child = <Receipt />;\n            break;\n        }\n        default: {\n            child = null;\n        }\n    }\n\n    return <div className={classes.root}>{child}</div>;\n};\n\nexport default Flow;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './flow';\nexport { CheckoutProvider } from './checkoutContext';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { number, string, shape } from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport Price from '../Price';\n\nimport classes from './totalsSummary.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst TotalsSummary = props => {\n    const intl = useIntl();\n\n    // Props.\n    const { numItems, subtotal, subtotalDiscount } = props;\n\n    // Do not display price, if cart is empty. But display price, if the cart has\n    // items and the price is 0 (e.g. when coupons are applied).\n    const hasSubtotal = Boolean(subtotal.value) || numItems > 0;\n    const hasDiscount = subtotal.value !== subtotalDiscount.value;\n\n    return (\n        <div className={classes.root}>\n            {hasSubtotal && (\n                <dl className={classes.totals}>\n                    <dt className={classes.subtotalLabel}>\n                        <span>\n                            {intl.formatMessage({ id: 'cart:total', defaultMessage: 'Cart Total:' })}{' '}\n                            <Price\n                                className={hasDiscount ? classes.discounted : ''}\n                                currencyCode={subtotal.currency}\n                                value={subtotal.value}\n                            />\n                        </span>\n                    </dt>\n                    <dd className={classes.subtotalValue}>\n                        {intl.formatMessage(\n                            {\n                                id: 'cart:itemsWithCount',\n                                defaultMessage: '{count, plural, one {# item} other {# items}}'\n                            },\n                            { count: numItems }\n                        )}\n                    </dd>\n                </dl>\n            )}\n            {hasSubtotal && hasDiscount && (\n                <dl className={classes.totalsDiscount}>\n                    <dt className={classes.subtotalLabel}>\n                        <span>\n                            {intl.formatMessage({ id: 'cart:new-total', defaultMessage: 'New Cart Total:' })}{' '}\n                            <Price currencyCode={subtotalDiscount.currency} value={subtotalDiscount.value} />\n                        </span>\n                    </dt>\n                    <dd className={classes.subtotalValue}>\n                        {intl.formatMessage(\n                            {\n                                id: 'cart:itemsWithCount',\n                                defaultMessage: '{count, plural, one {# item} other {# items}}'\n                            },\n                            { count: numItems }\n                        )}\n                    </dd>\n                </dl>\n            )}\n        </div>\n    );\n};\n\nTotalsSummary.propTypes = {\n    currencyCode: string,\n    numItems: number,\n    subtotal: shape({\n        currency: string,\n        value: number\n    }),\n    subtotalDiscount: shape({\n        currency: string,\n        value: number\n    })\n};\n\nexport default TotalsSummary;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport Checkout from '../Checkout';\nimport classes from './footer.css';\nimport TotalsSummary from './totalsSummary';\nimport { useCartState } from './cartContext';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Footer = () => {\n    const [{ isOpen, cart }] = useCartState();\n    const footerClassName = isOpen ? classes.root_open : classes.root;\n\n    let totalsSummary = null;\n    if (cart && cart.prices && cart.total_quantity) {\n        const { subtotal_excluding_tax, subtotal_with_discount_excluding_tax } = cart.prices;\n        totalsSummary = (\n            <TotalsSummary\n                subtotal={subtotal_excluding_tax}\n                subtotalDiscount={subtotal_with_discount_excluding_tax}\n                numItems={cart.total_quantity}\n            />\n        );\n    }\n\n    return (\n        <div className={footerClassName}>\n            {totalsSummary}\n            <Checkout />\n        </div>\n    );\n};\n\nexport default Footer;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useEffect } from 'react';\nimport { addItemToCart, getCartDetails } from '../../actions/cart';\nimport { useCartState } from '../Minicart/cartContext';\nimport * as dataLayerUtils from '../../utils/dataLayerUtils';\nimport { useStorefrontEvents } from '../../utils/hooks';\n\nexport const productMapper = item => ({\n    data: {\n        sku: item.sku,\n        quantity: parseFloat(item.quantity)\n    }\n});\n\nexport const bundledProductMapper = item => ({\n    ...productMapper(item),\n    bundle_options: item.options\n});\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport default ({ queries }) => {\n    const {\n        createCartMutation,\n        addToCartMutation,\n        cartDetailsQuery,\n        addVirtualItemMutation,\n        addBundleItemMutation,\n        addSimpleAndVirtualItemMutation\n    } = queries;\n\n    const [{ cartId, cart, isOpen, isLoading, isEditing, errorMessage }, dispatch] = useCartState();\n    const mse = useStorefrontEvents();\n\n    useEffect(() => {\n        async function fn() {\n            await getCartDetails({ cartDetailsQuery, dispatch, cartId });\n        }\n\n        fn();\n    }, [cartId]);\n\n    const refreshCart = async () => {\n        await getCartDetails({ cartDetailsQuery, dispatch, cartId });\n    };\n\n    const addItem = async event => {\n        if (!event.detail) return;\n\n        let physicalCartItems = event.detail.filter(item => !item.virtual).map(productMapper);\n        let virtualCartItems = event.detail.filter(item => item.virtual).map(productMapper);\n        let bundleCartItems = event.detail.filter(item => item.bundle).map(bundledProductMapper);\n\n        dispatch({ type: 'open' });\n        dispatch({ type: 'beginLoading' });\n\n        let addItemFn = addToCartMutation;\n        if (bundleCartItems.length > 0) {\n            addItemFn = addBundleItemMutation;\n        } else if (physicalCartItems.length > 0 && virtualCartItems.length > 0) {\n            addItemFn = addSimpleAndVirtualItemMutation;\n        } else if (virtualCartItems.length > 0) {\n            addItemFn = addVirtualItemMutation;\n        }\n\n        await addItemToCart({\n            createCartMutation,\n            addToCartMutation: addItemFn,\n            cartDetailsQuery,\n            cart,\n            cartId,\n            dispatch,\n            physicalCartItems,\n            virtualCartItems,\n            bundleCartItems\n        });\n\n        // Push add to cart dataLayer events\n        mse && mse.publish.addToCart();\n        event.detail.forEach(item => {\n            // https://github.com/adobe/xdm/blob/master/docs/reference/datatypes/productlistitem.schema.md\n            let eventInfo = {\n                '@id': item.productId,\n                'xdm:SKU': item.sku,\n                'xdm:quantity': item.quantity\n            };\n\n            if (item.bundle) {\n                eventInfo['bundle'] = true;\n            }\n\n            dataLayerUtils.pushEvent('cif:addToCart', eventInfo);\n        });\n\n        dispatch({ type: 'endLoading' });\n    };\n\n    const data = { cartId, cart, isOpen, isLoading, isEditing, errorMessage };\n    const api = { addItem, refreshCart, dispatch };\n\n    return [data, api];\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { Suspense } from 'react';\nimport { useMutation } from '@apollo/client';\n\nimport MUTATION_CREATE_CART from '../../queries/mutation_create_guest_cart.graphql';\nimport MUTATION_ADD_TO_CART from '../../queries/mutation_add_to_cart.graphql';\nimport QUERY_CART_DETAILS from '../../queries/query_cart_details.graphql';\nimport MUTATION_ADD_VIRTUAL_TO_CART from '../../queries/mutation_add_virtual_to_cart.graphql';\nimport MUTATION_ADD_SIMPLE_AND_VIRTUAL_TO_CART from '../../queries/mutation_add_simple_and_virtual_to_cart.graphql';\nimport MUTATION_ADD_BUNDLE_TO_CART from '../../queries/mutation_add_bundle_to_cart.graphql';\n\nimport Mask from '../Mask';\nimport Header from './header';\nimport Body from './body';\nimport Footer from './footer';\nimport useMinicart from './useMinicart';\nimport LoadingIndicator from '../LoadingIndicator';\nimport { useCheckoutState } from '../Checkout/checkoutContext';\nimport { useEventListener, useAwaitQuery } from '../../utils/hooks';\n\nimport classes from './minicart.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst MiniCart = () => {\n    const [createCartMutation] = useMutation(MUTATION_CREATE_CART);\n    const [addToCartMutation] = useMutation(MUTATION_ADD_TO_CART);\n    const [addVirtualItemMutation] = useMutation(MUTATION_ADD_VIRTUAL_TO_CART);\n    const [addSimpleAndVirtualItemMutation] = useMutation(MUTATION_ADD_SIMPLE_AND_VIRTUAL_TO_CART);\n    const [addBundleItemMutation] = useMutation(MUTATION_ADD_BUNDLE_TO_CART);\n    const cartDetailsQuery = useAwaitQuery(QUERY_CART_DETAILS);\n    const [{ flowState }] = useCheckoutState();\n\n    const [{ cart, isOpen, isLoading, isEditing, errorMessage }, { addItem, dispatch }] = useMinicart({\n        queries: {\n            createCartMutation,\n            addToCartMutation,\n            cartDetailsQuery,\n            addVirtualItemMutation,\n            addBundleItemMutation,\n            addSimpleAndVirtualItemMutation\n        }\n    });\n\n    useEventListener(document, 'aem.cif.open-cart', () => {\n        dispatch({ type: 'open' });\n    });\n    useEventListener(document, 'aem.cif.add-to-cart', addItem);\n\n    const rootClass = isOpen ? classes.root_open : classes.root;\n    const isEmpty = cart && Object.entries(cart).length > 0 ? cart.items.length === 0 : true;\n    const showFooter = !(isLoading || isEmpty || isEditing || errorMessage) || flowState === 'receipt';\n    const footer = showFooter ? <Footer /> : null;\n\n    return (\n        <>\n            <Mask isOpen={isOpen} onClickHandler={() => dispatch({ type: 'close' })} />\n            <aside className={rootClass}>\n                <Suspense fallback={<LoadingIndicator />}>\n                    <Header />\n                    <Body />\n                    {footer}\n                </Suspense>\n            </aside>\n        </>\n    );\n};\n\nexport default MiniCart;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useEffect } from 'react';\nimport { useCartState } from './cartContext';\nimport { useCookieValue } from '../../utils/hooks';\nimport { useUserContext } from '../../context/UserContext';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst CartInitializer = props => {\n    const [{ cartId: stateCartId }, dispatch] = useCartState();\n    const [{ cartId: registeredCartId }] = useUserContext();\n\n    const CART_COOKIE = 'cif.cart';\n\n    const [cartId, setCartCookie] = useCookieValue(CART_COOKIE);\n\n    useEffect(() => {\n        if (cartId && cartId.length > 0 && !stateCartId) {\n            dispatch({ type: 'cartId', cartId });\n        }\n    }, [cartId]);\n\n    useEffect(() => {\n        if (stateCartId && (!cartId || cartId.length === 0)) {\n            setCartCookie(stateCartId);\n        }\n    }, [stateCartId]);\n\n    useEffect(() => {\n        if (registeredCartId) {\n            setCartCookie(registeredCartId);\n            dispatch({\n                type: 'cartId',\n                cartId: registeredCartId\n            });\n        }\n    }, [registeredCartId]);\n\n    return props.children;\n};\n\nexport default CartInitializer;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './minicart';\nexport { CartProvider, useCartState } from './cartContext';\nexport { default as CartInitializer } from './cartInitializer';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { useContext, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nexport const ConfigContext = React.createContext();\n\nconst ConfigContextProvider = props => {\n    const [config] = useState(props.config);\n\n    return <ConfigContext.Provider value={config}>{props.children}</ConfigContext.Provider>;\n};\n\nConfigContextProvider.propTypes = {\n    config: PropTypes.shape({\n        storeView: PropTypes.string,\n        headers: PropTypes.object,\n        graphqlEndpoint: PropTypes.string.isRequired,\n        graphqlMethod: PropTypes.oneOf(['GET', 'POST']).isRequired,\n        mountingPoints: PropTypes.shape({\n            accountContainer: PropTypes.string,\n            addressBookContainer: PropTypes.string,\n            authBarContainer: PropTypes.string,\n            cartTrigger: PropTypes.string,\n            minicart: PropTypes.string,\n            navPanel: PropTypes.string,\n            bundleProductOptionsContainer: PropTypes.string,\n            giftCardProductOptionsContainer: PropTypes.string,\n            accountDetails: PropTypes.string,\n            resetPasswordPage: PropTypes.string,\n            productRecs: PropTypes.string,\n            cartDetailsContainer: PropTypes.string,\n            checkoutPageContainer: PropTypes.string\n        }),\n        pagePaths: PropTypes.shape({\n            addressBook: PropTypes.string,\n            baseUrl: PropTypes.string,\n            accountDetails: PropTypes.string,\n            cartDetails: PropTypes.string,\n            resetPassword: PropTypes.string,\n            checkoutPage: PropTypes.string\n        })\n    }).isRequired\n};\n\nexport default ConfigContextProvider;\n\nexport const useConfigContext = () => useContext(ConfigContext);\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nconst localStorage = window.localStorage;\n\nexport const checkItem = itemKey => {\n    return localStorage.getItem(itemKey) !== null;\n};\n\nexport const getPlainItem = itemKey => {\n    return localStorage.getItem(itemKey);\n};\n\nexport const getJsonItem = itemKey => {\n    let result = null;\n\n    try {\n        result = JSON.parse(localStorage.getItem(itemKey));\n    } catch (e) {\n        console.error(`Local Storage item ${itemKey} is not a JSON.`);\n    }\n\n    return result;\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { ApolloLink } from '@apollo/client';\nimport { checkCookie, cookieValue } from './cookieUtils';\nimport { checkItem, getJsonItem } from './localStorageUtils';\n\nimport BrowserPersistence from '@magento/peregrine/lib/util/simplePersistence';\n\nconst SIGN_IN_TOKEN_KEY = BrowserPersistence.KEY + '__signin_token';\n\nconst getAuthToken = () => {\n    let token = checkCookie('cif.userToken') ? cookieValue('cif.userToken') : '';\n    if (checkItem(SIGN_IN_TOKEN_KEY)) {\n        const singInTokenJson = getJsonItem(SIGN_IN_TOKEN_KEY);\n\n        if (singInTokenJson) {\n            const timestamp = new Date().getTime();\n            if (timestamp - singInTokenJson.timeStored < singInTokenJson.ttl * 1000) {\n                token = singInTokenJson.value.replace(/\"/g, '');\n            }\n        }\n    }\n\n    return token;\n};\n\nconst authLink = new ApolloLink((operation, forward) => {\n    const token = getAuthToken();\n\n    if (token.length > 0) {\n        operation.setContext(({ headers }) => ({\n            headers: {\n                authorization: `Bearer ${token && token.length > 0 ? token : ''}`,\n                ...headers\n            }\n        }));\n    }\n\n    return forward(operation);\n});\n\nexport { authLink as graphqlAuthLink, getAuthToken };\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { stripIgnoredCharacters } from 'graphql';\n\n/**\n * This custom fetch interceptor minimizes GraphQL queries, by stripping unnecessary characters from the query.\n * This is a workaround, since Apollo always restores the formatting of a query, independent of the formatting in\n * .graphql files. See https://github.com/apollographql/apollo-link/issues/1079.\n *\n * This is required, since there are certain limits for Magento Cloud, see\n * https://docs.fastly.com/en/guides/resource-limits#request-and-response-limits.\n */\nexport default function(url, options) {\n    try {\n        if (options.method === 'GET') {\n            // Split url by ? to get query string\n            let parts = url.split('?');\n\n            // Only proceed if it is a valid URL\n            if (parts.length === 2) {\n                // Parse query from search params string\n                let params = new URLSearchParams(parts[1]);\n                let query = params.get('query');\n                if (query) {\n                    query = stripIgnoredCharacters(query);\n                    params.set('query', query);\n                    parts[1] = params.toString();\n                    url = parts.join('?');\n                }\n            }\n        }\n        if (options.method === 'POST') {\n            // Parse query from body in request\n            let bodyJson = JSON.parse(options.body);\n            if (bodyJson.query) {\n                bodyJson.query = stripIgnoredCharacters(bodyJson.query);\n                options.body = JSON.stringify(bodyJson);\n            }\n        }\n    } catch (err) {\n        console.warn('Could not minimize GraphQL query', err);\n    }\n    return fetch(url, options);\n}\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useEffect } from 'react';\n\nimport { useStorefrontEvents } from './hooks';\n\nconst useCustomUrlEvent = () => {\n    const mse = useStorefrontEvents();\n\n    useEffect(() => {\n        const customUrl = window.location && window.location.href;\n\n        if (!customUrl || !mse) {\n            return;\n        }\n\n        mse.context.setCustomUrl({ customUrl });\n        mse.publish.customUrl();\n    }, []);\n};\n\nexport default useCustomUrlEvent;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useEffect } from 'react';\n\nimport { useStorefrontEvents } from './hooks';\n\nconst useReferrerEvent = () => {\n    const mse = useStorefrontEvents();\n\n    useEffect(() => {\n        if (!document.referrer || !mse) {\n            return;\n        }\n\n        mse.context.setReferrerUrl({ referrerUrl: document.referrer });\n        mse.publish.referrerUrl();\n    }, []);\n};\n\nexport default useReferrerEvent;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useEffect, useRef } from 'react';\n\nconst documentScrollTop = () => document.body.scrollTop || document.documentElement.scrollTop;\nconst documentScrollLeft = () => document.body.scrollLeft || document.documentElement.scrollLeft;\n\nconst useViewedOffsets = () => {\n    const minXOffset = useRef(0);\n    const maxXOffset = useRef(0);\n    const minYOffset = useRef(0);\n    const maxYOffset = useRef(0);\n\n    const onResizeOrScroll = () => {\n        const currentXOffset = documentScrollLeft();\n        const currentYOffset = documentScrollTop();\n        minXOffset.current = Math.min(currentXOffset, minXOffset.current);\n        maxXOffset.current = Math.max(currentXOffset + window.innerWidth, maxXOffset.current);\n        minYOffset.current = Math.min(currentYOffset, minYOffset.current);\n        maxYOffset.current = Math.max(currentYOffset + window.innerHeight, maxYOffset.current);\n    };\n\n    useEffect(() => {\n        const currentXOffset = documentScrollLeft();\n        const currentYOffset = documentScrollTop();\n        minXOffset.current = currentXOffset;\n        maxXOffset.current = currentXOffset + window.innerWidth;\n        minYOffset.current = currentYOffset;\n        maxYOffset.current = currentYOffset + window.innerHeight;\n\n        window.addEventListener('scroll', onResizeOrScroll);\n        window.addEventListener('resize', onResizeOrScroll);\n        return () => {\n            window.removeEventListener('scroll', onResizeOrScroll);\n            window.removeEventListener('resize', onResizeOrScroll);\n        };\n    }, []);\n\n    return { minXOffset, maxXOffset, minYOffset, maxYOffset };\n};\n\nexport default useViewedOffsets;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useEffect } from 'react';\n\nimport { usePageType, useStorefrontEvents } from './hooks';\nimport useViewedOffsets from './useViewedOffsets';\n\nconst usePageEvent = () => {\n    const mse = useStorefrontEvents();\n    const { minXOffset, maxXOffset, minYOffset, maxYOffset } = useViewedOffsets();\n    const pageType = usePageType();\n\n    const sendPageEvent = () => {\n        const context = {\n            pageType,\n            eventType: 'pageUnload',\n            maxXOffset: maxXOffset.current,\n            maxYOffset: maxYOffset.current,\n            minXOffset: minXOffset.current,\n            minYOffset: minYOffset.current,\n            ping_interval: 0,\n            pings: 0\n        };\n\n        mse.context.setPage(context);\n        mse.publish.pageView();\n    };\n\n    useEffect(() => {\n        if (!mse) {\n            return;\n        }\n\n        window.addEventListener('beforeunload', sendPageEvent);\n        return () => {\n            window.removeEventListener('beforeunload', sendPageEvent);\n        };\n    }, []);\n};\n\nexport default usePageEvent;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useEventListener } from './hooks';\nimport * as dataLayerUtils from './dataLayerUtils';\n\nconst useDataLayerEvents = () => {\n    useEventListener(document, 'aem.cif.add-to-cart', async event => {\n        const items = typeof event.detail === 'string' ? JSON.parse(event.detail) : event.detail;\n        items.forEach(item => {\n            let eventInfo = {\n                '@id': item.productId,\n                'xdm:SKU': item.sku,\n                'xdm:quantity': item.quantity\n            };\n\n            if (item.bundle) {\n                eventInfo['bundle'] = true;\n            }\n\n            dataLayerUtils.pushEvent('cif:addToCart', eventInfo);\n        });\n    });\n\n    useEventListener(document, 'aem.cif.add-to-wishlist', async event => {\n        const items = typeof event.detail === 'string' ? JSON.parse(event.detail) : event.detail;\n        items.forEach(item => {\n            let eventInfo = {\n                '@id': item.productId,\n                'xdm:SKU': item.sku,\n                'xdm:quantity': item.quantity\n            };\n\n            dataLayerUtils.pushEvent('cif:addToWishList', eventInfo);\n        });\n    });\n};\n\nexport default useDataLayerEvents;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { ApolloClient, ApolloProvider, from, HttpLink, InMemoryCache } from '@apollo/client';\nimport typePolicies from '@magento/peregrine/lib/Apollo/policies';\n\nimport { CartProvider, CartInitializer } from '../Minicart';\nimport { CheckoutProvider } from '../Checkout';\nimport UserContextProvider from '../../context/UserContext';\nimport { useConfigContext } from '../../context/ConfigContext';\nimport { graphqlAuthLink } from '../../utils/authUtils';\nimport compressQueryFetch from '../../utils/compressQueryFetch';\nimport useCustomUrlEvent from '../../utils/useCustomUrlEvent';\nimport useReferrerEvent from '../../utils/useReferrerEvent';\nimport usePageEvent from '../../utils/usePageEvent';\nimport useDataLayerEvents from '../../utils/useDataLayerEvents';\n\nconst App = props => {\n    const { graphqlEndpoint, storeView, graphqlMethod = 'POST', headers = {} } = useConfigContext();\n    useCustomUrlEvent();\n    useReferrerEvent();\n    usePageEvent();\n    useDataLayerEvents();\n\n    const clientHeaders = { ...headers };\n\n    if (storeView) {\n        clientHeaders['Store'] = storeView;\n    }\n\n    const clientConfig = {\n        link: from([\n            graphqlAuthLink,\n            new HttpLink({\n                uri: graphqlEndpoint,\n                headers: clientHeaders,\n                useGETForQueries: graphqlMethod === 'GET',\n                fetch: compressQueryFetch\n            })\n        ]),\n        cache: new InMemoryCache({ typePolicies })\n    };\n\n    const client = new ApolloClient(clientConfig);\n\n    return (\n        <ApolloProvider client={client}>\n            <UserContextProvider>\n                <CartProvider>\n                    <CartInitializer>\n                        <CheckoutProvider>{props.children}</CheckoutProvider>\n                    </CartInitializer>\n                </CartProvider>\n            </UserContextProvider>\n        </ApolloProvider>\n    );\n};\n\nexport default App;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './app';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { ChevronRight as ChevronRightIcon, User as UserIcon } from 'react-feather';\nimport classes from './userChip.css';\nimport Icon from '../Icon';\nimport { shape, string, func } from 'prop-types';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst UserChip = props => {\n    const { currentUser, showMyAccount } = props;\n    const { email, firstname, lastname } = currentUser;\n\n    const display = `${firstname} ${lastname}`;\n\n    return (\n        <button className={classes.root} onClick={showMyAccount}>\n            <span className={classes.content}>\n                <span className={classes.avatar}>\n                    <Icon src={UserIcon} />\n                </span>\n                <span className={classes.user}>\n                    <span className={classes.fullName}>{display}</span>\n                    <span className={classes.email}>{email}</span>\n                </span>\n                <span className={classes.icon}>\n                    <Icon src={ChevronRightIcon} />\n                </span>\n            </span>\n        </button>\n    );\n};\n\nUserChip.propTypes = {\n    currentUser: shape({\n        firstname: string,\n        lastname: string,\n        email: string\n    }).isRequired,\n    showMyAccount: func.isRequired\n};\n\nexport default UserChip;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { useEffect } from 'react';\nimport { useIntl } from 'react-intl';\n\nimport Button from '../Button';\nimport classes from './authBar.css';\nimport { useUserContext } from '../../context/UserContext';\nimport UserChip from './userChip';\nimport { func } from 'prop-types';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst AuthBar = ({ showMyAccount, showSignIn }) => {\n    const [{ currentUser, isSignedIn }, { getUserDetails }] = useUserContext();\n    const intl = useIntl();\n\n    useEffect(() => {\n        if (isSignedIn && currentUser.email === '') {\n            getUserDetails();\n        }\n    }, [getUserDetails]);\n\n    const content = isSignedIn ? (\n        <UserChip currentUser={currentUser} showMyAccount={showMyAccount} />\n    ) : (\n        <Button disabled={false} priority=\"high\" onClick={showSignIn}>\n            {intl.formatMessage({ id: 'account:sign-in', defaultMessage: 'Sign In' })}\n        </Button>\n    );\n    return <div className={classes.root}>{content}</div>;\n};\n\nAuthBar.propTypes = {\n    showMyAccount: func,\n    showSignIn: func\n};\n\nexport default AuthBar;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation mergeCarts($sourceCartId: String!, $destinationCartId: String!) {\n        mergeCarts(source_cart_id: $sourceCartId, destination_cart_id: $destinationCartId) {\n            id\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation($email: String!, $password: String!) {\n        generateCustomerToken(email: $email, password: $password) {\n            token\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useState } from 'react';\nimport { useUserContext } from '../../context/UserContext';\nimport { useMutation } from '@apollo/client';\nimport { useCartState } from '../Minicart/cartContext';\nimport { useAwaitQuery, useCookieValue } from '../../utils/hooks';\nimport { mergeCarts } from '../../actions/cart';\nimport { retrieveCartId, saveCartId } from '@magento/peregrine/lib/store/actions/cart/asyncActions';\n\nimport MUTATION_MERGE_CARTS from '../../queries/mutation_merge_carts.graphql';\nimport QUERY_CUSTOMER_CART from '../../queries/query_customer_cart.graphql';\nimport MUTATION_GENERATE_TOKEN from '../../queries/mutation_generate_token.graphql';\nimport QUERY_CART_DETAILS from '../../queries/query_cart_details.graphql';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport const useSignin = props => {\n    const { showMyAccount } = props;\n    const [, cartDispatch] = useCartState();\n    const [userState, { setToken, getUserDetails, setCustomerCart, setError }] = useUserContext();\n    const [inProgress, setInProgress] = useState(false);\n\n    const [, setCartCookie] = useCookieValue('cif.cart');\n\n    const [mergeCartsMutation] = useMutation(MUTATION_MERGE_CARTS);\n    const fetchCustomerCart = useAwaitQuery(QUERY_CUSTOMER_CART);\n    const cartDetailsQuery = useAwaitQuery(QUERY_CART_DETAILS);\n    const [generateCustomerToken] = useMutation(MUTATION_GENERATE_TOKEN);\n\n    let errorMessage = '';\n    if (userState.signInError && userState.signInError.length > 0) {\n        errorMessage = userState.signInError;\n    }\n\n    const refreshPage = () => {\n        window.location.reload();\n    };\n\n    const handleSubmit = async ({ email, password }) => {\n        setInProgress(true);\n        try {\n            // 1. generate the customer token\n            const { data } = await generateCustomerToken({ variables: { email, password } });\n            const token = data.generateCustomerToken.token;\n            setToken(token);\n\n            // 2. get the user details\n            await getUserDetails();\n\n            const { data: customerCartData } = await fetchCustomerCart({\n                fetchPolicy: 'network-only'\n            });\n            const customerCartId = customerCartData.customerCart.id;\n\n            // 3. merge the shopping cart if necessary\n            let mergedCartId;\n\n            // Get cartId from localStorage, not from cookie\n            const cartId = await retrieveCartId();\n            if (cartId) {\n                mergedCartId = await mergeCarts({\n                    mergeCartsMutation,\n                    cartDetailsQuery,\n                    cartId,\n                    customerCartId,\n                    dispatch: cartDispatch\n                });\n            } else {\n                mergedCartId = customerCartId;\n            }\n            //4. set the cart id in the cookie and localStorage\n            setCartCookie(mergedCartId);\n            setCustomerCart(mergedCartId);\n            await saveCartId(mergedCartId);\n\n            //5. show my account view in account dropdown or navigation side panel after sign in\n            showMyAccount();\n\n            //6. simple refresh(current page)\n            refreshPage();\n        } catch (e) {\n            setError(e);\n            setInProgress(false);\n        }\n    };\n\n    return {\n        inProgress,\n        handleSubmit,\n        errorMessage,\n        isSignedIn: userState.isSignedIn\n    };\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { Form } from 'informed';\nimport { func } from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport { isRequired } from '../../utils/formValidators';\nimport Button from '../Button';\nimport Field from '../Field';\nimport TextInput from '../TextInput';\n\nimport classes from './signIn.css';\nimport { useSignin } from './useSignin';\nimport LoadingIndicator from '../LoadingIndicator';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst SignIn = props => {\n    const { showMyAccount, showForgotPassword, showCreateAccount } = props;\n    const { errorMessage, handleSubmit, inProgress } = useSignin({ showMyAccount });\n    const intl = useIntl();\n\n    if (inProgress) {\n        return (\n            <LoadingIndicator>\n                {intl.formatMessage({ id: 'account:signing-in', defaultMessage: 'Signing In' })}\n            </LoadingIndicator>\n        );\n    }\n\n    return (\n        <div className={classes.root}>\n            <Form onSubmit={handleSubmit} className={classes.form}>\n                <div className={classes.formTitle}>\n                    {intl.formatMessage({\n                        id: 'account:sign-in-form-title',\n                        defaultMessage: 'Sign-in to Your Account'\n                    })}\n                </div>\n                <Field\n                    label={intl.formatMessage({ id: 'account:email', defaultMessage: 'Email address' })}\n                    required={true}>\n                    <TextInput autoComplete=\"email\" field=\"email\" validate={isRequired} aria-label=\"email\" />\n                </Field>\n                <Field\n                    label={intl.formatMessage({ id: 'account:password', defaultMessage: 'Password' })}\n                    required={true}>\n                    <TextInput\n                        autoComplete=\"current-password\"\n                        field=\"password\"\n                        type=\"password\"\n                        validate={isRequired}\n                        aria-label=\"password\"\n                    />\n                </Field>\n                <div className={classes.forgotPasswordButton}>\n                    <Button priority=\"low\" type=\"button\" onClick={showForgotPassword}>\n                        {intl.formatMessage({ id: 'account:forgot-password', defaultMessage: 'Forgot Password?' })}\n                    </Button>\n                </div>\n                <div className={classes.signInError}>{errorMessage}</div>\n                <div className={classes.signInButton}>\n                    <Button priority=\"high\" type=\"submit\" aria-label=\"submit\">\n                        {intl.formatMessage({ id: 'account:sign-in', defaultMessage: 'Sign In' })}\n                    </Button>\n                </div>\n                <div className={classes.createAccountButton}>\n                    <Button priority=\"normal\" type=\"button\" onClick={showCreateAccount}>\n                        {intl.formatMessage({ id: 'account:create-an-account', defaultMessage: 'Create an Account' })}\n                    </Button>\n                </div>\n            </Form>\n        </div>\n    );\n};\n\nSignIn.propTypes = {\n    showMyAccount: func.isRequired,\n    showForgotPassword: func.isRequired,\n    showCreateAccount: func.isRequired\n};\n\nexport default SignIn;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './signIn';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { useCallback } from 'react';\nimport { arrayOf, func, node, shape, string } from 'prop-types';\n\nimport Button from '../Button';\n\nimport defaultClasses from './accountLink.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst AccountLink = props => {\n    const { children, onClick } = props;\n    const [icon, text] = children;\n    const classes = Object.assign({}, defaultClasses, props.classes);\n\n    const handleClick = useCallback(() => {\n        if (typeof onClick === 'function') {\n            onClick();\n        }\n    }, [onClick]);\n\n    return (\n        <Button classes={classes} onClick={handleClick}>\n            <span className={classes.icon}>{icon}</span>\n            <span className={classes.text}>{text}</span>\n        </Button>\n    );\n};\n\nexport default AccountLink;\n\nAccountLink.propTypes = {\n    children: arrayOf(node).isRequired,\n    classes: shape({\n        root: string,\n        content: string,\n        icon: string,\n        text: string,\n        root_normalPriority: string\n    }),\n    onClick: func\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport AccountLink from '../accountLink';\nimport { useIntl } from 'react-intl';\nimport { LogOut as SignOutIcon } from 'react-feather';\nimport { useUserContext } from '../../../context/UserContext';\nimport { useCartState } from '../../../components/Minicart/cartContext';\nimport { useConfigContext } from '../../../context/ConfigContext';\n\nimport { func } from 'prop-types';\n\nconst SignOutLink = props => {\n    const { showMenu } = props;\n    const [, dispatch] = useCartState();\n    const { pagePaths } = useConfigContext();\n    const [, { signOut }] = useUserContext();\n    const intl = useIntl();\n\n    const handleSignOut = async () => {\n        dispatch({ type: 'reset' });\n        await signOut();\n        if (showMenu) {\n            showMenu();\n        }\n        redirectBacktoStorefront();\n    };\n\n    const redirectBacktoStorefront = () => {\n        if (pagePaths && pagePaths.baseUrl) {\n            window.location.href = pagePaths.baseUrl;\n        }\n    };\n\n    return (\n        <AccountLink onClick={handleSignOut}>\n            <SignOutIcon size={18} />\n            {intl.formatMessage({ id: 'account:sign-out', defaultMessage: 'Sign Out' })}\n        </AccountLink>\n    );\n};\n\nSignOutLink.propTypes = {\n    showMenu: func\n};\n\nexport default SignOutLink;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { func } from 'prop-types';\nimport { Info as InfoIcon } from 'react-feather';\nimport { useIntl } from 'react-intl';\n\nimport AccountLink from '../accountLink';\n\nconst AccountInfoLink = props => {\n    const { showAccountInformation } = props;\n    const intl = useIntl();\n\n    return (\n        <AccountLink onClick={showAccountInformation}>\n            <InfoIcon size={18} />\n            {intl.formatMessage({ id: 'account:account-information', defaultMessage: 'Account Information' })}\n        </AccountLink>\n    );\n};\n\nAccountInfoLink.propTypes = {\n    showAccountInformation: func.isRequired\n};\n\nexport default AccountInfoLink;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { Book as BookIcon } from 'react-feather';\nimport { useIntl } from 'react-intl';\n\nimport { useConfigContext } from '../../../context/ConfigContext';\nimport AccountLink from '../accountLink';\n\nconst AddressBookLink = () => {\n    const { pagePaths } = useConfigContext();\n    const intl = useIntl();\n\n    return (\n        <AccountLink\n            onClick={() => {\n                window.location.href = pagePaths.addressBook;\n            }}>\n            <BookIcon size={18} />\n            {intl.formatMessage({ id: 'account:address-book', defaultMessage: 'Address Book' })}\n        </AccountLink>\n    );\n};\n\nexport default AddressBookLink;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { func } from 'prop-types';\nimport React from 'react';\nimport { Lock as PasswordIcon } from 'react-feather';\nimport { useIntl } from 'react-intl';\n\nimport AccountLink from '../accountLink';\n\nconst ChangePasswordLink = props => {\n    const { showChangePassword } = props;\n    const intl = useIntl();\n\n    return (\n        <AccountLink onClick={showChangePassword}>\n            <PasswordIcon size={18} />\n            {intl.formatMessage({ id: 'account:change-password', defaultMessage: 'Change Password' })}\n        </AccountLink>\n    );\n};\n\nChangePasswordLink.propTypes = {\n    showChangePassword: func.isRequired\n};\n\nexport default ChangePasswordLink;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default as SignOutLink } from './signOutLink';\nexport { default as AccountInfoLink } from './accountInfoLink';\nexport { default as AddressBookLink } from './addressBookLink';\nexport { default as ChangePasswordLink } from './changePasswordLink';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { useIntl } from 'react-intl';\nimport { func } from 'prop-types';\n\nimport LoadingIndicator from '../LoadingIndicator';\n\nimport classes from './myAccount.css';\nimport { useUserContext } from '../../context/UserContext';\n\nimport { SignOutLink, AccountInfoLink, AddressBookLink, ChangePasswordLink } from './AccountLinks';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst MyAccount = props => {\n    const { showMenu, showChangePassword, showAccountInformation } = props;\n    const [{ currentUser, inProgress }] = useUserContext();\n    const intl = useIntl();\n\n    if (inProgress) {\n        return (\n            <div className={classes.modal_active}>\n                <LoadingIndicator>\n                    {intl.formatMessage({ id: 'account:signing-in', defaultMessage: 'Signing In' })}\n                </LoadingIndicator>\n            </div>\n        );\n    }\n\n    const accountLinks = props.children || (\n        <>\n            <ChangePasswordLink showChangePassword={showChangePassword} />\n            <AddressBookLink />\n            <AccountInfoLink showAccountInformation={showAccountInformation} />\n            <SignOutLink showMenu={showMenu} />\n        </>\n    );\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.user}>\n                <h2 className={classes.title}>{`${currentUser.firstname} ${currentUser.lastname}`}</h2>\n                <span className={classes.subtitle}>{currentUser.email}</span>\n            </div>\n            <div className={classes.actions}>{accountLinks}</div>\n        </div>\n    );\n};\n\nMyAccount.propTypes = {\n    showMenu: func,\n    showAccountInformation: func.isRequired,\n    showChangePassword: func.isRequired\n};\n\nexport default MyAccount;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './myAccount';\nexport { default as AccountLink } from './accountLink';\nexport * from './AccountLinks';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { func, shape, string } from 'prop-types';\nimport { Form } from 'informed';\nimport { useIntl } from 'react-intl';\n\nimport combine from '../../utils/combineValidators';\nimport { isRequired, validateEmail } from '../../utils/formValidators';\nimport Field from '../Field';\nimport TextInput from '../TextInput';\nimport Button from '../Button';\n\nimport defaultClasses from './forgotPasswordForm.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst ForgotPasswordForm = props => {\n    const { handleFormSubmit, handleCancel } = props;\n    const intl = useIntl();\n\n    const classes = Object.assign({}, defaultClasses, props.classes || {});\n\n    return (\n        <Form className={classes.root} onSubmit={handleFormSubmit}>\n            <Field label={intl.formatMessage({ id: 'account:email', defaultMessage: 'Email address' })} required={true}>\n                <TextInput\n                    autoComplete=\"email\"\n                    field=\"email\"\n                    validate={combine([isRequired, validateEmail])}\n                    validateOnBlur\n                    aria-label=\"email\"></TextInput>\n            </Field>\n            <div className={classes.buttonContainer}>\n                <Button disabled={false} type=\"submit\" priority=\"high\" aria-label=\"submit\">\n                    {intl.formatMessage({ id: 'account:forgot-password-submit', defaultMessage: 'Submit' })}\n                </Button>\n                {handleCancel && (\n                    <Button disabled={false} type=\"button\" priority=\"normal\" aria-label=\"cancel\" onClick={handleCancel}>\n                        {intl.formatMessage({ id: 'account:forgot-password-cancel', defaultMessage: 'Cancel' })}\n                    </Button>\n                )}\n            </div>\n        </Form>\n    );\n};\n\nForgotPasswordForm.propTypes = {\n    handleFormSubmit: func.isRequired,\n    handleCancel: func,\n    classes: shape({\n        form: string,\n        buttonContainer: string\n    })\n};\n\nexport default ForgotPasswordForm;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { string, func, shape } from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport Button from '../Button';\n\nimport defaultClasses from './formSubmissionSuccessful.css';\nimport mergeClasses from '../../utils/mergeClasses';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst FormSubmissionSuccessful = props => {\n    const { email, onContinue } = props;\n    const intl = useIntl();\n\n    const classes = mergeClasses(defaultClasses, props.classes || {});\n\n    return (\n        <div className={classes.root}>\n            <p className={classes.text}>\n                {intl.formatMessage(\n                    {\n                        id: 'account:forget-password-confirmation',\n                        defaultMessage:\n                            'If there is an account associated with {email}, you will receive an email with a link to change your password.'\n                    },\n                    { email }\n                )}\n            </p>\n            <div className={classes.buttonContainer}>\n                <Button aria-label=\"continue-shopping\" onClick={onContinue}>\n                    {intl.formatMessage({ id: 'account:continue-shopping', defaultMessage: 'Continue Shopping' })}\n                </Button>\n            </div>\n        </div>\n    );\n};\n\nFormSubmissionSuccessful.propTypes = {\n    email: string.isRequired,\n    onContinue: func.isRequired,\n    classes: shape({\n        buttonContainer: string,\n        root: string,\n        text: string\n    })\n};\n\nexport default FormSubmissionSuccessful;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation($email: String!) {\n        requestPasswordResetEmail(email: $email)\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useState, useCallback } from 'react';\nimport { useMutation } from '@apollo/client';\n\nimport MUTATION_REQUEST_PASSWORD_RESET_EMAIL from '../../queries/mutation_request_password_reset_email.graphql';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst useForgotPasswordForm = () => {\n    const [state, setState] = useState({ loading: false, submitted: false, email: null });\n\n    const [requestPasswordResetEmail] = useMutation(MUTATION_REQUEST_PASSWORD_RESET_EMAIL);\n\n    const handleFormSubmit = useCallback(\n        async ({ email }) => {\n            setState({ ...state, loading: true });\n            try {\n                await requestPasswordResetEmail({ variables: { email } });\n            } catch (err) {\n                // Do not output any errors which might indicate if the user email actually exists or not\n            } finally {\n                setState({ ...state, loading: false, submitted: true, email });\n            }\n        },\n        [requestPasswordResetEmail]\n    );\n\n    return [\n        state,\n        {\n            handleFormSubmit\n        }\n    ];\n};\n\nexport default useForgotPasswordForm;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { func } from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport ForgotPasswordForm from './forgotPasswordForm';\nimport FormSubmissionSuccessful from './formSubmissionSuccessful';\nimport useForgotPassword from './useForgotPassword';\nimport LoadingIndicator from '../LoadingIndicator';\n\nimport classes from './forgotPassword.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst ForgotPassword = props => {\n    const { onClose, onCancel } = props;\n\n    const [{ loading, submitted, email }, { handleFormSubmit }] = useForgotPassword();\n    const intl = useIntl();\n\n    let content;\n\n    if (loading) {\n        content = (\n            <LoadingIndicator>\n                {intl.formatMessage({ id: 'common:loading', defaultMessage: 'Loading' })}\n            </LoadingIndicator>\n        );\n    } else if (submitted) {\n        content = <FormSubmissionSuccessful email={email} onContinue={onClose} />;\n    } else {\n        content = (\n            <>\n                <p className={classes.instructions}>\n                    {intl.formatMessage({\n                        id: 'account:reset-password-instructions',\n                        defaultMessage: 'Enter your email below to receive a password reset link.'\n                    })}\n                </p>\n                <ForgotPasswordForm handleFormSubmit={handleFormSubmit} handleCancel={onCancel} />\n            </>\n        );\n    }\n\n    return <div className={classes.root}>{content}</div>;\n};\n\nForgotPassword.propTypes = {\n    onClose: func.isRequired,\n    onCancel: func.isRequired\n};\n\nexport default ForgotPassword;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './forgotPassword';\n\nexport { default as ForgotPasswordForm } from './forgotPasswordForm';\nexport { default as FormSubmissionSuccessful } from './formSubmissionSuccessful';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation createAccount($email: String!, $firstname: String!, $lastname: String!, $password: String) {\n        createCustomerV2(input: { email: $email, firstname: $firstname, lastname: $lastname, password: $password }) {\n            customer {\n                email\n                firstname\n                lastname\n            }\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useMutation } from '@apollo/client';\nimport { useUserContext } from '../../context/UserContext';\n\nimport MUTATION_CREATE_CUSTOMER from '../../queries/mutation_create_customer.graphql';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport default props => {\n    const { showAccountCreated } = props;\n    const [{ isSignedIn, createAccountError, inProgress }, { dispatch }] = useUserContext();\n\n    const [createCustomer] = useMutation(MUTATION_CREATE_CUSTOMER);\n\n    const handleCreateAccount = async formValues => {\n        dispatch({ type: 'setInProgress' });\n        const {\n            customer: { email, firstname, lastname },\n            password\n        } = formValues;\n        try {\n            await createCustomer({\n                variables: { email, password, firstname, lastname }\n            });\n\n            dispatch({ type: 'postCreateAccount', accountEmail: email });\n            showAccountCreated();\n        } catch (error) {\n            dispatch({ type: 'createAccountError', error });\n        }\n    };\n\n    return [{ isSignedIn, createAccountError, inProgress }, { createAccount: handleCreateAccount }];\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { Form } from 'informed';\nimport { shape, string, func } from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport Field from '../Field';\nimport TextInput from '../TextInput';\nimport Checkbox from '../Checkbox';\nimport Button from '../Button';\nimport combine from '../../utils/combineValidators';\nimport {\n    validateEmail,\n    isRequired,\n    validatePassword,\n    validateConfirmPassword,\n    hasLengthAtLeast\n} from '../../utils/formValidators';\nimport mergeClasses from '../../utils/mergeClasses';\nimport defaultClasses from './createAccount.css';\nimport useCreateAccount from './useCreateAccount';\nimport LoadingIndicator from '../LoadingIndicator';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst CreateAccount = props => {\n    const { showAccountCreated, handleCancel } = props;\n    const [{ createAccountError, inProgress }, { createAccount }] = useCreateAccount({\n        showAccountCreated\n    });\n    const intl = useIntl();\n\n    if (inProgress) {\n        return <LoadingIndicator message=\"Creating account\" />;\n    }\n\n    const handleCreateAccount = formValues => {\n        createAccount(formValues);\n    };\n\n    const errorMessage = createAccountError ? createAccountError : null;\n    const classes = mergeClasses(defaultClasses, props.classes);\n\n    return (\n        <Form className={classes.root} onSubmit={handleCreateAccount}>\n            <p className={classes.lead}>\n                {intl.formatMessage({\n                    id: 'account:create-account-lead',\n                    defaultMessage:\n                        'Check out faster, use multiple addresses, track orders and more by creating an account!'\n                })}\n            </p>\n            <Field\n                label={intl.formatMessage({ id: 'account:firstname', defaultMessage: 'First Name' })}\n                required={true}>\n                <TextInput\n                    field=\"customer.firstname\"\n                    autoComplete=\"given-name\"\n                    validate={isRequired}\n                    validateOnBlur\n                    aria-label=\"firstname\"\n                />\n            </Field>\n            <Field label={intl.formatMessage({ id: 'account:lastname', defaultMessage: 'Last Name' })} required={true}>\n                <TextInput\n                    field=\"customer.lastname\"\n                    autoComplete=\"family-name\"\n                    validate={isRequired}\n                    validateOnBlur\n                    aria-label=\"lastname\"\n                />\n            </Field>\n            <Field label={intl.formatMessage({ id: 'account:email', defaultMessage: 'Email address' })} required={true}>\n                <TextInput\n                    field=\"customer.email\"\n                    autoComplete=\"email\"\n                    validate={combine([isRequired, validateEmail])}\n                    validateOnBlur\n                    aria-label=\"email\"\n                />\n            </Field>\n            <Field label={intl.formatMessage({ id: 'account:password', defaultMessage: 'Password' })} required={true}>\n                <TextInput\n                    field=\"password\"\n                    type=\"password\"\n                    autoComplete=\"new-password\"\n                    validate={combine([isRequired, [hasLengthAtLeast, 8], validatePassword])}\n                    validateOnBlur\n                    aria-label=\"password\"\n                />\n            </Field>\n            <Field\n                label={intl.formatMessage({ id: 'account:confirm-password', defaultMessage: 'Confirm Password' })}\n                required={true}>\n                <TextInput\n                    field=\"confirm\"\n                    type=\"password\"\n                    validate={combine([isRequired, validateConfirmPassword])}\n                    validateOnBlur\n                    aria-label=\"confirm\"\n                />\n            </Field>\n            <div className={classes.subscribe}>\n                <Checkbox\n                    field=\"subscribe\"\n                    label={intl.formatMessage({\n                        id: 'account:subscribe-news',\n                        defaultMessage: 'Subscribe to news and updates'\n                    })}\n                    aria-label=\"subscribe\"\n                />\n            </div>\n            <div className={classes.error}>{errorMessage}</div>\n            <div className={classes.actions}>\n                <Button disabled={inProgress} type=\"submit\" priority=\"high\" aria-label=\"submit\">\n                    {intl.formatMessage({ id: 'account:create-submit', defaultMessage: 'Submit' })}\n                </Button>\n                {handleCancel && (\n                    <Button\n                        disabled={inProgress}\n                        type=\"button\"\n                        priority=\"normal\"\n                        aria-label=\"cancel\"\n                        onClick={handleCancel}>\n                        {intl.formatMessage({ id: 'account:create-cancel', defaultMessage: 'Cancel' })}\n                    </Button>\n                )}\n            </div>\n        </Form>\n    );\n};\n\nCreateAccount.propTypes = {\n    classes: shape({\n        actions: string,\n        error: string,\n        lead: string,\n        root: string,\n        subscribe: string\n    }),\n    showMyAccount: func.isRequired,\n    showAccountCreated: func.isRequired,\n    handleCancel: func\n};\n\nexport default CreateAccount;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { func } from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport Trigger from '../Trigger';\nimport { useUserContext } from '../../context/UserContext';\nimport classes from './createAccountSuccess.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst CreateAccountSuccess = props => {\n    const { showSignIn } = props;\n    const [{ createAccountEmail }, { dispatch }] = useUserContext();\n    const intl = useIntl();\n\n    const handleSignIn = () => {\n        dispatch({ type: 'cleanupAccountCreated' });\n        showSignIn();\n    };\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.body}>\n                <h2 className={classes.header}>\n                    {intl.formatMessage({\n                        id: 'account:account-created-title',\n                        defaultMessage: 'Your account was successfully created'\n                    })}\n                </h2>\n                <div className={classes.textBlock}>\n                    {intl.formatMessage(\n                        {\n                            id: 'account:email-confirmation-info',\n                            defaultMessage:\n                                'You will receive a link at {email}. Access that link to confirm your email address.'\n                        },\n                        { email: createAccountEmail }\n                    )}\n                </div>\n                <div className={classes.actions}>\n                    <Trigger action={handleSignIn}>\n                        <span className={classes.signin}>\n                            {intl.formatMessage({ id: 'account:sign-in', defaultMessage: 'Sign In' })}\n                        </span>\n                    </Trigger>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nCreateAccountSuccess.propTypes = {\n    showSignIn: func.isRequired\n};\n\nexport default CreateAccountSuccess;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './createAccount';\nexport { default as CreateAccountSuccess } from './createAccountSuccess';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation ChangeCustomerPassword($currentPassword: String!, $newPassword: String!) {\n        changeCustomerPassword(currentPassword: $currentPassword, newPassword: $newPassword) {\n            __typename\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { useIntl } from 'react-intl';\nimport { func } from 'prop-types';\nimport { Form } from 'informed';\nimport { useMutation } from '@apollo/client';\n\nimport classes from './changePassword.css';\nimport { useUserContext } from '../../context/UserContext';\nimport Field from '../Field';\nimport TextInput from '../TextInput';\nimport Button from '../Button';\nimport combine from '../../utils/combineValidators';\nimport { isRequired, validatePassword, validateConfirmPassword, hasLengthAtLeast } from '../../utils/formValidators';\nimport parseError from '../../utils/parseError';\nimport LoadingIndicator from '../LoadingIndicator';\n\nimport MUTATION_CHANGE_PASSWORD from '../../queries/mutation_change_password.graphql';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst ChangePassword = props => {\n    const { showMyAccount, handleCancel } = props;\n    const [{ token }] = useUserContext();\n    const [doChangePassword, { data, loading, error }] = useMutation(MUTATION_CHANGE_PASSWORD);\n    const intl = useIntl();\n\n    const handleSubmit = formValues => {\n        doChangePassword({\n            variables: {\n                currentPassword: formValues.oldPassword,\n                newPassword: formValues.password\n            },\n            context: {\n                headers: {\n                    authorization: `Bearer ${token && token.length > 0 ? token : ''}`\n                }\n            }\n        });\n    };\n\n    if (loading) {\n        return (\n            <div className={classes.root}>\n                <LoadingIndicator>Loading</LoadingIndicator>\n            </div>\n        );\n    }\n\n    if (data) {\n        return (\n            <div className={classes.root}>\n                <p>\n                    {intl.formatMessage({\n                        id: 'account:password-was-changed',\n                        defaultMessage: 'Your password was changed.'\n                    })}\n                </p>\n                <div className={classes.actions}>\n                    <Button priority=\"high\" onClick={showMyAccount}>\n                        {intl.formatMessage({ id: 'common:back', defaultMessage: 'Back' })}\n                    </Button>\n                </div>\n            </div>\n        );\n    }\n\n    if (!data) {\n        return (\n            <div className={classes.root}>\n                <Form onSubmit={handleSubmit}>\n                    <Field\n                        label={intl.formatMessage({\n                            id: 'account:current-password',\n                            defaultMessage: 'Current Password'\n                        })}\n                        required={true}>\n                        <TextInput\n                            field=\"oldPassword\"\n                            type=\"password\"\n                            validate={combine([isRequired])}\n                            validateOnBlur\n                            aria-label=\"old-password\"\n                        />\n                    </Field>\n                    <Field\n                        label={intl.formatMessage({ id: 'account:new-password', defaultMessage: 'New Password' })}\n                        required={true}>\n                        <TextInput\n                            field=\"password\"\n                            type=\"password\"\n                            autoComplete=\"password\"\n                            validate={combine([isRequired, [hasLengthAtLeast, 8], validatePassword])}\n                            validateOnBlur\n                            aria-label=\"password\"\n                        />\n                    </Field>\n                    <Field\n                        label={intl.formatMessage({\n                            id: 'account:confirm-new-password',\n                            defaultMessage: 'Confirm New Password'\n                        })}\n                        required={true}>\n                        <TextInput\n                            field=\"confirm\"\n                            type=\"password\"\n                            validate={combine([isRequired, validateConfirmPassword])}\n                            validateOnBlur\n                            aria-label=\"confirm\"\n                        />\n                    </Field>\n                    {error && <div className={classes.error}>{parseError(error)}</div>}\n                    <div className={classes.actions}>\n                        <Button type=\"submit\" priority=\"high\" aria-label=\"submit\">\n                            {intl.formatMessage({ id: 'account:change-password', defaultMessage: 'Change Password' })}\n                        </Button>\n                        {handleCancel && (\n                            <Button type=\"button\" priority=\"normal\" aria-label=\"cancel\" onClick={handleCancel}>\n                                {intl.formatMessage({ id: 'account:change-password-cancel', defaultMessage: 'Cancel' })}\n                            </Button>\n                        )}\n                    </div>\n                </Form>\n            </div>\n        );\n    }\n};\n\nChangePassword.propTypes = {\n    showMyAccount: func.isRequired,\n    handleCancel: func\n};\n\nexport default ChangePassword;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './changePassword';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\n\nimport SignIn from '../SignIn';\nimport MyAccount from '../MyAccount';\nimport ForgotPassword from '../ForgotPassword';\nimport CreateAccount, { CreateAccountSuccess } from '../CreateAccount';\nimport ChangePassword from '../ChangePassword';\n\nimport classes from './myAccountPanel.css';\nimport { string, shape, func } from 'prop-types';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst AuthModal = ({ view = 'MENU', api, children }) => {\n    const {\n        showSignIn,\n        showMyAccount,\n        showMenu,\n        showForgotPassword,\n        showChangePassword,\n        showCreateAccount,\n        showAccountCreated,\n        handleBack\n    } = api;\n\n    let child;\n\n    switch (view) {\n        case 'SIGN_IN':\n            child = (\n                <SignIn\n                    showMyAccount={showMyAccount}\n                    showForgotPassword={showForgotPassword}\n                    showCreateAccount={showCreateAccount}\n                />\n            );\n            break;\n        case 'MY_ACCOUNT':\n            child = (\n                <MyAccount\n                    showMenu={showMenu}\n                    showChangePassword={showChangePassword}\n                    showAccountInformation={() => {}}>\n                    {children}\n                </MyAccount>\n            );\n            break;\n        case 'CHANGE_PASSWORD':\n            child = <ChangePassword showMyAccount={showMyAccount} handleCancel={handleBack} />;\n            break;\n        case 'FORGOT_PASSWORD':\n            child = <ForgotPassword onClose={showMenu} onCancel={handleBack} />;\n            break;\n        case 'CREATE_ACCOUNT':\n            child = (\n                <CreateAccount\n                    showMyAccount={showMyAccount}\n                    showAccountCreated={showAccountCreated}\n                    handleCancel={handleBack}\n                />\n            );\n            break;\n        case 'ACCOUNT_CREATED':\n            child = <CreateAccountSuccess showSignIn={showSignIn} />;\n    }\n\n    return <div className={classes.root}>{child}</div>;\n};\n\nAuthModal.propTypes = {\n    view: string,\n    api: shape({\n        showSignIn: func,\n        showMyAccount: func,\n        showMenu: func,\n        showForgotPassword: func,\n        showChangePassword: func,\n        showCreateAccount: func,\n        showAccountCreated: func,\n        handleBack: func\n    })\n};\n\nexport default AuthModal;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useState, useCallback } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useEventListener } from '../../utils/hooks';\nimport { useConfigContext } from '../../context/ConfigContext';\n\n// DOM events that are used to talk to the navigation panel\nconst events = {\n    START_ACC_MANAGEMENT: 'aem.accmg.start',\n    EXIT_ACC_MANAGEMENT: 'aem.accmg.exit'\n};\n\nconst ancestors = {\n    CREATE_ACCOUNT: 'SIGN_IN',\n    FORGOT_PASSWORD: 'SIGN_IN',\n    ACCOUNT_CREATED: 'MENU',\n    MY_ACCOUNT: 'MENU',\n    CHANGE_PASSWORD: 'MY_ACCOUNT',\n    SIGN_IN: 'MENU',\n    MENU: null\n};\n\nconst stepTitles = {\n    CREATE_ACCOUNT: intl => intl.formatMessage({ id: 'account:create-account', defaultMessage: 'Create account' }),\n    FORGOT_PASSWORD: intl =>\n        intl.formatMessage({ id: 'account:password-recovery', defaultMessage: 'Password recovery' }),\n    CHANGE_PASSWORD: intl => intl.formatMessage({ id: 'account:change-password', defaultMessage: 'Change Password' }),\n    MY_ACCOUNT: intl => intl.formatMessage({ id: 'account:my-account', defaultMessage: 'My account' }),\n    ACCOUNT_CREATED: intl => intl.formatMessage({ id: 'account:account-created', defaultMessage: 'Account created' }),\n    SIGN_IN: intl => intl.formatMessage({ id: 'account:sign-in', defaultMessage: 'Sign In' })\n};\n\nconst startAccMgEvent = new CustomEvent(events.START_ACC_MANAGEMENT);\nconst exitAccMgEvent = new CustomEvent(events.EXIT_ACC_MANAGEMENT);\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst useNavigationState = (props = { view: 'MENU' }) => {\n    const [currentView, setCurrentView] = useState(props.view);\n    const intl = useIntl();\n\n    const {\n        mountingPoints: { navPanel }\n    } = useConfigContext();\n\n    const navigationPanel = document.querySelector(navPanel);\n\n    const triggerNavigationEvent = title => {\n        const event = new CustomEvent('aem.accmg.step', { detail: { title } });\n        triggerEvent(event);\n    };\n\n    const triggerEvent = event => navigationPanel && navigationPanel.dispatchEvent(event);\n\n    const handleBack = useCallback(() => {\n        if (currentView === null) {\n            return;\n        }\n        const parent = ancestors[currentView];\n        if (parent === 'MENU') {\n            // no parent view means we're out of the account management process and back to navigation\n            // so we're resetting the title\n            showMenu();\n            return;\n        }\n        if (parent === 'MY_ACCOUNT') {\n            showMyAccount();\n            return;\n        }\n        if (parent) {\n            switchTo(parent);\n        }\n    }, [currentView]);\n\n    useEventListener(document, 'aem.navigation.back', handleBack);\n\n    const switchTo = view => {\n        triggerNavigationEvent(stepTitles[view](intl));\n        setCurrentView(view);\n    };\n\n    const showSignIn = () => {\n        triggerEvent(startAccMgEvent);\n        switchTo('SIGN_IN');\n    };\n    const showMenu = () => {\n        triggerEvent(exitAccMgEvent);\n        setCurrentView('MENU');\n    };\n    const showMyAccount = () => {\n        dispatchEvent(startAccMgEvent);\n        switchTo('MY_ACCOUNT');\n    };\n    const showChangePassword = () => {\n        switchTo('CHANGE_PASSWORD');\n    };\n    const showCreateAccount = () => {\n        switchTo('CREATE_ACCOUNT');\n    };\n    const showForgotPassword = () => {\n        switchTo('FORGOT_PASSWORD');\n    };\n    const showAccountCreated = () => {\n        switchTo('ACCOUNT_CREATED');\n    };\n\n    const api = {\n        showSignIn,\n        showMenu,\n        showMyAccount,\n        showChangePassword,\n        showForgotPassword,\n        showCreateAccount,\n        showAccountCreated\n    };\n\n    return [currentView, { ...api, switchTo, handleBack }];\n};\n\nexport default useNavigationState;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\n\nimport AuthBar from './authBar';\nimport MyAccountPanel from './myAccountPanel';\n\nimport classes from './container.css';\nimport useNavigationState from './useNavigationState';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Container = props => {\n    const [view, api] = useNavigationState();\n\n    const hasModal = view !== 'MENU';\n    const modalClassName = hasModal ? classes.modal_open : classes.modal;\n    return (\n        <>\n            <div className=\"navigation__footer\">\n                <AuthBar showSignIn={api.showSignIn} showMyAccount={api.showMyAccount} />\n            </div>\n            {view !== null && (\n                <div className={modalClassName}>\n                    <MyAccountPanel view={view} api={api}>\n                        {props.children}\n                    </MyAccountPanel>\n                </div>\n            )}\n        </>\n    );\n};\n\nexport default Container;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './container';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport classes from './cartCounter.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst CartCounter = props => {\n    const { counter } = props;\n    return counter > 0 ? (\n        <span className={classes.root} data-testid=\"cart-counter\">\n            {counter}\n        </span>\n    ) : null;\n};\n\nCartCounter.propTypes = {\n    counter: PropTypes.number.isRequired\n};\n\nexport default CartCounter;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport CartCounter from './cartCounter';\n\nimport Icon from '../Icon';\nimport { ShoppingCart as ShoppingCartIcon } from 'react-feather';\nimport classes from './cartTrigger.css';\nimport { useCartState } from '../Minicart/cartContext';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Trigger = () => {\n    const [{ cart }, dispatch] = useCartState();\n    let cartQuantity = cart && Object.entries(cart).length > 0 ? cart.total_quantity : 0;\n\n    const iconColor = 'rgb(var(--venia-text))';\n    const svgAttributes = {\n        stroke: iconColor\n    };\n\n    if (cartQuantity > 0) {\n        svgAttributes.fill = iconColor;\n    }\n\n    return (\n        <button className={classes.root} aria-label=\"Toggle mini cart\" onClick={() => dispatch({ type: 'open' })}>\n            <Icon src={ShoppingCartIcon} attrs={svgAttributes} />\n            <CartCounter counter={cartQuantity} />\n        </button>\n    );\n};\n\nTrigger.propTypes = {\n    children: PropTypes.node,\n    classes: PropTypes.shape({\n        root: PropTypes.string\n    })\n};\n\nexport default Trigger;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './cartTrigger';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { User as UserIcon } from 'react-feather';\n\nimport { useUserContext } from '../../context/UserContext';\nimport Icon from '../Icon';\n\nimport classes from './accountTrigger.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst AccountTrigger = props => {\n    const [{ isAccountDropdownOpen }, { toggleAccountDropdown }] = useUserContext();\n    const { label } = props;\n\n    const iconColor = 'rgb(var(--venia-text))';\n    const svgAttributes = {\n        stroke: iconColor\n    };\n\n    return (\n        <button\n            className={classes.root}\n            aria-label=\"Toggle account dropdown\"\n            onClick={() => toggleAccountDropdown(!isAccountDropdownOpen)}>\n            <Icon src={UserIcon} attrs={svgAttributes} />\n            {label && <span className={classes.label}>{label}</span>}\n        </button>\n    );\n};\n\nAccountTrigger.propTypes = {\n    children: PropTypes.node,\n    classes: PropTypes.shape({\n        root: PropTypes.string\n    }),\n    label: PropTypes.oneOfType([PropTypes.object, PropTypes.string])\n};\n\nexport default AccountTrigger;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\n\nimport { useConfigContext } from '../../context/ConfigContext';\nimport { useUserContext } from '../../context/UserContext';\nimport SignIn from '../SignIn/signIn';\nimport MyAccount from '../MyAccount/myAccount';\nimport ChangePassword from '../ChangePassword';\nimport ForgotPassword from '../ForgotPassword/forgotPassword';\nimport CreateAccount, { CreateAccountSuccess } from '../CreateAccount';\n\nimport classes from './accountDropdown.css';\nimport Mask from '../Mask';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst AccountDropdown = props => {\n    const [\n        { isAccountDropdownOpen, isSignedIn, accountDropdownView },\n        {\n            showSignIn,\n            showMyAccount,\n            showForgotPassword,\n            showCreateAccount,\n            showAccountCreated,\n            showChangePassword,\n            toggleAccountDropdown\n        }\n    ] = useUserContext();\n    const { pagePaths } = useConfigContext();\n    const rootClass = isAccountDropdownOpen ? classes.root_open : classes.root;\n\n    let view;\n    if (!isSignedIn) {\n        switch (accountDropdownView) {\n            case 'FORGOT_PASSWORD':\n                view = <ForgotPassword onClose={showSignIn} onCancel={showSignIn} />;\n                break;\n            case 'CREATE_ACCOUNT':\n                view = (\n                    <CreateAccount\n                        showMyAccount={showMyAccount}\n                        showAccountCreated={showAccountCreated}\n                        handleCancel={showSignIn}\n                    />\n                );\n                break;\n            case 'ACCOUNT_CREATED':\n                view = <CreateAccountSuccess showSignIn={showSignIn} />;\n                break;\n            case 'SIGN_IN':\n            default:\n                view = (\n                    <SignIn\n                        showMyAccount={showMyAccount}\n                        showForgotPassword={showForgotPassword}\n                        showCreateAccount={showCreateAccount}\n                    />\n                );\n        }\n    } else {\n        switch (accountDropdownView) {\n            case 'CHANGE_PASSWORD':\n                view = <ChangePassword showMyAccount={showMyAccount} handleCancel={showMyAccount} />;\n                break;\n            case 'MY_ACCOUNT':\n            default:\n                view = (\n                    <MyAccount\n                        showChangePassword={showChangePassword}\n                        showAccountInformation={() => {\n                            window.location.href = pagePaths.accountDetails;\n                        }}>\n                        {props.children}\n                    </MyAccount>\n                );\n        }\n    }\n\n    return (\n        <>\n            <Mask\n                isOpen={isAccountDropdownOpen}\n                onClickHandler={() => toggleAccountDropdown(!isAccountDropdownOpen)}\n                customClasses={{ root_active: classes.mask_active }}\n            />\n\n            <div className={rootClass} aria-label=\"account dropdown\">\n                {view}\n            </div>\n        </>\n    );\n};\n\nexport default AccountDropdown;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { useEffect } from 'react';\nimport { useIntl } from 'react-intl';\n\nimport { useUserContext } from '../../context/UserContext';\nimport AccountTrigger from './accountTrigger';\nimport AccountDropdown from './accountDropdown';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst AccountContainer = props => {\n    const [{ currentUser, isSignedIn }, { getUserDetails }] = useUserContext();\n    const intl = useIntl();\n\n    useEffect(() => {\n        if (isSignedIn && currentUser.email === '') {\n            getUserDetails();\n        }\n    }, [getUserDetails]);\n\n    const label = isSignedIn\n        ? intl.formatMessage(\n              {\n                  id: 'account:account-icon-text-greeting',\n                  defaultMessage: 'Hi, {name}'\n              },\n              {\n                  name: currentUser.firstname\n              }\n          )\n        : intl.formatMessage({\n              id: 'account:account-icon-text-sign-in',\n              defaultMessage: 'Sign In'\n          });\n\n    return (\n        <>\n            <AccountTrigger label={label} />\n            <AccountDropdown>{props.children}</AccountDropdown>\n        </>\n    );\n};\n\nexport default AccountContainer;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './accountContainer';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { useIntl } from 'react-intl';\n\nimport { useUserContext } from '../../context/UserContext';\nimport Button from '../Button';\n\nimport classes from './addressDeleteModal.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst AddressDeleteModal = () => {\n    const [{ deleteAddress: address }, { deleteAddress, dispatch }] = useUserContext();\n    const intl = useIntl();\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.cancel}>\n                <Button priority=\"normal\" type=\"button\" onClick={() => dispatch({ type: 'endDeletingAddress' })}>\n                    {intl.formatMessage({ id: 'account:address-delete-cancel', defaultMessage: 'Cancel' })}\n                </Button>\n            </div>\n            <div className={classes.delete}>\n                <Button\n                    priority=\"high\"\n                    type=\"button\"\n                    onClick={() => {\n                        deleteAddress(address);\n                    }}>\n                    {intl.formatMessage({ id: 'account:address-delete-confirm', defaultMessage: 'Delete' })}\n                </Button>\n            </div>\n        </div>\n    );\n};\n\nexport default AddressDeleteModal;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { Edit as EditIcon, Trash2 as DeleteIcon } from 'react-feather';\nimport { useIntl } from 'react-intl';\nimport PropTypes from 'prop-types';\n\nimport { useUserContext } from '../../context/UserContext';\nimport AddressDeleteModal from './addressDeleteModal';\n\nimport classes from './addressItem.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst AddressItem = props => {\n    const { address, displayType } = props;\n    const [{ deleteAddress }, { dispatch }] = useUserContext();\n    const rootClass = displayType ? classes[displayType] : classes.root;\n    const street = address.street.join(' ');\n    const intl = useIntl();\n\n    return (\n        <div className={rootClass}>\n            <div className={classes.summary}>\n                <div className={classes.name}>\n                    <strong>\n                        {address.firstname} {address.lastname}\n                    </strong>\n                </div>\n                <div className={classes.street}>{street}</div>\n                <div className={classes.cityRegion}>\n                    {address.city}, {address.region.region_code}\n                </div>\n                <div className={classes.country}>{address.country_code}</div>\n            </div>\n            <div className={classes.actions}>\n                <button\n                    className={classes.editButton}\n                    onClick={() => dispatch({ type: 'beginEditingAddress', address })}>\n                    <span className={classes.icon}>\n                        <EditIcon size={18} />\n                    </span>\n                    <span className={classes.label}>\n                        {intl.formatMessage({ id: 'account:address-edit', defaultMessage: 'Edit' })}\n                    </span>\n                </button>\n                {!address.default_shipping && !address.default_billing && (\n                    <button\n                        className={classes.deleteButton}\n                        onClick={() => dispatch({ type: 'beginDeletingAddress', address })}>\n                        <span className={classes.icon}>\n                            <DeleteIcon size={18} />\n                        </span>\n                        <span className={classes.label}>\n                            {intl.formatMessage({ id: 'account:address-delete', defaultMessage: 'Delete' })}\n                        </span>\n                    </button>\n                )}\n                {!!address.default_shipping && !!address.default_billing && (\n                    <div className={classes.defaultTag}>\n                        <span>\n                            {intl.formatMessage({ id: 'account:address-default-tag', defaultMessage: 'Default' })}\n                        </span>\n                    </div>\n                )}\n            </div>\n            {deleteAddress && deleteAddress.id === address.id && <AddressDeleteModal />}\n        </div>\n    );\n};\n\nAddressItem.propTypes = {\n    address: PropTypes.object,\n    displayType: PropTypes.string\n};\n\nexport default AddressItem;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { PlusSquare as PlusIcon } from 'react-feather';\nimport { useIntl } from 'react-intl';\nimport PropTypes from 'prop-types';\n\nimport { useUserContext } from '../../context/UserContext';\n\nimport classes from './addAddressButton.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst AddAddressButton = props => {\n    const { displayType } = props;\n    const [, { dispatch }] = useUserContext();\n    const intl = useIntl();\n    const rootClass = displayType ? classes[displayType] : classes.root;\n\n    return (\n        <button className={rootClass} aria-label=\"Add an address\" onClick={() => dispatch({ type: 'openAddressForm' })}>\n            <span className={classes.icon}>\n                <PlusIcon size={18} />\n            </span>\n            <span className={classes.label}>\n                {intl.formatMessage({ id: 'account:add-an-address', defaultMessage: 'Add an address' })}\n            </span>\n        </button>\n    );\n};\n\nAddAddressButton.propTypes = {\n    displayType: PropTypes.string\n};\n\nexport default AddAddressButton;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { useUserContext } from '../../context/UserContext';\nimport AddressItem from './addressItem';\nimport AddAddressButton from './addAddressButton';\n\nimport classes from './addressItemsContainer.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst AddressItems = props => {\n    const { displayType } = props;\n    const [{ currentUser }] = useUserContext();\n\n    const rootClass = displayType ? classes[displayType] : classes.root;\n\n    return (\n        <div className={rootClass}>\n            {currentUser.addresses.length > 0 &&\n                currentUser.addresses.map(address => (\n                    <AddressItem key={address.id} address={address} displayType={displayType} />\n                ))}\n            <AddAddressButton displayType={displayType} />\n        </div>\n    );\n};\n\nAddressItems.propTypes = {\n    displayType: PropTypes.string\n};\n\nexport default AddressItems;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\n\nimport { useUserContext } from '../../context/UserContext';\nimport { useAddressForm } from '../AddressForm/useAddressForm';\nimport AddressForm from '../AddressForm';\n\nimport classes from './addressFormContainer.css';\nimport { useIntl } from 'react-intl';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst AddressFormContainer = () => {\n    const [{ isShowAddressForm }] = useUserContext();\n    const { countries, handleSubmit, handleCancel, errorMessage, updateAddress } = useAddressForm();\n    const intl = useIntl();\n\n    return (\n        <>\n            <div className={isShowAddressForm ? classes.mask_active : classes.mask}></div>\n            {isShowAddressForm && (\n                <div className={classes.container}>\n                    <AddressForm\n                        cancel={handleCancel}\n                        countries={countries}\n                        formErrorMessage={errorMessage}\n                        initialValues={updateAddress}\n                        showDefaultAddressCheckbox={true}\n                        submit={handleSubmit}\n                        formHeading={intl.formatMessage({\n                            id: 'account:address-form-heading',\n                            defaultMessage: 'Address'\n                        })}\n                        submitButtonLabel={intl.formatMessage({ id: 'common:save', defaultMessage: 'Save' })}\n                    />\n                </div>\n            )}\n        </>\n    );\n};\n\nexport default AddressFormContainer;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { useIntl } from 'react-intl';\n\nimport { useUserContext } from '../../context/UserContext';\nimport AddressItemsContainer from './addressItemsContainer';\nimport AddressFormContainer from './addressFormContainer';\n\nimport classes from './addressBook.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst AddressBook = () => {\n    const [{ isSignedIn }] = useUserContext();\n    const intl = useIntl();\n\n    const content = isSignedIn ? (\n        <>\n            <AddressItemsContainer />\n            <AddressFormContainer />\n        </>\n    ) : (\n        <div className={classes.text}>\n            {intl.formatMessage({\n                id: 'account:address-book-sign-in-text',\n                defaultMessage: 'Please Sign in to see your address book.'\n            })}\n        </div>\n    );\n\n    return (\n        <div className={classes.root}>\n            <h1 className={classes.title}>\n                {intl.formatMessage({ id: 'account:address-book', defaultMessage: 'Address Book' })}\n            </h1>\n            {content}\n        </div>\n    );\n};\n\nexport default AddressBook;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './addressBook';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { array, shape, func, bool, number } from 'prop-types';\nimport Price from '../Price';\n\nconst Checkbox = props => {\n    const { item, customization, options, handleSelectionChange } = props;\n\n    const onChange = event => {\n        const { checked, value } = event.target;\n        let newCustomization;\n\n        if (checked) {\n            newCustomization = [...customization];\n            const { id, price, quantity } = options.find(o => o.id == value);\n            newCustomization.push({ id, price, quantity });\n        } else {\n            newCustomization = customization.filter(c => c.id != value);\n        }\n\n        handleSelectionChange(item.option_id, 1, newCustomization);\n    };\n\n    return (\n        <>\n            {options.map(o => (\n                <div key={`option-${item.option_id}-${o.id}`} className=\"bundleProduct__option\">\n                    <label>\n                        <input\n                            type=\"checkbox\"\n                            checked={customization.findIndex(c => c.id === o.id) > -1}\n                            onChange={onChange}\n                            value={o.id}\n                        />{' '}\n                        {`${o.quantity} x ${o.label} +`}\n                        <b>\n                            <Price currencyCode={o.currency} value={o.price} />\n                        </b>\n                    </label>\n                </div>\n            ))}\n        </>\n    );\n};\n\nCheckbox.propTypes = {\n    item: shape({\n        required: bool.isRequired,\n        option_id: number.isRequired\n    }),\n    customization: array.isRequired,\n    options: array.isRequired,\n    handleSelectionChange: func.isRequired\n};\n\nexport default Checkbox;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { array, shape, func, bool, number } from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport Price from '../Price';\n\nconst Radio = props => {\n    const { item, customization, options, handleSelectionChange } = props;\n    const { quantity } = item;\n    const { can_change_quantity } =\n        customization.length > 0 ? options.find(o => o.id === customization[0].id) : { can_change_quantity: false };\n    const intl = useIntl();\n\n    const onChange = event => {\n        const { value } = event.target;\n        let newQuantity = 1;\n        const newCustomization = options\n            .filter(o => o.id == value)\n            .map(o => {\n                newQuantity = o.quantity;\n                return { id: o.id, quantity: newQuantity, price: o.price };\n            });\n\n        handleSelectionChange(item.option_id, newQuantity, newCustomization);\n    };\n\n    const onQuantityChange = event => {\n        try {\n            const newQuantity = parseInt(event.target.value);\n            if (newQuantity > 0) {\n                handleSelectionChange(item.option_id, newQuantity, customization);\n            }\n        } catch {\n            throw new Error('Invalid quantity entered');\n        }\n    };\n\n    return (\n        <>\n            {!item.required && (\n                <div className=\"bundleProduct__option\">\n                    <label>\n                        <input\n                            type=\"radio\"\n                            name={item.option_id}\n                            value=\"\"\n                            onChange={onChange}\n                            checked={customization.length === 0}\n                        />{' '}\n                        None\n                    </label>\n                </div>\n            )}\n            {options.map(o => (\n                <div key={`option-${item.option_id}-${o.id}`} className=\"bundleProduct__options\">\n                    <label>\n                        <input\n                            type=\"radio\"\n                            name={item.option_id}\n                            value={o.id}\n                            onChange={onChange}\n                            checked={customization.findIndex(c => c.id === o.id) > -1}\n                        />{' '}\n                        {`${o.label} +`}\n                        <b>\n                            <Price currencyCode={o.currency} value={o.price} />\n                        </b>\n                    </label>\n                </div>\n            ))}\n            <h2 className=\"option__title productFullDetail__quantityTitle\">\n                <span>{intl.formatMessage({ id: 'cart:quantity', defaultMessage: 'Quantity' })}</span>\n            </h2>\n            <input\n                type=\"number\"\n                min=\"1\"\n                className=\"option__quantity\"\n                disabled={!can_change_quantity}\n                value={quantity}\n                onChange={onQuantityChange}\n            />\n        </>\n    );\n};\n\nRadio.propTypes = {\n    item: shape({\n        required: bool.isRequired,\n        option_id: number.isRequired,\n        quantity: number.isRequired\n    }),\n    customization: array.isRequired,\n    options: array.isRequired,\n    handleSelectionChange: func.isRequired\n};\n\nexport default Radio;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { array, shape, func, bool, number } from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nconst Select = props => {\n    const { item, customization, options, handleSelectionChange } = props;\n    const { quantity } = item;\n    const { can_change_quantity } =\n        customization.length > 0 ? options.find(o => o.id === customization[0].id) : { can_change_quantity: false };\n    const intl = useIntl();\n\n    const onChange = event => {\n        const { value } = event.target;\n        let newQuantity = 1;\n        const newCustomization = options\n            .filter(o => o.id == value)\n            .map(o => {\n                newQuantity = o.quantity;\n                return { id: o.id, quantity: newQuantity, price: o.price };\n            });\n\n        handleSelectionChange(item.option_id, newQuantity, newCustomization);\n    };\n\n    const onQuantityChange = event => {\n        try {\n            const newQuantity = parseInt(event.target.value);\n            if (newQuantity > 0) {\n                handleSelectionChange(item.option_id, newQuantity, customization);\n            }\n        } catch {\n            throw new Error('Invalid quantity entered');\n        }\n    };\n\n    return (\n        <>\n            <div className=\"bundleOptionSelect__root\">\n                <span className=\"fieldIcons__root\">\n                    <span className=\"fieldIcons__input\">\n                        <select\n                            aria-label={item.title}\n                            className=\"select__input field__input bundleProduct__option\"\n                            name={item.id}\n                            value={customization[0]?.id}\n                            onChange={onChange}>\n                            {!item.required && <option value=\"\">None</option>}\n                            {options.map(o => (\n                                <option key={`option-${item.option_id}-${o.id}`} value={o.id}>\n                                    {o.label}\n                                </option>\n                            ))}\n                        </select>\n                    </span>\n                    <span className=\"fieldIcons__before\"></span>\n                    <span className=\"fieldIcons__after\">\n                        <span className=\"icon__root\">\n                            <svg\n                                xmlns=\"http://www.w3.org/2000/svg\"\n                                width=\"18\"\n                                height=\"18\"\n                                viewBox=\"0 0 24 24\"\n                                fill=\"none\"\n                                stroke=\"currentColor\"\n                                strokeWidth=\"2\"\n                                strokeLinecap=\"round\"\n                                strokeLinejoin=\"round\">\n                                <polyline points=\"6 9 12 15 18 9\"></polyline>\n                            </svg>\n                        </span>\n                    </span>\n                </span>\n            </div>\n\n            <h2 className=\"bundleProduct__quantityTitle\">\n                <span>{intl.formatMessage({ id: 'cart:quantity', defaultMessage: 'Quantity' })}</span>\n            </h2>\n            <input\n                type=\"number\"\n                min=\"1\"\n                className=\"option__quantity\"\n                disabled={!can_change_quantity}\n                value={quantity}\n                onChange={onQuantityChange}\n            />\n        </>\n    );\n};\n\nSelect.propTypes = {\n    item: shape({\n        required: bool.isRequired,\n        option_id: number.isRequired,\n        quantity: number.isRequired\n    }),\n    customization: array.isRequired,\n    options: array.isRequired,\n    handleSelectionChange: func.isRequired\n};\n\nexport default Select;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { array, shape, func, bool, number } from 'prop-types';\n\nconst MultiSelect = props => {\n    const { item, customization, options, handleSelectionChange } = props;\n\n    const onChange = event => {\n        const values = Array.from(event.target.options)\n            .filter(e => e.selected)\n            .map(e => e.value);\n        const newCustomization = options\n            .filter(o => values.includes(o.id.toString()))\n            .map(o => {\n                return { id: o.id, quantity: o.quantity, price: o.price };\n            });\n        handleSelectionChange(item.option_id, 1, newCustomization);\n    };\n\n    return (\n        <select\n            name={item.option_id}\n            multiple=\"multiple\"\n            className=\"bundleProduct__option field__input\"\n            size=\"5\"\n            value={customization.map(c => c.id)}\n            onChange={onChange}>\n            {options.map(o => (\n                <option key={`option-${item.option_id}-${o.id}`} value={o.id}>\n                    {o.label}\n                </option>\n            ))}\n        </select>\n    );\n};\n\nMultiSelect.propTypes = {\n    item: shape({\n        required: bool.isRequired,\n        option_id: number.isRequired\n    }),\n    customization: array.isRequired,\n    options: array.isRequired,\n    handleSelectionChange: func.isRequired\n};\n\nexport default MultiSelect;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    query bundleProduct($sku: String!) {\n        products(filter: { sku: { eq: $sku } }) {\n            items {\n                sku\n                __typename\n                id\n                name\n                ... on BundleProduct {\n                    dynamic_sku\n                    dynamic_price\n                    dynamic_weight\n                    price_view\n                    ship_bundle_items\n                    items {\n                        option_id\n                        title\n                        required\n                        type\n                        position\n                        sku\n                        options {\n                            id\n                            quantity\n                            position\n                            is_default\n                            price\n                            price_type\n                            can_change_quantity\n                            label\n                            product {\n                                price_range {\n                                    maximum_price {\n                                        final_price {\n                                            currency\n                                            value\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useConfigContext } from '../../context/ConfigContext';\nimport Checkbox from './checkbox';\nimport Radio from './radio';\nimport Select from './select';\nimport MultiSelect from './multiSelect';\n\nimport { useAwaitQuery } from '../../utils/hooks';\n\nimport Button from '../Button';\n\nimport BUNDLE_PRODUCT_QUERY from '../../queries/query_bundle_product.graphql';\nimport Price from '../Price';\n\nconst BundleProductOptions = () => {\n    const bundleProductQuery = useAwaitQuery(BUNDLE_PRODUCT_QUERY);\n    const {\n        mountingPoints: { bundleProductOptionsContainer }\n    } = useConfigContext();\n    const productId = document.querySelector('[data-cmp-is=product]')?.id;\n    const [bundleState, setBundleState] = useState(null);\n    const intl = useIntl();\n    let { sku, showAddToWishList } = document.querySelector(bundleProductOptionsContainer)?.dataset || {};\n\n    if (showAddToWishList === '') {\n        // show-add-to-wish-list is set without a value to the dom,\n        // the returned value from the data set is an empty string: ''\n        showAddToWishList = true;\n    }\n\n    const fetchBundleDetails = async sku => {\n        const { data, error } = await bundleProductQuery({ variables: { sku }, fetchPolicy: 'network-only' });\n\n        if (error) {\n            throw new Error(error);\n        }\n        let currencyCode;\n        const bundleOptions = data.products.items[0];\n        const selections = bundleOptions.items.map(item => {\n            return {\n                option_id: item.option_id,\n                required: item.required,\n                title: item.title,\n                type: item.type,\n                quantity: ['checkbox', 'multi'].includes(item.type) ? 1 : item.options.find(o => o.is_default).quantity,\n                options: item.options\n                    .slice() // return a shallow copy of the array. the original is frozen and cannot be sorted as Array.prototype.sort() sorts the elements of the array in place\n                    .sort((a, b) => a.position - b.position)\n                    .map(option => {\n                        const {\n                            id,\n                            can_change_quantity,\n                            quantity,\n                            label,\n                            product: {\n                                price_range: {\n                                    maximum_price: {\n                                        final_price: { currency, value }\n                                    }\n                                }\n                            }\n                        } = option;\n\n                        return {\n                            id,\n                            can_change_quantity,\n                            quantity,\n                            label,\n                            currency,\n                            price: value\n                        };\n                    }),\n                customization: item.options\n                    .filter(o => o.is_default)\n                    .map(o => {\n                        const {\n                            id,\n                            quantity,\n                            product: {\n                                price_range: {\n                                    maximum_price: {\n                                        final_price: { value, currency }\n                                    }\n                                }\n                            }\n                        } = o;\n\n                        currencyCode = currency;\n\n                        return {\n                            id,\n                            quantity,\n                            price: value\n                        };\n                    })\n            };\n        });\n        setBundleState({ selections, currencyCode, quantity: 1 });\n    };\n\n    const handleSelectionChange = (option_id, quantity, customization) => {\n        const { selections } = bundleState;\n        const selectionIndex = selections.findIndex(s => s.option_id === option_id);\n        const selection = selections[selectionIndex];\n        selections.splice(selectionIndex, 1, { ...selection, quantity, customization });\n\n        setBundleState({ ...bundleState, selections: [...selections] });\n    };\n\n    const changeBundleQuantity = e => {\n        const { value } = e.target;\n        setBundleState({ ...bundleState, quantity: value });\n    };\n\n    const renderItemOptions = item => {\n        const { option_id, required, quantity, options, type, customization } = item;\n        const otherProps = { options, customization, handleSelectionChange };\n\n        switch (type) {\n            case 'checkbox': {\n                return <Checkbox item={{ option_id, required }} {...otherProps} />;\n            }\n            case 'radio': {\n                return <Radio item={{ option_id, required, quantity }} {...otherProps} />;\n            }\n            case 'select': {\n                return <Select item={{ option_id, required, quantity }} {...otherProps} />;\n            }\n            case 'multi': {\n                return <MultiSelect item={{ option_id, required }} {...otherProps} />;\n            }\n        }\n    };\n\n    const canAddToCart = () => {\n        const { selections } = bundleState;\n        return selections.reduce((acc, selection) => {\n            return acc && (selection.required ? selection.customization.length > 0 : true);\n        }, true);\n    };\n\n    const addToCart = () => {\n        const { selections, quantity } = bundleState;\n        const productData = {\n            productId,\n            sku,\n            virtual: false,\n            bundle: true,\n            quantity: quantity,\n            options: selections.map(s => {\n                return {\n                    id: s.option_id,\n                    quantity: s.quantity,\n                    value: s.customization.map(c => c.id.toString())\n                };\n            })\n        };\n        const customEvent = new CustomEvent('aem.cif.add-to-cart', {\n            detail: [productData]\n        });\n        document.dispatchEvent(customEvent);\n    };\n\n    const addToWishlist = () => {\n        const { selections, quantity } = bundleState;\n        const selected_options = [];\n        selections.forEach(s => {\n            s.customization.forEach(c => {\n                selected_options.push(btoa(`bundle/${s.option_id}/${c.id}/${s.quantity}`));\n            });\n        });\n        const productData = {\n            sku,\n            quantity: quantity,\n            selected_options\n        };\n\n        const customEvent = new CustomEvent('aem.cif.add-to-wishlist', {\n            detail: [productData]\n        });\n        document.dispatchEvent(customEvent);\n    };\n\n    const getTotalPrice = () => {\n        const { selections, currencyCode } = bundleState;\n        const price = selections.reduce((acc, selection) => {\n            return (\n                acc +\n                selection.quantity *\n                    selection.customization.reduce((a, c) => {\n                        return a + c.price * (['checkbox', 'multi'].includes(selection.type) ? c.quantity : 1);\n                    }, 0)\n            );\n        }, 0);\n\n        return <Price currencyCode={currencyCode} value={price} className=\"bundlePrice\" />;\n    };\n\n    if (!sku) return <></>;\n\n    if (bundleState === null) {\n        return (\n            <section className=\"productFullDetail__section productFullDetail__customizeBundle\">\n                <Button priority=\"high\" onClick={() => fetchBundleDetails(sku)}>\n                    <span>{intl.formatMessage({ id: 'product:customize-bundle', defaultMessage: 'Customize' })}</span>\n                </Button>\n            </section>\n        );\n    }\n\n    return (\n        <>\n            {bundleState.selections.map(e => (\n                <section\n                    key={`item-${e.option_id}`}\n                    className=\"productFullDetail__section productFullDetail__bundleProduct\">\n                    <h3 className=\"option__title\">\n                        <span>{e.title}</span> {e.required && <span className=\"required\"> *</span>}\n                    </h3>\n                    <div>{renderItemOptions(e)}</div>\n                </section>\n            ))}\n            <section className=\"productFullDetail__section productFullDetail__bundleProduct\">\n                <h3>\n                    <span className=\"required\">\n                        * {intl.formatMessage({ id: 'product:required-fields', defaultMessage: 'Required fields' })}\n                    </span>\n                    <span className=\"priceInfo\">\n                        {intl.formatMessage({\n                            id: 'product:customization-price',\n                            defaultMessage: 'Your customization'\n                        })}\n                        : {getTotalPrice()}\n                    </span>\n                </h3>\n            </section>\n            <section className=\"productFullDetail__quantity productFullDetail__section\">\n                <h2 className=\"productFullDetail__quantityTitle option__title\">\n                    <span>{intl.formatMessage({ id: 'cart:quantity', defaultMessage: 'Quantity' })}</span>\n                </h2>\n                <div className=\"quantity__root\">\n                    <span className=\"fieldIcons__root\" style={{ '--iconsBefore': 0, '--iconsAfter': 1 }}>\n                        <span className=\"fieldIcons__input\">\n                            <select\n                                aria-label={intl.formatMessage({\n                                    id: 'product:quantity-label',\n                                    defaultMessage: 'Product quantity'\n                                })}\n                                className=\"select__input field__input\"\n                                name=\"quantity\"\n                                value={bundleState.quantity}\n                                onChange={changeBundleQuantity}>\n                                <option value=\"1\">1</option>\n                                <option value=\"2\">2</option>\n                                <option value=\"3\">3</option>\n                                <option value=\"4\">4</option>\n                            </select>\n                        </span>\n                        <span className=\"fieldIcons__before\"></span>\n                        <span className=\"fieldIcons__after\">\n                            <span className=\"icon__root\">\n                                <svg\n                                    xmlns=\"http://www.w3.org/2000/svg\"\n                                    width=\"18\"\n                                    height=\"18\"\n                                    viewBox=\"0 0 24 24\"\n                                    fill=\"none\"\n                                    stroke=\"currentColor\"\n                                    strokeWidth=\"2\"\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\">\n                                    <polyline points=\"6 9 12 15 18 9\"></polyline>\n                                </svg>\n                            </span>\n                        </span>\n                    </span>\n                    <p className=\"message-root\"></p>\n                </div>\n            </section>\n            <section className=\"productFullDetail__cartActions productFullDetail__section\">\n                <button\n                    className=\"button__root_highPriority button__root clickable__root button__filled\"\n                    type=\"button\"\n                    disabled={!canAddToCart()}\n                    onClick={addToCart}>\n                    <span className=\"button__content\">\n                        <span>{intl.formatMessage({ id: 'product:add-item', defaultMessage: 'Add to Cart' })}</span>\n                    </span>\n                </button>\n                {showAddToWishList && (\n                    <button\n                        className=\"button__root_normalPriority button__root clickable__root\"\n                        type=\"button\"\n                        onClick={addToWishlist}>\n                        <span className=\"button__content\">\n                            <span>\n                                {intl.formatMessage({\n                                    id: 'product:add-to-wishlist',\n                                    defaultMessage: 'Add to Wish List'\n                                })}\n                            </span>\n                        </span>\n                    </button>\n                )}\n            </section>\n        </>\n    );\n};\n\nexport default BundleProductOptions;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './bundleProductOptions';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    query giftCardProduct($sku: String!) {\n        products(filter: { sku: { eq: $sku } }) {\n            items {\n                sku\n                __typename\n                name\n                price_range {\n                    maximum_price {\n                        final_price {\n                            currency\n                        }\n                    }\n                }\n                ... on GiftCardProduct {\n                    giftcard_type\n                    allow_open_amount\n                    open_amount_min\n                    open_amount_max\n                    giftcard_amounts {\n                        uid\n                        value\n                    }\n                    gift_card_options {\n                        title\n                        required\n                        ... on CustomizableFieldOption {\n                            value {\n                                uid\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useEffect, useState } from 'react';\nimport { useAwaitQuery } from '../../utils/hooks';\nimport GIFT_CARD_PRODUCT_QUERY from '../../queries/query_gift_card_product.graphql';\n\nconst OPEN_AMOUNT = 'open_amount';\n\nconst useGiftCardOptions = props => {\n    const { sku } = props;\n\n    const [giftCardState, setGiftCardState] = useState(null);\n    const giftCardProductQuery = useAwaitQuery(GIFT_CARD_PRODUCT_QUERY);\n\n    useEffect(() => {\n        const fetchGiftCardOptions = async () => {\n            if (!sku) {\n                console.error('SKU is not present in the dataset of mountpoint element');\n                return;\n            }\n            const { data, error } = await giftCardProductQuery({ variables: { sku }, fetchPolicy: 'network-only' });\n\n            if (error) {\n                throw new Error(error);\n            }\n\n            const giftCardOptions = data.products.items[0];\n            const giftCardValues = {\n                quantity: 1,\n                open_amount: giftCardOptions.giftcard_amounts.length === 0,\n                custom_amount: giftCardOptions.open_amount_min,\n                custom_amount_uid: giftCardOptions.gift_card_options.find(\n                    o => o.title.toLowerCase() === 'custom giftcard amount'\n                )?.value.uid,\n                selected_amount: '',\n                entered_options: giftCardOptions.gift_card_options\n                    .filter(o => o.title.toLowerCase() !== 'custom giftcard amount')\n                    .reduce(\n                        (prev, curr) => ({\n                            ...prev,\n                            [curr.value.uid]: ''\n                        }),\n                        {}\n                    )\n            };\n\n            setGiftCardState({ giftCardOptions, giftCardValues });\n        };\n        fetchGiftCardOptions();\n    }, [sku, giftCardProductQuery]);\n\n    const changeAmountSelection = e => {\n        const { value } = e.target;\n        setGiftCardState({\n            ...giftCardState,\n            giftCardValues: {\n                ...giftCardState.giftCardValues,\n                open_amount: value === OPEN_AMOUNT,\n                selected_amount: value\n            }\n        });\n    };\n\n    const changeCustomAmount = e => {\n        const { value } = e.target;\n        setGiftCardState({\n            ...giftCardState,\n            giftCardValues: {\n                ...giftCardState.giftCardValues,\n                custom_amount: value\n            }\n        });\n    };\n\n    const changeOptionValue = (uid, value) => {\n        setGiftCardState({\n            ...giftCardState,\n            giftCardValues: {\n                ...giftCardState.giftCardValues,\n                entered_options: {\n                    ...giftCardState.giftCardValues.entered_options,\n                    [uid]: value\n                }\n            }\n        });\n    };\n\n    const changeQuantity = e => {\n        setGiftCardState({\n            ...giftCardState,\n            giftCardValues: {\n                ...giftCardState.giftCardValues,\n                quantity: e.target.value\n            }\n        });\n    };\n\n    const canAddToCart = () => {\n        if (giftCardState === null) return false;\n\n        const {\n            giftCardOptions: { gift_card_options, open_amount_min, open_amount_max },\n            giftCardValues: { open_amount, custom_amount, selected_amount, entered_options }\n        } = giftCardState;\n\n        if (open_amount) {\n            if (\n                Math.fround(open_amount_min) > Math.fround(custom_amount) ||\n                Math.fround(custom_amount) > Math.fround(open_amount_max)\n            ) {\n                return false;\n            }\n        } else {\n            if (selected_amount === '') {\n                return false;\n            }\n        }\n\n        for (const option of gift_card_options.filter(\n            o => o.required && o.title.toLowerCase() !== 'custom giftcard amount'\n        )) {\n            if (entered_options[option.value.uid].trim() === '') {\n                return false;\n            }\n        }\n\n        return true;\n    };\n\n    const addToCart = () => {\n        if (canAddToCart()) {\n            const {\n                giftCardValues: {\n                    quantity,\n                    open_amount,\n                    custom_amount,\n                    custom_amount_uid,\n                    selected_amount,\n                    entered_options\n                }\n            } = giftCardState;\n\n            const productData = {\n                sku,\n                virtual: false,\n                giftCard: true,\n                quantity: quantity,\n                entered_options: Object.entries(entered_options).map(o => ({ uid: o[0], value: o[1] }))\n            };\n\n            if (open_amount) {\n                productData.entered_options.push({ uid: custom_amount_uid, value: custom_amount + '' });\n            } else {\n                productData.selected_options = [selected_amount];\n            }\n\n            const customEvent = new CustomEvent('aem.cif.add-to-cart', {\n                detail: [productData]\n            });\n            document.dispatchEvent(customEvent);\n        }\n    };\n\n    const addToWishlist = () => {\n        const {\n            giftCardValues: { quantity }\n        } = giftCardState;\n        const productData = { sku, quantity };\n        const customEvent = new CustomEvent('aem.cif.add-to-wishlist', {\n            detail: [productData]\n        });\n        document.dispatchEvent(customEvent);\n    };\n\n    return [\n        giftCardState,\n        {\n            changeAmountSelection,\n            changeCustomAmount,\n            changeOptionValue,\n            changeQuantity,\n            canAddToCart,\n            addToCart,\n            addToWishlist\n        }\n    ];\n};\n\nexport default useGiftCardOptions;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { defineMessages, useIntl } from 'react-intl';\nimport LoadingIndicator from '../LoadingIndicator';\nimport Price from '../Price';\nimport useGiftCardOptions from './useGiftCardOptions';\nconst OPEN_AMOUNT = 'open_amount';\n\nconst messages = defineMessages({\n    amountSelectionLabel: {\n        id: 'product:gift-card-amount-selection',\n        defaultMessage: 'Amount'\n    },\n    chooseAmount: {\n        id: 'product:gift-card-choose-amount',\n        defaultMessage: 'Choose an Amount'\n    },\n    otherAmount: {\n        id: 'product:gift-card-other-amount',\n        defaultMessage: 'Other Amount'\n    },\n    customAmountLabel: {\n        id: 'product:gift-card-custom-amount',\n        defaultMessage: 'Amount in'\n    },\n    customPriceMinimum: {\n        id: 'product:gift-card-custom-ammount-minimum',\n        defaultMessage: 'Minimum'\n    },\n    customPriceMaximum: {\n        id: 'product:gift-card-custom-ammount-maximum',\n        defaultMessage: 'Maximum'\n    }\n});\n\nconst GiftCartOptions = props => {\n    const { sku, showAddToWishList } = props;\n    const [\n        giftCardState,\n        {\n            changeAmountSelection,\n            changeCustomAmount,\n            changeOptionValue,\n            changeQuantity,\n            canAddToCart,\n            addToCart,\n            addToWishlist\n        }\n    ] = useGiftCardOptions({ sku });\n\n    const intl = useIntl();\n\n    if (giftCardState === null) {\n        return <LoadingIndicator />;\n    }\n\n    const {\n        giftCardOptions: {\n            giftcard_amounts,\n            gift_card_options,\n            allow_open_amount,\n            open_amount_min,\n            open_amount_max,\n            price_range: {\n                maximum_price: {\n                    final_price: { currency }\n                }\n            }\n        },\n        giftCardValues: { quantity, open_amount, custom_amount, selected_amount, entered_options }\n    } = giftCardState;\n\n    return (\n        <>\n            {giftcard_amounts.length > 0 && (\n                <section className=\"productFullDetail__section productFullDetail__giftCardProduct\">\n                    <h3 className=\"option__title\">\n                        <span>{intl.formatMessage(messages.amountSelectionLabel)}</span>{' '}\n                        <span className=\"required\"> *</span>\n                    </h3>\n                    <div>\n                        <div className=\"giftCardOptionSelect__root\">\n                            <span className=\"fieldIcons__root\">\n                                <span className=\"fieldIcons__input\">\n                                    <select\n                                        aria-label={intl.formatMessage(messages.amountSelectionLabel)}\n                                        className=\"select__input field__input giftCardProduct__option\"\n                                        value={selected_amount}\n                                        onChange={changeAmountSelection}>\n                                        <option value=\"\">{intl.formatMessage(messages.chooseAmount)}...</option>\n                                        {giftcard_amounts.map(o => (\n                                            <option key={o.uid} value={o.uid}>\n                                                {o.value}\n                                            </option>\n                                        ))}\n                                        {allow_open_amount && (\n                                            <option value={OPEN_AMOUNT}>\n                                                {intl.formatMessage(messages.otherAmount)}...\n                                            </option>\n                                        )}\n                                    </select>\n                                </span>\n                                <span className=\"fieldIcons__before\"></span>\n                                <span className=\"fieldIcons__after\">\n                                    <span className=\"icon__root\">\n                                        <svg\n                                            xmlns=\"http://www.w3.org/2000/svg\"\n                                            width=\"18\"\n                                            height=\"18\"\n                                            viewBox=\"0 0 24 24\"\n                                            fill=\"none\"\n                                            stroke=\"currentColor\"\n                                            strokeWidth=\"2\"\n                                            strokeLinecap=\"round\"\n                                            strokeLinejoin=\"round\">\n                                            <polyline points=\"6 9 12 15 18 9\"></polyline>\n                                        </svg>\n                                    </span>\n                                </span>\n                            </span>\n                        </div>\n                    </div>\n                </section>\n            )}\n            {open_amount && (\n                <section className=\"productFullDetail__section productFullDetail__giftCardProduct\">\n                    <h3 className=\"option__title\">\n                        <span>\n                            {intl.formatMessage(messages.customAmountLabel)} {currency}\n                        </span>{' '}\n                        <span className=\"required\"> *</span>\n                    </h3>\n                    <div>\n                        <div className=\"giftCardOptionSelect__root\">\n                            <span>\n                                <input\n                                    type=\"number\"\n                                    aria-label={intl.formatMessage(messages.customAmountLabel)}\n                                    className=\"field__input\"\n                                    min={open_amount_min}\n                                    max={open_amount_max}\n                                    value={custom_amount}\n                                    onChange={changeCustomAmount}\n                                />\n                            </span>\n                            <span>\n                                {intl.formatMessage(messages.customPriceMinimum)}:{' '}\n                                <Price currencyCode={currency} value={open_amount_min} />{' '}\n                                {intl.formatMessage(messages.customPriceMaximum)}:{' '}\n                                <Price currencyCode={currency} value={open_amount_max} />\n                            </span>\n                        </div>\n                    </div>\n                </section>\n            )}\n            {gift_card_options\n                .filter(o => o.title.toLowerCase() !== 'custom giftcard amount')\n                .map(o => (\n                    <section\n                        key={o.value.uid}\n                        className=\"productFullDetail__section productFullDetail__giftCardProduct\">\n                        <h3 className=\"option__title\">\n                            <span>{o.title}</span> {o.required && <span className=\"required\"> *</span>}\n                        </h3>\n                        <div>\n                            <div className=\"giftCardOptionSelect__root\">\n                                <span>\n                                    <input\n                                        type=\"text\"\n                                        aria-label={o.title}\n                                        className=\"field__input\"\n                                        value={entered_options[o.value.uid]}\n                                        onChange={e => changeOptionValue(o.value.uid, e.target.value)}\n                                    />\n                                </span>\n                            </div>\n                        </div>\n                    </section>\n                ))}\n            <section className=\"productFullDetail__quantity productFullDetail__section\">\n                <h2 className=\"productFullDetail__quantityTitle option__title\">\n                    <span>{intl.formatMessage({ id: 'cart:quantity', defaultMessage: 'Quantity' })}</span>\n                </h2>\n                <div className=\"quantity__root\">\n                    <span className=\"fieldIcons__root\" style={{ '--iconsBefore': 0, '--iconsAfter': 1 }}>\n                        <span className=\"fieldIcons__input\">\n                            <select\n                                aria-label={intl.formatMessage({\n                                    id: 'product:quantity-label',\n                                    defaultMessage: 'Product quantity'\n                                })}\n                                className=\"select__input field__input\"\n                                name=\"quantity\"\n                                value={quantity}\n                                onChange={changeQuantity}>\n                                <option value=\"1\">1</option>\n                                <option value=\"2\">2</option>\n                                <option value=\"3\">3</option>\n                                <option value=\"4\">4</option>\n                            </select>\n                        </span>\n                        <span className=\"fieldIcons__before\"></span>\n                        <span className=\"fieldIcons__after\">\n                            <span className=\"icon__root\">\n                                <svg\n                                    xmlns=\"http://www.w3.org/2000/svg\"\n                                    width=\"18\"\n                                    height=\"18\"\n                                    viewBox=\"0 0 24 24\"\n                                    fill=\"none\"\n                                    stroke=\"currentColor\"\n                                    strokeWidth=\"2\"\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\">\n                                    <polyline points=\"6 9 12 15 18 9\"></polyline>\n                                </svg>\n                            </span>\n                        </span>\n                    </span>\n                    <p className=\"message-root\"></p>\n                </div>\n            </section>\n            <section className=\"productFullDetail__cartActions productFullDetail__section\">\n                <button\n                    className=\"button__root_highPriority button__root clickable__root button__filled\"\n                    type=\"button\"\n                    disabled={!canAddToCart()}\n                    onClick={addToCart}>\n                    <span className=\"button__content\">\n                        <span>{intl.formatMessage({ id: 'product:add-item', defaultMessage: 'Add to Cart' })}</span>\n                    </span>\n                </button>\n                {showAddToWishList && (\n                    <button\n                        className=\"button__root_normalPriority button__root clickable__root\"\n                        type=\"button\"\n                        onClick={addToWishlist}>\n                        <span className=\"button__content\">\n                            <span>\n                                {intl.formatMessage({\n                                    id: 'product:add-to-wishlist',\n                                    defaultMessage: 'Add to Wish List'\n                                })}\n                            </span>\n                        </span>\n                    </button>\n                )}\n            </section>\n        </>\n    );\n};\n\nGiftCartOptions.propTypes = {\n    sku: PropTypes.string.required,\n    showAddToWishList: PropTypes.bool\n};\n\nexport default GiftCartOptions;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './giftCardOptions';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport React, { Suspense } from 'react';\n\nimport LoadingIndicator from '../LoadingIndicator';\n\nconst withSuspense = Component => {\n    let WithSuspense = props => {\n        return (\n            <Suspense fallback={<LoadingIndicator />}>\n                <Component {...props} />\n            </Suspense>\n        );\n    };\n    WithSuspense.displayName = `withSuspense(${Component.displayName || Component.name})`;\n    return WithSuspense;\n};\n\nconst Portal = props => {\n    let { selector, children } = props;\n\n    let elem;\n    if (selector instanceof HTMLElement) {\n        elem = selector;\n    } else if (typeof selector === 'string') {\n        elem = document.querySelector(selector);\n    }\n\n    if (elem) {\n        // Only render children if mounting point is available\n        return ReactDOM.createPortal(children, elem);\n    }\n\n    return null;\n};\n\nPortal.propTypes = {\n    selector: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(HTMLElement)]).isRequired\n};\n\nexport default withSuspense(Portal);\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default as Portal } from './Portal';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useEffect, useState } from 'react';\nimport { useCookieValue } from './hooks';\n\n/**\n * This hook listens to messages from the AEM Sites editor, when in editing mode\n * and triggers a re-render of components using the hook.\n */\nconst useEditorEvents = () => {\n    const [, setState] = useState(0);\n    const [wcmmode] = useCookieValue('wcmmode');\n\n    const onMessage = event => {\n        // Drop events from unknown origins\n        if (event.origin !== window.location.origin) {\n            return;\n        }\n\n        // Drop events that are not AEM Sites editor commands\n        if (!event.data || !event.data.msg || event.data.msg !== 'cqauthor-cmd') {\n            return;\n        }\n\n        // Skip commands that do not require a re-render\n        if (event.data.data && event.data.data.cmd && event.data.data.cmd === 'toggleClass') {\n            return;\n        }\n\n        // Update state to force re-render\n        setState(state => state + 1);\n    };\n\n    useEffect(() => {\n        // Only during editing\n        if (wcmmode !== 'edit') {\n            return;\n        }\n\n        window.addEventListener('message', onMessage, false);\n        return () => {\n            window.removeEventListener('message', onMessage, false);\n        };\n    }, []);\n};\n\nexport default useEditorEvents;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Portal from '../Portal/Portal';\nimport useEditorEvents from '../../utils/useEditorEvents';\n\nconst PortalPlacer = props => {\n    const { selector, component: Cmp } = props;\n    useEditorEvents();\n\n    const elems = document.querySelectorAll(selector);\n\n    const children = [...elems].map((elem, index) => {\n        // Convert empty dataset keys to boolean values\n        const dataset = {\n            hostElement: elem,\n            ...elem.dataset\n        };\n        Object.keys(dataset).forEach(key => {\n            if (dataset[key] === '') {\n                dataset[key] = true;\n            }\n        });\n\n        return (\n            <Portal key={index} selector={elem}>\n                <Cmp {...dataset} />\n            </Portal>\n        );\n    });\n\n    return <>{children}</>;\n};\n\nPortalPlacer.propTypes = {\n    selector: PropTypes.string.isRequired,\n    component: PropTypes.func.isRequired\n};\n\nexport default PortalPlacer;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './PortalPlacer';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    mutation($email: String!, $resetPasswordToken: String!, $newPassword: String!) {\n        resetPassword(email: $email, resetPasswordToken: $resetPasswordToken, newPassword: $newPassword)\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useState, useCallback } from 'react';\nimport { useMutation } from '@apollo/client';\n\nimport MUTATION_RESET_PASSWORD from '../../queries/mutation_reset_password.graphql';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst useResetPassword = () => {\n    const [status, setStatus] = useState('new');\n\n    const [resetPassword] = useMutation(MUTATION_RESET_PASSWORD);\n\n    const handleFormSubmit = useCallback(\n        async ({ email, token, password }) => {\n            setStatus('loading');\n            try {\n                await resetPassword({ variables: { email, resetPasswordToken: token, newPassword: password } });\n                setStatus('done');\n            } catch (err) {\n                setStatus('error');\n            }\n        },\n        [resetPassword]\n    );\n\n    return [status, { handleFormSubmit }];\n};\n\nexport default useResetPassword;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { Form } from 'informed';\nimport { useIntl } from 'react-intl';\n\nimport { useQueryParams } from '../../utils/hooks';\nimport Field from '../Field';\nimport TextInput from '../TextInput';\nimport Button from '../Button';\nimport combine from '../../utils/combineValidators';\nimport {\n    isRequired,\n    validateEmail,\n    validatePassword,\n    validateConfirmPassword,\n    hasLengthAtLeast\n} from '../../utils/formValidators';\nimport useResetPassword from './useResetPassword';\nimport LoadingIndicator from '../LoadingIndicator';\n\nimport classes from './ResetPassword.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst ResetPassword = () => {\n    const intl = useIntl();\n    const queryParams = useQueryParams();\n    const token = queryParams.get('token');\n    const [status, { handleFormSubmit }] = useResetPassword();\n\n    const onSubmit = formValues => {\n        const { email, password } = formValues;\n        handleFormSubmit({ email, password, token });\n    };\n\n    if (!token) {\n        return (\n            <div className={classes.error}>\n                {intl.formatMessage({\n                    id: 'account:reset-password-missing-token',\n                    defaultMessage: 'Missing or invalid token.'\n                })}\n            </div>\n        );\n    }\n\n    if (status === 'loading') {\n        return (\n            <LoadingIndicator>\n                {intl.formatMessage({ id: 'common:loading', defaultMessage: 'Loading' })}\n            </LoadingIndicator>\n        );\n    }\n\n    if (status === 'error') {\n        return (\n            <div className={classes.error}>\n                {intl.formatMessage({\n                    id: 'account:reset-password-error',\n                    defaultMessage: 'Could not reset password.'\n                })}\n            </div>\n        );\n    }\n\n    if (status === 'done') {\n        return (\n            <div className={classes.root}>\n                <p className={classes.lead}>\n                    {intl.formatMessage({\n                        id: 'account:reset-password-success',\n                        defaultMessage: 'Your password was changed. Please log in with your new password.'\n                    })}\n                </p>\n            </div>\n        );\n    }\n\n    return (\n        <Form className={classes.root} onSubmit={onSubmit}>\n            <p className={classes.lead}>\n                {intl.formatMessage({\n                    id: 'account:reset-password-lead',\n                    defaultMessage: 'Please choose a new password to complete the password reset.'\n                })}\n            </p>\n            <div className={classes.fields}>\n                <Field\n                    label={intl.formatMessage({ id: 'account:email', defaultMessage: 'Email address' })}\n                    required={true}>\n                    <TextInput\n                        field=\"email\"\n                        autoComplete=\"email\"\n                        validate={combine([isRequired, validateEmail])}\n                        validateOnBlur\n                        aria-label=\"email\"\n                    />\n                </Field>\n                <Field\n                    label={intl.formatMessage({ id: 'account:new-password', defaultMessage: 'New Password' })}\n                    required={true}>\n                    <TextInput\n                        field=\"password\"\n                        type=\"password\"\n                        autoComplete=\"new-password\"\n                        validate={combine([isRequired, [hasLengthAtLeast, 8], validatePassword])}\n                        validateOnBlur\n                        aria-label=\"password\"\n                    />\n                </Field>\n                <Field\n                    label={intl.formatMessage({\n                        id: 'account:new-password-confirm',\n                        defaultMessage: 'Confirm new Password'\n                    })}\n                    required={true}>\n                    <TextInput\n                        field=\"confirm\"\n                        type=\"password\"\n                        validate={combine([isRequired, validateConfirmPassword])}\n                        validateOnBlur\n                        aria-label=\"confirm\"\n                    />\n                </Field>\n            </div>\n            <div className={classes.submit}>\n                <Button type=\"submit\" priority=\"high\" aria-label=\"submit\">\n                    {intl.formatMessage({ id: 'account:reset-password', defaultMessage: 'Reset Password' })}\n                </Button>\n            </div>\n        </Form>\n    );\n};\n\nexport default ResetPassword;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './ResetPassword';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useMemo, useCallback, useState } from 'react';\nimport { useQuery, useMutation } from '@apollo/client';\nimport { useUserContext } from '../../context/UserContext';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst useAccountDetails = props => {\n    const { getCustomerInformationQuery, setCustomerInformationMutation, changeCustomerPasswordMutation } = props;\n    const [{ isSignedIn }] = useUserContext();\n\n    // control the whether the edit form is shown or not\n    const [isUpdateMode, setIsUpdateMode] = useState(false);\n\n    // control whether we show the \"new password\" field\n    const [shouldShowNewPasswordField, setShowNewPassword] = useState(false);\n\n    // control whether we show the error or not.\n    const [displayError, setDisplayError] = useState(false);\n\n    const { data: accountInformationData } = useQuery(getCustomerInformationQuery, {\n        skip: !isSignedIn,\n        fetchPolicy: 'cache-and-network',\n        nextFetchPolicy: 'cache-first'\n    });\n\n    const [\n        setCustomerInformation,\n        { loading: isUpdatingCustomer, error: customerInformationUpdateError }\n    ] = useMutation(setCustomerInformationMutation, { refetchQueries: ['GetCustomerInformation'] });\n\n    const [changeCustomerPassword, { loading: isChangingCustomerPassword, error: changePasswordError }] = useMutation(\n        changeCustomerPasswordMutation\n    );\n\n    const initialValues = useMemo(() => {\n        if (accountInformationData) {\n            return {\n                customer: accountInformationData.customer\n            };\n        }\n    }, [accountInformationData]);\n\n    const showEditForm = useCallback(() => {\n        setIsUpdateMode(true);\n        // hide the previous error message, if any\n        setDisplayError(false);\n    }, [setIsUpdateMode]);\n\n    const handleCancel = useCallback(() => {\n        setIsUpdateMode(false);\n        setShowNewPassword(false);\n    }, [setIsUpdateMode, setShowNewPassword]);\n\n    const handleShowNewPasswordField = useCallback(() => {\n        setShowNewPassword(true);\n    }, [setShowNewPassword]);\n\n    const handleSubmit = useCallback(\n        async values => {\n            const { firstname, lastname, email, password, newPassword } = values;\n            try {\n                if (\n                    initialValues.customer.firstname !== firstname ||\n                    initialValues.customer.lastname !== lastname ||\n                    initialValues.customer.email !== email\n                ) {\n                    // we have to send the password when we change the email address\n                    await setCustomerInformation({\n                        variables: {\n                            firstname,\n                            lastname,\n                            email,\n                            password\n                        }\n                    });\n                }\n                // if we have a \"new password\" value we must change the password as well\n                if (password && newPassword) {\n                    await changeCustomerPassword({\n                        variables: {\n                            currentPassword: password,\n                            newPassword\n                        }\n                    });\n                }\n                handleCancel();\n            } catch {\n                setDisplayError(true);\n                return;\n            }\n        },\n        [setCustomerInformation, handleCancel, changeCustomerPassword, initialValues]\n    );\n\n    const errors = displayError ? [customerInformationUpdateError, changePasswordError] : [];\n\n    return {\n        initialValues,\n        formErrors: errors,\n        isSignedIn,\n        isUpdateMode,\n        isDisabled: isUpdatingCustomer || isChangingCustomerPassword,\n        showEditForm,\n        handleCancel,\n        handleSubmit,\n        shouldShowNewPasswordField,\n        handleShowNewPasswordField\n    };\n};\n\nexport default useAccountDetails;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\nexport default gql`\n    query GetCustomerInformation {\n        customer {\n            firstname\n            lastname\n            email\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\n\n// TODO: updateCustomer mutation is deprecated and needs to be changed to updateCustomerV2. This new mutation doesn't\n//       allow to change passwords or email address. Use updateCustomerEmail and changeCustomerPassword for this.\n\nexport default gql`\n    mutation UpdateCustomerInformation($firstname: String, $lastname: String, $email: String, $password: String) {\n        updateCustomer(input: { firstname: $firstname, lastname: $lastname, email: $email, password: $password }) {\n            customer {\n                firstname\n                lastname\n                email\n            }\n        }\n    }\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport Icon from '../Icon';\nimport { X as CloseIcon } from 'react-feather';\nimport { string, shape, func, bool, object } from 'prop-types';\nimport { Form } from 'informed';\n\nimport { Portal } from '../Portal';\nimport Button from '../Button';\n\nimport classes from './dialog.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Dialog = props => {\n    const {\n        cancelText,\n        children,\n        confirmText,\n        formProps,\n        isModal,\n        isOpen,\n        onCancel,\n        onConfirm,\n        shouldDisableAllButtons,\n        shouldDisableConfirmButton,\n        title,\n        rootContainerSelector\n    } = props;\n\n    const rootClass = isOpen ? classes.root_open : classes.root;\n    const isMaskDisabled = shouldDisableAllButtons || isModal;\n    const confirmButtonDisabled = shouldDisableAllButtons || shouldDisableConfirmButton;\n\n    const confirmButtonClasses = {\n        root_highPriority: classes.confirmButton\n    };\n\n    const maybeCloseXButton = !isModal ? (\n        <button className={classes.headerButton} disabled={shouldDisableAllButtons} onClick={onCancel} type=\"reset\">\n            <Icon src={CloseIcon} />\n        </button>\n    ) : null;\n\n    return (\n        <Portal selector={rootContainerSelector}>\n            <aside className={rootClass}>\n                <Form className={classes.form} onSubmit={onConfirm} {...formProps}>\n                    {/* The Mask. */}\n                    <button className={classes.mask} disabled={isMaskDisabled} onClick={onCancel} type=\"reset\" />\n                    {/* The Dialog. */}\n                    <div className={classes.dialog}>\n                        <div className={classes.header}>\n                            <span className={classes.headerText}>{title}</span>\n                            {maybeCloseXButton}\n                        </div>\n                        <div className={classes.body}>\n                            <div className={classes.contents}>{children}</div>\n                            <div className={classes.buttons}>\n                                <Button\n                                    disabled={shouldDisableAllButtons}\n                                    onClick={onCancel}\n                                    priority=\"low\"\n                                    type=\"reset\">\n                                    {cancelText}\n                                </Button>\n                                <Button\n                                    classes={confirmButtonClasses}\n                                    disabled={shouldDisableAllButtons || confirmButtonDisabled}\n                                    priority=\"high\"\n                                    type=\"submit\">\n                                    {confirmText}\n                                </Button>\n                            </div>\n                        </div>\n                    </div>\n                </Form>\n            </aside>\n        </Portal>\n    );\n};\n\nexport default Dialog;\n\nDialog.propTypes = {\n    cancelText: string,\n    classes: shape({\n        body: string,\n        cancelButton: string,\n        confirmButton: string,\n        container: string,\n        contents: string,\n        header: string,\n        headerText: string,\n        headerButton: string,\n        mask: string,\n        root: string,\n        root_open: string\n    }),\n    confirmText: string,\n    formProps: object,\n    rootContainerSelector: string,\n    isModal: bool,\n    isOpen: bool,\n    onCancel: func,\n    onConfirm: func,\n    shouldDisableAllButtons: bool,\n    shouldDisableConfirmButton: bool,\n    title: string\n};\n\nDialog.defaultProps = {\n    cancelText: 'Cancel',\n    confirmText: 'Confirm',\n    isModal: false\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './dialog';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\n/**\n * Maps an error to a string message\n *\n * @param {Error} error the error to map\n * @return {String} error message\n */\nconst toString = error => {\n    const { graphQLErrors, message } = error;\n\n    return graphQLErrors && graphQLErrors.length ? graphQLErrors.map(({ message }) => message).join(', ') : message;\n};\n\n/**\n * A function to derive an error string from an array of errors.\n */\nexport const deriveErrorMessage = errors => {\n    const errorCollection = [];\n    for (const error of errors) {\n        if (error) {\n            errorCollection.push(toString(error));\n        }\n    }\n\n    return errorCollection.join(', ');\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { useRef, useEffect } from 'react';\nimport { arrayOf, bool, instanceOf, shape, string } from 'prop-types';\n\nimport defaultClasses from './formError.css';\nimport mergeClasses from '../../utils/mergeClasses';\nimport { deriveErrorMessage } from '../../utils/deriveErrorMessage';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst FormError = props => {\n    const { classes: propClasses, errors, scrollOnError } = props;\n\n    const errorMessage = deriveErrorMessage(errors);\n\n    const errorRef = useRef(null);\n    useEffect(() => {\n        if (scrollOnError && errorMessage) {\n            errorRef.current.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        }\n    }, [errorRef, scrollOnError, errorMessage]);\n\n    const classes = mergeClasses(defaultClasses, propClasses);\n\n    return errorMessage ? (\n        <div className={classes.root} ref={errorRef}>\n            <span className={classes.errorMessage}>{errorMessage}</span>\n        </div>\n    ) : null;\n};\n\nexport default FormError;\n\nFormError.propTypes = {\n    classes: shape({\n        root: string,\n        errorMessage: string\n    }),\n    errors: arrayOf(instanceOf(Error)),\n    scrollOnError: bool\n};\n\nFormError.defaultProps = {\n    scrollOnError: true\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './formError';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { oneOf, shape, string } from 'prop-types';\n\nimport mergeClasses from '../../utils/mergeClasses';\nimport defaultClasses from './linkButton.css';\nimport Button from '../Button';\n\n/**\n * A component for link buttons.\n *\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst LinkButton = props => {\n    const { children, classes: propClasses, type, ...restProps } = props;\n    const classes = mergeClasses(defaultClasses, propClasses);\n\n    return (\n        <Button priority={'normal'} classes={{ root_normalPriority: classes.root }} type={type} {...restProps}>\n            {children}\n        </Button>\n    );\n};\n\nLinkButton.propTypes = {\n    classes: shape({\n        root: string\n    }),\n    type: oneOf(['button', 'reset', 'submit']).isRequired\n};\n\nLinkButton.defaultProps = {\n    type: 'button'\n};\n\nexport default LinkButton;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './linkButton';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useState, useCallback } from 'react';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nexport default () => {\n    const [visible, setVisbility] = useState(false);\n\n    const togglePasswordVisibility = useCallback(() => {\n        setVisbility(!visible);\n    }, [visible]);\n\n    return {\n        visible,\n        togglePasswordVisibility\n    };\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { string, bool, shape, func } from 'prop-types';\nimport { Eye, EyeOff } from 'react-feather';\n\nimport usePassword from './usePassword';\nimport mergeClasses from '../../utils/mergeClasses';\n\nimport Button from '../Button';\nimport Field from '../Field';\nimport TextInput from '../TextInput';\nimport { isRequired } from '../../utils/formValidators';\n\nimport defaultClasses from './password.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst Password = props => {\n    const {\n        classes: propClasses,\n        label,\n        fieldName,\n        isToggleButtonHidden,\n        autoComplete,\n        validate,\n        ...otherProps\n    } = props;\n    const talonProps = usePassword();\n    const { visible, togglePasswordVisibility } = talonProps;\n    const classes = mergeClasses(defaultClasses, propClasses);\n\n    const passwordButton = !isToggleButtonHidden ? (\n        <Button className={classes.passwordButton} onClick={togglePasswordVisibility} type=\"button\">\n            {visible ? <Eye /> : <EyeOff />}\n        </Button>\n    ) : null;\n\n    const fieldType = visible ? 'text' : 'password';\n\n    return (\n        <Field label={label} classes={{ root: classes.root }}>\n            <TextInput\n                after={passwordButton}\n                autoComplete={autoComplete}\n                field={fieldName}\n                type={fieldType}\n                validate={validate}\n                {...otherProps}\n            />\n        </Field>\n    );\n};\n\nPassword.propTypes = {\n    autoComplete: string,\n    classes: shape({\n        root: string\n    }),\n    label: string,\n    fieldName: string,\n    isToggleButtonHidden: bool,\n    validate: func\n};\n\nPassword.defaultProps = {\n    isToggleButtonHidden: true,\n    validate: isRequired\n};\n\nexport default Password;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default } from './password';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React, { Fragment, useEffect } from 'react';\nimport { bool, func } from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport { useFormApi, useFormState } from 'informed';\n\nimport Field from '../Field';\nimport LinkButton from '../LinkButton';\nimport TextInput from '../TextInput';\nimport Password from '../Password';\nimport combine from '../../utils/combineValidators';\nimport { isRequired, validatePassword, hasLengthAtLeast, isNotEqualToField } from '../../utils/formValidators';\n\nimport classes from './editForm.css';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst EditForm = props => {\n    const { shouldShowNewPassword, handleShowNewPasswordField } = props;\n    const intl = useIntl();\n\n    const maybeShowChangePasswordButton = !shouldShowNewPassword && (\n        <div className={classes.changePasswordButtonContainer}>\n            <LinkButton\n                type=\"button\"\n                classes={{ root: classes.changePasswordButton }}\n                onClick={handleShowNewPasswordField}>\n                {intl.formatMessage({ id: 'account:change-password', defaultMessage: 'Change Password' })}\n            </LinkButton>\n        </div>\n    );\n\n    const maybeShowNewPasswordField = shouldShowNewPassword ? (\n        <div className={classes.newPassword}>\n            <Password\n                fieldName=\"newPassword\"\n                label={intl.formatMessage({ id: 'account:new-password', defaultMessage: 'New Password' })}\n                validate={combine([\n                    isRequired,\n                    [hasLengthAtLeast, 8],\n                    validatePassword,\n                    [isNotEqualToField, 'password']\n                ])}\n                isToggleButtonHidden={false}\n            />\n        </div>\n    ) : null;\n    const passwordLabel = shouldShowNewPassword\n        ? intl.formatMessage({ id: 'account:current-password', defaultMessage: 'Current Password' })\n        : intl.formatMessage({ id: 'account:password', defaultMessage: 'Password' });\n\n    const formState = useFormState();\n    const formApi = useFormApi();\n    const { submits, invalid } = formState;\n\n    useEffect(() => {\n        if (!invalid) {\n            // clear the password field on a successful submit\n            formApi.setValue('password', '');\n        }\n    }, [submits, invalid]);\n\n    return (\n        <Fragment>\n            <div className={classes.root}>\n                <div className={classes.firstname}>\n                    <Field\n                        id=\"firstname\"\n                        label={intl.formatMessage({ id: 'account:firstname', defaultMessage: 'First Name' })}>\n                        <TextInput field=\"firstname\" validate={isRequired} />\n                    </Field>\n                </div>\n                <div className={classes.lastname}>\n                    <Field\n                        id=\"lastname\"\n                        label={intl.formatMessage({ id: 'account:lastname', defaultMessage: 'Last Name' })}>\n                        <TextInput field=\"lastname\" validate={isRequired} />\n                    </Field>\n                </div>\n                <div className={classes.email}>\n                    <Field\n                        id=\"email\"\n                        label={intl.formatMessage({ id: 'account:email', defaultMessage: 'Email address' })}>\n                        <TextInput field=\"email\" validate={isRequired} />\n                    </Field>\n                </div>\n                <div className={classes.password}>\n                    <Password\n                        fieldName=\"password\"\n                        label={passwordLabel}\n                        validate={isRequired}\n                        autoComplete=\"current-password\"\n                        isToggleButtonHidden={false}\n                    />\n                </div>\n                {maybeShowChangePasswordButton}\n            </div>\n            {maybeShowNewPasswordField}\n        </Fragment>\n    );\n};\n\nexport default EditForm;\n\nEditForm.propTypes = {\n    shouldShowNewPassword: bool,\n    handleShowNewPasswordField: func\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { object, bool, func, array } from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport { useConfigContext } from '../../context/ConfigContext';\nimport Dialog from '../Dialog';\nimport FormError from '../FormError';\n\nimport EditForm from './editForm';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst EditModal = props => {\n    const {\n        initialValues,\n        isOpen,\n        onCancel,\n        onSubmit,\n        isDisabled,\n        onChangePassword,\n        shouldShowNewPassword,\n        formErrors\n    } = props;\n    const intl = useIntl();\n\n    const {\n        mountingPoints: { accountDetails: rootSelector }\n    } = useConfigContext();\n\n    const dialogFormProps = { initialValues };\n\n    return (\n        <Dialog\n            confirmText=\"Save\"\n            formProps={dialogFormProps}\n            isOpen={isOpen}\n            onCancel={onCancel}\n            onConfirm={onSubmit}\n            shouldDisableAllButtons={isDisabled}\n            shouldDisableConfirmButton={isDisabled}\n            title={intl.formatMessage({ id: 'account:edit-account-info', defaultMessage: 'Edit account information' })}\n            rootContainerSelector={rootSelector}\n            isModal={true}>\n            <FormError errors={formErrors} />\n            <EditForm handleShowNewPasswordField={onChangePassword} shouldShowNewPassword={shouldShowNewPassword} />\n        </Dialog>\n    );\n};\n\nexport default EditModal;\n\nEditModal.propTypes = {\n    initialValues: object.isRequired,\n    isOpen: bool,\n    onCancel: func.isRequired,\n    onSubmit: func.isRequired,\n    isDisabled: bool,\n    onChangePassword: func.isRequired,\n    shouldShowNewPassword: bool,\n    formErrors: array\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport React from 'react';\nimport { useIntl } from 'react-intl';\nimport LoadingIndicator from '../LoadingIndicator';\nimport Button from '../Button';\n\nimport useAccountDetails from './useAccountDetails';\nimport GET_CUSTOMER_INFORMATION from '../../queries/query_get_customer_information.graphql';\nimport UPDATE_CUSTOMER_INFORMATION from '../../queries/mutation_update_customer_information.graphql';\nimport CHANGE_CUSTOMER_PASSWORD from '../../queries/mutation_change_password.graphql';\n\nimport classes from './accountDetails.css';\nimport EditModal from './editModal';\n\n/**\n * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest\n */\nconst AccountDetails = () => {\n    const {\n        initialValues,\n        isSignedIn,\n        isUpdateMode,\n        showEditForm,\n        handleCancel,\n        shouldShowNewPasswordField,\n        handleShowNewPasswordField,\n        handleSubmit,\n        isDisabled,\n        formErrors\n    } = useAccountDetails({\n        getCustomerInformationQuery: GET_CUSTOMER_INFORMATION,\n        setCustomerInformationMutation: UPDATE_CUSTOMER_INFORMATION,\n        changeCustomerPasswordMutation: CHANGE_CUSTOMER_PASSWORD\n    });\n    const intl = useIntl();\n\n    if (!isSignedIn) {\n        return (\n            <div className={classes.messageText}>\n                {intl.formatMessage({\n                    id: 'account:account-details-sign-in-text',\n                    defaultMessage: 'Please sign in to see the account details.'\n                })}\n            </div>\n        );\n    }\n\n    if (!initialValues) {\n        return <LoadingIndicator />;\n    }\n    const { customer } = initialValues;\n\n    return (\n        <div className={classes.accountDetails}>\n            <div className={classes.lineItems}>\n                <span className={classes.lineItemLabel}>\n                    {intl.formatMessage({ id: 'account:name', defaultMessage: 'Name' })}\n                </span>\n                <span className={classes.lineItemValue} aria-label=\"name\">\n                    {`${customer.firstname} ${customer.lastname}`}\n                </span>\n                <span className={classes.lineItemLabel}>\n                    {intl.formatMessage({ id: 'account:email', defaultMessage: 'Email address' })}\n                </span>\n                <span className={classes.lineItemValue} aria-label=\"email\">\n                    {customer.email}\n                </span>\n                <span className={classes.lineItemLabel}>\n                    {intl.formatMessage({ id: 'account:password', defaultMessage: 'Password' })}\n                </span>\n                <span className={classes.lineItemValue} aria-label=\"password\">\n                    {`*******`}\n                </span>\n                <span className={classes.lineItemButton}>\n                    <Button className={classes.editInformationButton} onClick={showEditForm}>\n                        {intl.formatMessage({ id: 'common', defaultMessage: 'Edit' })}\n                    </Button>\n                </span>\n            </div>\n            <EditModal\n                formErrors={formErrors}\n                initialValues={{ ...customer }}\n                isDisabled={isDisabled}\n                isOpen={isUpdateMode}\n                onCancel={handleCancel}\n                onChangePassword={handleShowNewPasswordField}\n                onSubmit={handleSubmit}\n                shouldShowNewPassword={shouldShowNewPasswordField}\n            />\n        </div>\n    );\n};\n\nexport default AccountDetails;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2020 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default as AccountDetails } from './accountDetails';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\n\nexport const createProductPageUrl = sku => {\n    const url = new URL(window.location);\n\n    // Provided by StoreConfigExporter\n    let storeConfigEl = document.querySelector('meta[name=\"store-config\"]');\n    let storeRootUrl;\n\n    if (storeConfigEl) {\n        storeRootUrl = JSON.parse(storeConfigEl.content).storeRootUrl;\n    } else {\n        // TODO: deprecated - the store configuration on the <body> has been deprecated and will be removed\n        storeRootUrl = document.body.dataset.storeRootUrl;\n    }\n\n    if (!storeRootUrl) {\n        return null;\n    }\n\n    const path = storeRootUrl.substr(0, storeRootUrl.lastIndexOf('.'));\n    url.pathname = `${path}.cifproductredirect.html/${sku}`;\n\n    return url.toString();\n};\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { gql } from '@apollo/client';\nimport { MiniCartFragment } from '@magento/peregrine/lib/talons/MiniCart/miniCartFragments.gql';\n\nexport default gql`\n    mutation($cartId: String!, $cartItems: [CartItemInput!]!) {\n        addProductsToCart(cartId: $cartId, cartItems: $cartItems) {\n            cart {\n                id\n                items {\n                    uid\n                    quantity\n                    product {\n                        name\n                        thumbnail {\n                            url\n                        }\n                    }\n                }\n                ...MiniCartFragment\n            }\n        }\n    }\n    ${MiniCartFragment}\n`;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useCallback } from 'react';\nimport { useMutation } from '@apollo/client';\nimport mergeOperations from '@magento/peregrine/lib/util/shallowMerge';\nimport { useCartContext } from '@magento/peregrine/lib/context/cart';\n\nimport MUTATION_ADD_TO_CART from '../../queries/mutation_add_to_cart.graphql';\nimport MUTATION_ADD_BUNDLE_TO_CART from '../../queries/mutation_add_bundle_to_cart.graphql';\nimport MUTATION_ADD_VIRTUAL_TO_CART from '../../queries/mutation_add_virtual_to_cart.graphql';\nimport MUTATION_ADD_GIFT_CARD_TO_CART from '../../queries/mutation_add_items_to_cart.graphql';\nimport MUTATION_ADD_SIMPLE_AND_VIRTUAL_TO_CART from '../../queries/mutation_add_simple_and_virtual_to_cart.graphql';\n\nconst defaultOperations = {\n    addPhysicalProductItemsMutation: MUTATION_ADD_TO_CART,\n    addBundledProductItemsMutation: MUTATION_ADD_BUNDLE_TO_CART,\n    addVirtualProductItemsMutation: MUTATION_ADD_VIRTUAL_TO_CART,\n    addGiftCardProductItemsMutation: MUTATION_ADD_GIFT_CARD_TO_CART,\n    addPhysicalAndVirtualProductItemsMutation: MUTATION_ADD_SIMPLE_AND_VIRTUAL_TO_CART\n};\n\nconst useAddToCart = (props = {}) => {\n    const operations = mergeOperations(defaultOperations, props.operations || {});\n    const [addPhysicalProductItems] = useMutation(operations.addPhysicalProductItemsMutation);\n    const [addBundledProductItems] = useMutation(operations.addBundledProductItemsMutation);\n    const [addVirtualProductItems] = useMutation(operations.addVirtualProductItemsMutation);\n    const [addGiftCardProductItems] = useMutation(operations.addGiftCardProductItemsMutation);\n    const [addPhysicalAndVirtualProductItems] = useMutation(operations.addPhysicalAndVirtualProductItemsMutation);\n    const [{ cartId }] = useCartContext();\n\n    return [\n        // data\n        {\n            cartId\n        },\n        // api\n        {\n            addPhysicalProductItems: useCallback(\n                async cartItems => {\n                    await addPhysicalProductItems({ variables: { cartId, cartItems } });\n                },\n                [cartId]\n            ),\n            addBundledProductItems: useCallback(\n                async cartItems => {\n                    await addBundledProductItems({ variables: { cartId, cartItems } });\n                },\n                [cartId]\n            ),\n            addVirtualProductItems: useCallback(\n                async cartItems => {\n                    await addVirtualProductItems({ variables: { cartId, cartItems } });\n                },\n                [cartId]\n            ),\n            addGiftCardProductItems: useCallback(\n                async cartItems => {\n                    await addGiftCardProductItems({ variables: { cartId, cartItems } });\n                },\n                [cartId]\n            ),\n            addPhysicalAndVirtualProductItems: useCallback(\n                async (simpleCartItems, virtualCartItems) => {\n                    await addPhysicalAndVirtualProductItems({\n                        variables: { cartId, simpleCartItems, virtualCartItems }\n                    });\n                },\n                [cartId]\n            )\n        }\n    ];\n};\n\nexport default useAddToCart;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useEventListener } from '../../utils/hooks';\nimport useAddToCart from './useAddToCart';\n\nconst productMapper = item => ({\n    data: {\n        sku: item.sku,\n        quantity: parseFloat(item.quantity)\n    }\n});\n\nconst bundledProductMapper = item => ({\n    ...productMapper(item),\n    bundle_options: item.options\n});\n\nconst giftCardProductMapper = item => ({\n    ...productMapper(item).data,\n    entered_options: item.entered_options,\n    selected_options: item.selected_options\n});\n\nconst useAddToCartEvent = (props = {}) => {\n    const { fallbackHandler } = props;\n    const [, defaultAddToCartApi] = useAddToCart();\n    const { addToCartApi = defaultAddToCartApi } = props;\n\n    useEventListener(document, 'aem.cif.add-to-cart', async event => {\n        const items = typeof event.detail === 'string' ? JSON.parse(event.detail) : event.detail;\n        const physicalCartItems = items.filter(item => !item.virtual).map(productMapper);\n        const virtualCartItems = items.filter(item => item.virtual).map(productMapper);\n        const bundleCartItems = items.filter(item => item.bundle).map(bundledProductMapper);\n        const giftCardCartItems = items.filter(item => item.giftCard).map(giftCardProductMapper);\n\n        if (bundleCartItems.length > 0) {\n            await addToCartApi.addBundledProductItems(bundleCartItems);\n        } else if (giftCardCartItems.length > 0) {\n            await addToCartApi.addGiftCardProductItems(giftCardCartItems);\n        } else if (virtualCartItems.length > 0 && physicalCartItems.length > 0) {\n            await addToCartApi.addPhysicalAndVirtualProductItems(physicalCartItems, virtualCartItems);\n        } else if (virtualCartItems.length > 0) {\n            await addToCartApi.addVirtualProductItems(virtualCartItems);\n        } else if (physicalCartItems.length > 0) {\n            await addToCartApi.addPhysicalProductItems(physicalCartItems);\n        } else if (fallbackHandler) {\n            await fallbackHandler(event);\n        }\n    });\n};\n\nexport default useAddToCartEvent;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default as useAddToCart } from './useAddToCart';\nexport { default as useAddToCartEvent } from './useAddToCartEvent';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nimport { useEventListener } from '../../utils/hooks';\nimport defaultOperations from '@magento/peregrine/lib/talons/Wishlist/AddToListButton/addToListButton.gql';\nimport mergeOperations from '@magento/peregrine/lib/util/shallowMerge';\nimport { useMutation } from '@apollo/client';\n\nconst productMapper = item => {\n    const result = {\n        sku: item.sku,\n        quantity: item.quantity\n    };\n\n    if (item.parent_sku) {\n        result.parent_sku = item.parent_sku;\n    }\n\n    return result;\n};\n\nconst useAddToWishlistEvent = (props = {}) => {\n    const operations = mergeOperations(defaultOperations, props.operations);\n    const [addProductToWishlist] = useMutation(operations.addProductToWishlistMutation);\n\n    useEventListener(document, 'aem.cif.add-to-wishlist', async event => {\n        const items = typeof event.detail === 'string' ? JSON.parse(event.detail) : event.detail;\n\n        const promises = items.map(item =>\n            addProductToWishlist({ variables: { wishlistId: '0', itemOptions: productMapper(item) } })\n        );\n\n        let responseEvent;\n        try {\n            // Wait for all items to be added to the wishlist\n            await Promise.all(promises);\n            responseEvent = new CustomEvent('aem.cif.add-to-wishlist.success', {\n                detail: {\n                    items\n                }\n            });\n        } catch (error) {\n            responseEvent = new CustomEvent('aem.cif.add-to-wishlist.error', {\n                detail: {\n                    error,\n                    items\n                }\n            });\n        }\n        document.dispatchEvent(responseEvent);\n    });\n};\n\nexport default useAddToWishlistEvent;\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2021 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default as useAddToWishlistEvent } from './useAddToWishlistEvent';\n","/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ~ Copyright 2019 Adobe\n ~\n ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n ~ you may not use this file except in compliance with the License.\n ~ You may obtain a copy of the License at\n ~\n ~     http://www.apache.org/licenses/LICENSE-2.0\n ~\n ~ Unless required by applicable law or agreed to in writing, software\n ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n ~ See the License for the specific language governing permissions and\n ~ limitations under the License.\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\nexport { default as CommerceApp } from './components/App';\nexport { default as AuthBar } from './components/AuthBar';\nexport { default as Cart } from './components/Minicart';\nexport { default as CartTrigger } from './components/CartTrigger';\nexport { default as AccountContainer } from './components/AccountContainer';\nexport { default as AddressBook } from './components/AddressBook';\nexport { default as BundleProductOptions } from './components/BundleProductOptions';\nexport { default as GiftCartOptions } from './components/GiftCardOptions';\nexport { default as useGiftCartOptions } from './components/GiftCardOptions/useGiftCardOptions';\nexport { Portal } from './components/Portal';\nexport { default as PortalPlacer } from './components/PortalPlacer';\nexport { default as ResetPassword } from './components/ResetPassword';\nexport { default as Price } from './components/Price';\nexport { default as Trigger } from './components/Trigger';\nexport { default as LoadingIndicator } from './components/LoadingIndicator';\n\nexport { default as ConfigContextProvider, useConfigContext } from './context/ConfigContext';\nexport { default as UserContextProvider, useUserContext } from './context/UserContext';\n\nexport { CheckoutProvider } from './components/Checkout/checkoutContext';\n\nexport { CartProvider, CartInitializer, useCartState } from './components/Minicart';\nexport { AccountDetails } from './components/AccountDetails';\n\nexport { AccountLink } from './components/MyAccount';\nexport { default as MyAccount } from './components/MyAccount';\nexport * from './components/MyAccount/AccountLinks';\nexport { graphqlAuthLink } from './utils/authUtils';\nexport { useAwaitQuery, useStorefrontEvents, usePageType } from './utils/hooks';\nexport { createProductPageUrl } from './utils/createProductPageUrl';\nexport { default as useDataLayerEvents } from './utils/useDataLayerEvents';\n\n// new since CIF-1440\nexport { useAddToCart, useAddToCartEvent } from './talons/Cart';\n\n// new since CIF-2539\nexport { useAddToWishlistEvent } from './talons/Wishlist';\n"],"sourceRoot":""}